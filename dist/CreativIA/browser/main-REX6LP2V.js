var kx=Object.defineProperty,Fx=Object.defineProperties;var Ox=Object.getOwnPropertyDescriptors;var yT=Object.getOwnPropertySymbols;var Lx=Object.prototype.hasOwnProperty,Vx=Object.prototype.propertyIsEnumerable;var vT=(t,e,n)=>e in t?kx(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,H=(t,e)=>{for(var n in e||={})Lx.call(e,n)&&vT(t,n,e[n]);if(yT)for(var n of yT(e))Vx.call(e,n)&&vT(t,n,e[n]);return t},he=(t,e)=>Fx(t,Ox(e));var Tt=null,Ku=!1,Qp=1,Ux=null,xt=Symbol("SIGNAL");function te(t){let e=Tt;return Tt=t,e}function Qu(){return Tt}var ka={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Fa(t){if(Ku)throw new Error("");if(Tt===null)return;Tt.consumerOnSignalRead(t);let e=Tt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=Tt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:Tt.producers,n!==void 0&&n.producer===t)){Tt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===Tt&&(!r||Hx(i,Tt)))return;let o=Ho(Tt),s={producer:t,consumer:Tt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};Tt.producersTail=s,e!==void 0?e.nextProducer=s:Tt.producers=s,o&&IT(t,s)}function _T(){Qp++}function Yp(t){if(!(Ho(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Qp)){if(!t.producerMustRecompute(t)&&!Zu(t)){Jp(t);return}t.producerRecomputeValue(t),Jp(t)}}function Zp(t){if(t.consumers===void 0)return;let e=Ku;Ku=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||Bx(r)}}finally{Ku=e}}function Xp(){return Tt?.consumerAllowSignalWrites!==!1}function Bx(t){t.dirty=!0,Zp(t),t.consumerMarkedDirty?.(t)}function Jp(t){t.dirty=!1,t.lastCleanEpoch=Qp}function Oa(t){return t&&ET(t),te(t)}function ET(t){t.producersTail=void 0,t.recomputing=!0}function Yu(t,e){te(e),t&&CT(t)}function CT(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Ho(t))do n=em(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function Zu(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(Yp(n),r!==n.version))return!0}return!1}function La(t){if(Ho(t)){let e=t.producers;for(;e!==void 0;)e=em(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function IT(t,e){let n=t.consumersTail,r=Ho(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)IT(i.producer,i)}function em(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Ho(e)){let o=e.producers;for(;o!==void 0;)o=em(o)}return n}function Ho(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function tm(t){Ux?.(t)}function Hx(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function nm(t,e){return Object.is(t,e)}function Xu(t,e){let n=Object.create($x);n.computation=t,e!==void 0&&(n.equal=e);let r=()=>{if(Yp(n),Fa(n),n.value===Ju)throw n.error;return n.value};return r[xt]=n,tm(n),r}var Wp=Symbol("UNSET"),Kp=Symbol("COMPUTING"),Ju=Symbol("ERRORED"),$x=he(H({},ka),{value:Wp,dirty:!0,error:null,equal:nm,kind:"computed",producerMustRecompute(t){return t.value===Wp||t.value===Kp},producerRecomputeValue(t){if(t.value===Kp)throw new Error("");let e=t.value;t.value=Kp;let n=Oa(t),r,i=!1;try{r=t.computation(),te(null),i=e!==Wp&&e!==Ju&&r!==Ju&&t.equal(e,r)}catch(o){r=Ju,t.error=o}finally{Yu(t,n)}if(i){t.value=e;return}t.value=r,t.version++}});function Gx(){throw new Error}var TT=Gx;function wT(t){TT(t)}function rm(t){TT=t}var qx=null;function im(t,e){let n=Object.create(ec);n.value=t,e!==void 0&&(n.equal=e);let r=()=>DT(n);return r[xt]=n,tm(n),[r,s=>Va(n,s),s=>ST(n,s)]}function DT(t){return Fa(t),t.value}function Va(t,e){Xp()||wT(t),t.equal(t.value,e)||(t.value=e,zx(t))}function ST(t,e){Xp()||wT(t),Va(t,e(t.value))}var ec=he(H({},ka),{equal:nm,value:void 0,kind:"signal"});function zx(t){t.version++,_T(),Zp(t),qx?.(t)}function om(t){let e=te(null);try{return t()}finally{te(e)}}function le(t){return typeof t=="function"}function $o(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var tc=$o(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ki(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var lt=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(le(r))try{r()}catch(o){e=o instanceof tc?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{AT(o)}catch(s){e=e??[],s instanceof tc?e=[...e,...s.errors]:e.push(s)}}if(e)throw new tc(e)}}add(e){var n;if(e&&e!==this)if(this.closed)AT(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ki(n,e)}remove(e){let{_finalizers:n}=this;n&&ki(n,e),e instanceof t&&e._removeParent(this)}};lt.EMPTY=(()=>{let t=new lt;return t.closed=!0,t})();var sm=lt.EMPTY;function nc(t){return t instanceof lt||t&&"closed"in t&&le(t.remove)&&le(t.add)&&le(t.unsubscribe)}function AT(t){le(t)?t():t.unsubscribe()}var In={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Go={setTimeout(t,e,...n){let{delegate:r}=Go;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Go;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function rc(t){Go.setTimeout(()=>{let{onUnhandledError:e}=In;if(e)e(t);else throw t})}function Fi(){}var bT=am("C",void 0,void 0);function MT(t){return am("E",void 0,t)}function RT(t){return am("N",t,void 0)}function am(t,e,n){return{kind:t,value:e,error:n}}var Oi=null;function qo(t){if(In.useDeprecatedSynchronousErrorHandling){let e=!Oi;if(e&&(Oi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Oi;if(Oi=null,n)throw r}}else t()}function NT(t){In.useDeprecatedSynchronousErrorHandling&&Oi&&(Oi.errorThrown=!0,Oi.error=t)}var Li=class extends lt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,nc(e)&&e.add(this)):this.destination=Kx}static create(e,n,r){return new hr(e,n,r)}next(e){this.isStopped?um(RT(e),this):this._next(e)}error(e){this.isStopped?um(MT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?um(bT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},jx=Function.prototype.bind;function lm(t,e){return jx.call(t,e)}var cm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){ic(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){ic(r)}else ic(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){ic(n)}}},hr=class extends Li{constructor(e,n,r){super();let i;if(le(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&In.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&lm(e.next,o),error:e.error&&lm(e.error,o),complete:e.complete&&lm(e.complete,o)}):i=e}this.destination=new cm(i)}};function ic(t){In.useDeprecatedSynchronousErrorHandling?NT(t):rc(t)}function Wx(t){throw t}function um(t,e){let{onStoppedNotification:n}=In;n&&Go.setTimeout(()=>n(t,e))}var Kx={closed:!0,next:Fi,error:Wx,complete:Fi};var zo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Tn(t){return t}function dm(...t){return fm(t)}function fm(t){return t.length===0?Tn:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var pe=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=Qx(n)?n:new hr(n,r,i);return qo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=xT(r),new r((i,o)=>{let s=new hr({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[zo](){return this}pipe(...n){return fm(n)(this)}toPromise(n){return n=xT(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function xT(t){var e;return(e=t??In.Promise)!==null&&e!==void 0?e:Promise}function Jx(t){return t&&le(t.next)&&le(t.error)&&le(t.complete)}function Qx(t){return t&&t instanceof Li||Jx(t)&&nc(t)}function Yx(t){return le(t?.lift)}function _e(t){return e=>{if(Yx(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Te(t,e,n,r,i){return new hm(t,e,n,r,i)}var hm=class extends Li{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var PT=$o(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var qe=(()=>{class t extends pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new oc(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new PT}next(n){qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?sm:(this.currentObservers=null,o.push(n),new lt(()=>{this.currentObservers=null,ki(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new pe;return n.source=this,n}}return t.create=(e,n)=>new oc(e,n),t})(),oc=class extends qe{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:sm}};var vt=class extends qe{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ua={now(){return(Ua.delegate||Date).now()},delegate:void 0};var sc=class extends qe{constructor(e=1/0,n=1/0,r=Ua){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){let{isStopped:n,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;n||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let n=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){let{_bufferSize:e,_timestampProvider:n,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=n.now(),a=0;for(let l=1;l<r.length&&r[l]<=s;l+=2)a=l;a&&r.splice(0,a+1)}}};var ac=class extends lt{constructor(e,n){super()}schedule(e,n=0){return this}};var Ba={setInterval(t,e,...n){let{delegate:r}=Ba;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Ba;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var lc=class extends ac{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,r=0){return Ba.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Ba.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ki(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var jo=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};jo.now=Ua.now;var uc=class extends jo{constructor(e,n=jo.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var pm=new uc(lc),kT=pm;var Gt=new pe(t=>t.complete());function cc(t){return t&&le(t.schedule)}function FT(t){return t[t.length-1]}function dc(t){return le(FT(t))?t.pop():void 0}function Wr(t){return cc(FT(t))?t.pop():void 0}function LT(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(h){try{c(r.next(h))}catch(p){s(p)}}function l(h){try{c(r.throw(h))}catch(p){s(p)}}function c(h){h.done?o(h.value):i(h.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function OT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vi(t){return this instanceof Vi?(this.v=t,this):new Vi(t)}function VT(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(I){return Promise.resolve(I).then(v,p)}}function a(v,I){r[v]&&(i[v]=function(b){return new Promise(function(A,N){o.push([v,b,A,N])>1||l(v,b)})},I&&(i[v]=I(i[v])))}function l(v,I){try{c(r[v](I))}catch(b){m(o[0][3],b)}}function c(v){v.value instanceof Vi?Promise.resolve(v.value.v).then(h,p):m(o[0][2],v)}function h(v){l("next",v)}function p(v){l("throw",v)}function m(v,I){v(I),o.shift(),o.length&&l(o[0][0],o[0][1])}}function UT(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof OT=="function"?OT(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var fc=t=>t&&typeof t.length=="number"&&typeof t!="function";function hc(t){return le(t?.then)}function pc(t){return le(t[zo])}function mc(t){return Symbol.asyncIterator&&le(t?.[Symbol.asyncIterator])}function gc(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Zx(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var yc=Zx();function vc(t){return le(t?.[yc])}function _c(t){return VT(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Vi(n.read());if(i)return yield Vi(void 0);yield yield Vi(r)}}finally{n.releaseLock()}})}function Ec(t){return le(t?.getReader)}function Ve(t){if(t instanceof pe)return t;if(t!=null){if(pc(t))return Xx(t);if(fc(t))return eP(t);if(hc(t))return tP(t);if(mc(t))return BT(t);if(vc(t))return nP(t);if(Ec(t))return rP(t)}throw gc(t)}function Xx(t){return new pe(e=>{let n=t[zo]();if(le(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function eP(t){return new pe(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function tP(t){return new pe(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,rc)})}function nP(t){return new pe(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function BT(t){return new pe(e=>{iP(t,e).catch(n=>e.error(n))})}function rP(t){return BT(_c(t))}function iP(t,e){var n,r,i,o;return LT(this,void 0,void 0,function*(){try{for(n=UT(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function qt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function Cc(t,e=0){return _e((n,r)=>{n.subscribe(Te(r,i=>qt(r,t,()=>r.next(i),e),()=>qt(r,t,()=>r.complete(),e),i=>qt(r,t,()=>r.error(i),e)))})}function Ic(t,e=0){return _e((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function HT(t,e){return Ve(t).pipe(Ic(e),Cc(e))}function $T(t,e){return Ve(t).pipe(Ic(e),Cc(e))}function GT(t,e){return new pe(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function qT(t,e){return new pe(n=>{let r;return qt(n,e,()=>{r=t[yc](),qt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>le(r?.return)&&r.return()})}function Tc(t,e){if(!t)throw new Error("Iterable cannot be null");return new pe(n=>{qt(n,e,()=>{let r=t[Symbol.asyncIterator]();qt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function zT(t,e){return Tc(_c(t),e)}function jT(t,e){if(t!=null){if(pc(t))return HT(t,e);if(fc(t))return GT(t,e);if(hc(t))return $T(t,e);if(mc(t))return Tc(t,e);if(vc(t))return qT(t,e);if(Ec(t))return zT(t,e)}throw gc(t)}function Pe(t,e){return e?jT(t,e):Ve(t)}function re(...t){let e=Wr(t);return Pe(t,e)}function mm(t,e){let n=le(t)?t:()=>t,r=i=>i.error(n());return new pe(e?i=>e.schedule(r,0,i):r)}function wc(t){return!!t&&(t instanceof pe||le(t.lift)&&le(t.subscribe))}var Ui=$o(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function WT(t){return t instanceof Date&&!isNaN(t)}function ce(t,e){return _e((n,r)=>{let i=0;n.subscribe(Te(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:oP}=Array;function sP(t,e){return oP(e)?t(...e):t(e)}function Dc(t){return ce(e=>sP(t,e))}var{isArray:aP}=Array,{getPrototypeOf:lP,prototype:uP,keys:cP}=Object;function Sc(t){if(t.length===1){let e=t[0];if(aP(e))return{args:e,keys:null};if(dP(e)){let n=cP(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function dP(t){return t&&typeof t=="object"&&lP(t)===uP}function Ac(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function gm(...t){let e=Wr(t),n=dc(t),{args:r,keys:i}=Sc(t);if(r.length===0)return Pe([],e);let o=new pe(fP(r,e,i?s=>Ac(i,s):Tn));return n?o.pipe(Dc(n)):o}function fP(t,e,n=Tn){return r=>{KT(e,()=>{let{length:i}=t,o=new Array(i),s=i,a=i;for(let l=0;l<i;l++)KT(e,()=>{let c=Pe(t[l],e),h=!1;c.subscribe(Te(r,p=>{o[l]=p,h||(h=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function KT(t,e,n){t?qt(n,t,e):e()}function JT(t,e,n,r,i,o,s,a){let l=[],c=0,h=0,p=!1,m=()=>{p&&!l.length&&!c&&e.complete()},v=b=>c<r?I(b):l.push(b),I=b=>{o&&e.next(b),c++;let A=!1;Ve(n(b,h++)).subscribe(Te(e,N=>{i?.(N),o?v(N):e.next(N)},()=>{A=!0},void 0,()=>{if(A)try{for(c--;l.length&&c<r;){let N=l.shift();s?qt(e,s,()=>I(N)):I(N)}m()}catch(N){e.error(N)}}))};return t.subscribe(Te(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Xe(t,e,n=1/0){return le(e)?Xe((r,i)=>ce((o,s)=>e(r,o,i,s))(Ve(t(r,i))),n):(typeof e=="number"&&(n=e),_e((r,i)=>JT(r,i,t,n)))}function QT(t=1/0){return Xe(Tn,t)}function YT(){return QT(1)}function Kr(...t){return YT()(Pe(t,Wr(t)))}function Ha(t){return new pe(e=>{Ve(t()).subscribe(e)})}function $a(...t){let e=dc(t),{args:n,keys:r}=Sc(t),i=new pe(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let h=0;h<s;h++){let p=!1;Ve(n[h]).subscribe(Te(o,m=>{p||(p=!0,c--),a[h]=m},()=>l--,void 0,()=>{(!l||!p)&&(c||o.next(r?Ac(r,a):a),o.complete())}))}});return e?i.pipe(Dc(e)):i}function ZT(t=0,e,n=kT){let r=-1;return e!=null&&(cc(e)?n=e:r=e),new pe(i=>{let o=WT(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){i.closed||(i.next(s++),0<=r?this.schedule(void 0,r):i.complete())},o)})}function rn(t,e){return _e((n,r)=>{let i=0;n.subscribe(Te(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Ga(t){return _e((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Te(n,void 0,void 0,s=>{o=Ve(t(s,Ga(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Wo(t,e){return le(e)?Xe(t,e,1):Xe(t,1)}function ym(t){return _e((e,n)=>{let r=!1;e.subscribe(Te(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function on(t){return t<=0?()=>Gt:_e((e,n)=>{let r=0;e.subscribe(Te(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function XT(){return _e((t,e)=>{t.subscribe(Te(e,Fi))})}function ew(t){return ce(()=>t)}function vm(t,e){return e?n=>Kr(e.pipe(on(1),XT()),n.pipe(vm(t))):Xe((n,r)=>Ve(t(n,r)).pipe(on(1),ew(n)))}function wn(t,e=pm){let n=ZT(t,e);return vm(()=>n)}function tw(t=hP){return _e((e,n)=>{let r=!1;e.subscribe(Te(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function hP(){return new Ui}function Gn(t){return _e((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function pr(t,e){let n=arguments.length>=2;return r=>r.pipe(t?rn((i,o)=>t(i,o,r)):Tn,on(1),n?ym(e):tw(()=>new Ui))}function bc(t){return t<=0?()=>Gt:_e((e,n)=>{let r=[];e.subscribe(Te(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function nw(t={}){let{connector:e=()=>new qe,resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return o=>{let s,a,l,c=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},v=()=>{m(),s=l=void 0,h=p=!1},I=()=>{let b=s;v(),b?.unsubscribe()};return _e((b,A)=>{c++,!p&&!h&&m();let N=l=l??e();A.add(()=>{c--,c===0&&!p&&!h&&(a=_m(I,i))}),N.subscribe(A),!s&&c>0&&(s=new hr({next:O=>N.next(O),error:O=>{p=!0,m(),a=_m(v,n,O),N.error(O)},complete:()=>{h=!0,m(),a=_m(v,r),N.complete()}}),Ve(b).subscribe(s))})(o)}}function _m(t,e,...n){if(e===!0){t();return}if(e===!1)return;let r=new hr({next:()=>{r.unsubscribe(),t()}});return Ve(e(...n)).subscribe(r)}function sn(t,e,n){let r,i=!1;return t&&typeof t=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:n}=t:r=t??1/0,nw({connector:()=>new sc(r,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Em(...t){let e=Wr(t);return _e((n,r)=>{(e?Kr(t,n,e):Kr(t,n)).subscribe(r)})}function Pt(t,e){return _e((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Te(r,l=>{i?.unsubscribe();let c=0,h=o++;Ve(t(l,h)).subscribe(i=Te(r,p=>r.next(e?e(l,p,h,c++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function qa(t){return _e((e,n)=>{Ve(t).subscribe(Te(n,()=>n.complete(),Fi)),!n.closed&&e.subscribe(n)})}function kt(t,e,n){let r=le(t)||e||n?{next:t,error:e,complete:n}:t;return r?_e((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Te(o,l=>{var c;(c=r.next)===null||c===void 0||c.call(r,l),o.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),o.complete()},l=>{var c;a=!1,(c=r.error)===null||c===void 0||c.call(r,l),o.error(l)},()=>{var l,c;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(c=r.finalize)===null||c===void 0||c.call(r)}))}):Tn}var Cm;function Mc(){return Cm}function qn(t){let e=Cm;return Cm=t,e}var rw=Symbol("NotFound");function Ko(t){return t===rw||t?.name==="\u0275NotFound"}var kc="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",J=class extends Error{code;constructor(e,n){super(qi(e,n)),this.code=e}};function gP(t){return`NG0${Math.abs(t)}`}function qi(t,e){return`${gP(t)}${e?": "+e:""}`}var Qa=globalThis;function be(t){for(let e in t)if(t[e]===be)return e;throw Error("")}function lw(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function gr(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(gr).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Fc(t,e){return t?e?`${t} ${e}`:t:e||""}var yP=be({__forward_ref__:be});function Vt(t){return t.__forward_ref__=Vt,t.toString=function(){return gr(this())},t}function _t(t){return Om(t)?t():t}function Om(t){return typeof t=="function"&&t.hasOwnProperty(yP)&&t.__forward_ref__===Vt}function j(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Dn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ya(t){return vP(t,Oc)}function Lm(t){return Ya(t)!==null}function vP(t,e){return t.hasOwnProperty(e)&&t[e]||null}function _P(t){let e=t?.[Oc]??null;return e||null}function Tm(t){return t&&t.hasOwnProperty(Nc)?t[Nc]:null}var Oc=be({\u0275prov:be}),Nc=be({\u0275inj:be}),Q=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=j({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Vm(t){return t&&!!t.\u0275providers}var Um=be({\u0275cmp:be}),Bm=be({\u0275dir:be}),Hm=be({\u0275pipe:be}),$m=be({\u0275mod:be}),ja=be({\u0275fac:be}),zi=be({__NG_ELEMENT_ID__:be}),iw=be({__NG_ENV_ID__:be});function Za(t){return typeof t=="string"?t:t==null?"":String(t)}function uw(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Za(t)}var cw=be({ngErrorCode:be}),EP=be({ngErrorMessage:be}),CP=be({ngTokenPath:be});function Gm(t,e){return dw("",-200,e)}function Lc(t,e){throw new J(-201,!1)}function dw(t,e,n){let r=new J(e,t);return r[cw]=e,r[EP]=t,n&&(r[CP]=n),r}function IP(t){return t[cw]}var wm;function fw(){return wm}function Ft(t){let e=wm;return wm=t,e}function qm(t,e,n){let r=Ya(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Lc(t,"Injector")}var TP={},Bi=TP,wP="__NG_DI_FLAG__",Dm=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Hi(n)||0;try{return this.injector.get(e,r&8?null:Bi,r)}catch(i){if(Ko(i))return i;throw i}}};function DP(t,e=0){let n=Mc();if(n===void 0)throw new J(-203,!1);if(n===null)return qm(t,void 0,e);{let r=SP(e),i=n.retrieve(t,r);if(Ko(i)){if(r.optional)return null;throw i}return i}}function ne(t,e=0){return(fw()||DP)(_t(t),e)}function k(t,e){return ne(t,Hi(e))}function Hi(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function SP(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Sm(t){let e=[];for(let n=0;n<t.length;n++){let r=_t(t[n]);if(Array.isArray(r)){if(r.length===0)throw new J(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],l=AP(a);typeof l=="number"?l===-1?i=a.token:o|=l:i=a}e.push(ne(i,o))}else e.push(ne(r))}return e}function AP(t){return t[wP]}function Jr(t,e){let n=t.hasOwnProperty(ja);return n?t[ja]:null}function Vc(t,e){t.forEach(n=>Array.isArray(n)?Vc(n,e):e(n))}function zm(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Xa(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function hw(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function Uc(t,e,n){let r=Qo(t,e);return r>=0?t[r|1]=n:(r=~r,hw(t,r,e,n)),r}function Bc(t,e){let n=Qo(t,e);if(n>=0)return t[n|1]}function Qo(t,e){return bP(t,e,1)}function bP(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var Zr={},Ot=[],ji=new Q(""),jm=new Q("",-1),Wm=new Q(""),Wa=class{get(e,n=Bi){if(n===Bi){let i=dw("",-201);throw i.name="\u0275NotFound",i}return n}};function Km(t){return t[$m]||null}function Xr(t){return t[Um]||null}function Jm(t){return t[Bm]||null}function pw(t){return t[Hm]||null}function yr(t){return{\u0275providers:t}}function mw(t){return yr([{provide:ji,multi:!0,useValue:t}])}function gw(...t){return{\u0275providers:Qm(!0,t),\u0275fromNgModule:!0}}function Qm(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Vc(e,s=>{let a=s;xc(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&yw(i,o),n}function yw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Ym(i,o=>{e(o,r)})}}function xc(t,e,n,r){if(t=_t(t),!t)return!1;let i=null,o=Tm(t),s=!o&&Xr(t);if(!o&&!s){let l=t.ngModule;if(o=Tm(l),o)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=t}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)xc(c,e,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let c;try{Vc(o.imports,h=>{xc(h,e,n,r)&&(c||=[],c.push(h))})}finally{}c!==void 0&&yw(c,e)}if(!a){let c=Jr(i)||(()=>new i);e({provide:i,useFactory:c,deps:Ot},i),e({provide:Wm,useValue:i,multi:!0},i),e({provide:ji,useValue:()=>ne(i),multi:!0},i)}let l=o.providers;if(l!=null&&!a){let c=t;Ym(l,h=>{e(h,c)})}}else return!1;return i!==t&&t.providers!==void 0}function Ym(t,e){for(let n of t)Vm(n)&&(n=n.\u0275providers),Array.isArray(n)?Ym(n,e):e(n)}var MP=be({provide:String,useValue:be});function vw(t){return t!==null&&typeof t=="object"&&MP in t}function RP(t){return!!(t&&t.useExisting)}function NP(t){return!!(t&&t.useFactory)}function $i(t){return typeof t=="function"}function _w(t){return!!t.useClass}var el=new Q(""),Rc={},ow={},Im;function tl(){return Im===void 0&&(Im=new Wa),Im}var et=class{},Gi=class extends et{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,bm(e,s=>this.processProvider(s)),this.records.set(jm,Jo(void 0,this)),i.has("environment")&&this.records.set(et,Jo(void 0,this));let o=this.records.get(el);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Wm,Ot,{self:!0}))}retrieve(e,n){let r=Hi(n)||0;try{return this.get(e,Bi,r)}catch(i){if(Ko(i))return i;throw i}}destroy(){za(this),this._destroyed=!0;let e=te(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),te(e)}}onDestroy(e){return za(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){za(this);let n=qn(this),r=Ft(void 0),i;try{return e()}finally{qn(n),Ft(r)}}get(e,n=Bi,r){if(za(this),e.hasOwnProperty(iw))return e[iw](this);let i=Hi(r),o,s=qn(this),a=Ft(void 0);try{if(!(i&4)){let c=this.records.get(e);if(c===void 0){let h=OP(e)&&Ya(e);h&&this.injectableDefInScope(h)?c=Jo(Am(e),Rc):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c,i)}let l=i&2?tl():this.parent;return n=i&8&&n===Bi?null:n,l.get(e,n)}catch(l){let c=IP(l);throw c===-200||c===-201?new J(c,null):l}finally{Ft(a),qn(s)}}resolveInjectorInitializers(){let e=te(null),n=qn(this),r=Ft(void 0),i;try{let o=this.get(ji,Ot,{self:!0});for(let s of o)s()}finally{qn(n),Ft(r),te(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(gr(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=_t(e);let n=$i(e)?e:_t(e&&e.provide),r=PP(e);if(!$i(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Jo(void 0,Rc,!0),i.factory=()=>Sm(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=te(null);try{if(n.value===ow)throw Gm(gr(e));return n.value===Rc&&(n.value=ow,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&FP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{te(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=_t(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Am(t){let e=Ya(t),n=e!==null?e.factory:Jr(t);if(n!==null)return n;if(t instanceof Q)throw new J(204,!1);if(t instanceof Function)return xP(t);throw new J(204,!1)}function xP(t){if(t.length>0)throw new J(204,!1);let n=_P(t);return n!==null?()=>n.factory(t):()=>new t}function PP(t){if(vw(t))return Jo(void 0,t.useValue);{let e=Zm(t);return Jo(e,Rc)}}function Zm(t,e,n){let r;if($i(t)){let i=_t(t);return Jr(i)||Am(i)}else if(vw(t))r=()=>_t(t.useValue);else if(NP(t))r=()=>t.useFactory(...Sm(t.deps||[]));else if(RP(t))r=(i,o)=>ne(_t(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=_t(t&&(t.useClass||t.provide));if(kP(t))r=()=>new i(...Sm(t.deps));else return Jr(i)||Am(i)}return r}function za(t){if(t.destroyed)throw new J(205,!1)}function Jo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function kP(t){return!!t.deps}function FP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function OP(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function bm(t,e){for(let n of t)Array.isArray(n)?bm(n,e):n&&Vm(n)?bm(n.\u0275providers,e):e(n)}function Et(t,e){let n;t instanceof Gi?(za(t),n=t):n=new Dm(t);let r,i=qn(n),o=Ft(void 0);try{return e()}finally{qn(i),Ft(o)}}function Ew(){return fw()!==void 0||Mc()!=null}var Sn=0,ie=1,oe=2,ht=3,ln=4,un=5,Yo=6,Zo=7,Qe=8,vr=9,jn=10,ke=11,Xo=12,Xm=13,Wi=14,Jt=15,Ki=16,Ji=17,Qi=18,nl=19,eg=20,mr=21,Hc=22,rl=23,Qt=24,Yi=25,Zi=26,ut=27,Cw=1,tg=6,ei=7,il=8,ol=9,Ye=10;function Wn(t){return Array.isArray(t)&&typeof t[Cw]=="object"}function An(t){return Array.isArray(t)&&t[Cw]===!0}function ng(t){return(t.flags&4)!==0}function ti(t){return t.componentOffset>-1}function $c(t){return(t.flags&1)===1}function Kn(t){return!!t.template}function es(t){return(t[oe]&512)!==0}function Xi(t){return(t[oe]&256)===256}var rg="svg",Iw="math";function cn(t){for(;Array.isArray(t);)t=t[Sn];return t}function ig(t,e){return cn(e[t])}function bn(t,e){return cn(e[t.index])}function sl(t,e){return t.data[e]}function Tw(t,e){return t[e]}function og(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function dn(t,e){let n=e[t];return Wn(n)?n:n[Sn]}function Gc(t){return(t[oe]&128)===128}function ww(t){return An(t[ht])}function Jn(t,e){return e==null?null:t[e]}function sg(t){t[Ji]=0}function ag(t){t[oe]&1024||(t[oe]|=1024,Gc(t)&&ts(t))}function Dw(t,e){for(;t>0;)e=e[Wi],t--;return e}function al(t){return!!(t[oe]&9216||t[Qt]?.dirty)}function qc(t){t[jn].changeDetectionScheduler?.notify(8),t[oe]&64&&(t[oe]|=1024),al(t)&&ts(t)}function ts(t){t[jn].changeDetectionScheduler?.notify(0);let e=Qr(t);for(;e!==null&&!(e[oe]&8192||(e[oe]|=8192,!Gc(e)));)e=Qr(e)}function lg(t,e){if(Xi(t))throw new J(911,!1);t[mr]===null&&(t[mr]=[]),t[mr].push(e)}function Sw(t,e){if(t[mr]===null)return;let n=t[mr].indexOf(e);n!==-1&&t[mr].splice(n,1)}function Qr(t){let e=t[ht];return An(e)?e[ht]:e}function Aw(t){return t[Zo]??=[]}function bw(t){return t.cleanup??=[]}var fe={lFrame:$w(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Mm=!1;function Mw(){return fe.lFrame.elementDepthCount}function Rw(){fe.lFrame.elementDepthCount++}function ug(){fe.lFrame.elementDepthCount--}function Nw(){return fe.bindingsEnabled}function xw(){return fe.skipHydrationRootTNode!==null}function cg(t){return fe.skipHydrationRootTNode===t}function dg(){fe.skipHydrationRootTNode=null}function me(){return fe.lFrame.lView}function ct(){return fe.lFrame.tView}function zc(t){return fe.lFrame.contextLView=t,t[Qe]}function jc(t){return fe.lFrame.contextLView=null,t}function wt(){let t=fg();for(;t!==null&&t.type===64;)t=t.parent;return t}function fg(){return fe.lFrame.currentTNode}function Pw(){let t=fe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ns(t,e){let n=fe.lFrame;n.currentTNode=t,n.isParent=e}function hg(){return fe.lFrame.isParent}function kw(){fe.lFrame.isParent=!1}function pg(){return Mm}function mg(t){let e=Mm;return Mm=t,e}function Fw(){let t=fe.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function Ow(t){return fe.lFrame.bindingIndex=t}function ni(){return fe.lFrame.bindingIndex++}function gg(t){let e=fe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Lw(){return fe.lFrame.inI18n}function Vw(t,e){let n=fe.lFrame;n.bindingIndex=n.bindingRootIndex=t,Wc(e)}function Uw(){return fe.lFrame.currentDirectiveIndex}function Wc(t){fe.lFrame.currentDirectiveIndex=t}function Bw(t){let e=fe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function yg(t){fe.lFrame.currentQueryIndex=t}function LP(t){let e=t[ie];return e.type===2?e.declTNode:e.type===1?t[un]:null}function vg(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=LP(o),i===null||(o=o[Wi],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=fe.lFrame=Hw();return r.currentTNode=e,r.lView=t,!0}function Kc(t){let e=Hw(),n=t[ie];fe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Hw(){let t=fe.lFrame,e=t===null?null:t.child;return e===null?$w(t):e}function $w(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Gw(){let t=fe.lFrame;return fe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var _g=Gw;function Jc(){let t=Gw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function qw(t){return(fe.lFrame.contextLView=Dw(t,fe.lFrame.contextLView))[Qe]}function _r(){return fe.lFrame.selectedIndex}function ri(t){fe.lFrame.selectedIndex=t}function ll(){let t=fe.lFrame;return sl(t.tView,t.selectedIndex)}function eo(){fe.lFrame.currentNamespace=rg}function to(){VP()}function VP(){fe.lFrame.currentNamespace=null}function zw(){return fe.lFrame.currentNamespace}var jw=!0;function Qc(){return jw}function Yc(t){jw=t}function Rm(t,e=null,n=null,r){let i=Eg(t,e,n,r);return i.resolveInjectorInitializers(),i}function Eg(t,e=null,n=null,r,i=new Set){let o=[n||Ot,gw(t)];return r=r||(typeof t=="object"?void 0:gr(t)),new Gi(o,e||tl(),r||null,i)}var an=class t{static THROW_IF_NOT_FOUND=Bi;static NULL=new Wa;static create(e,n){if(Array.isArray(e))return Rm({name:""},n,e,"");{let r=e.name??"";return Rm({name:r},e.parent,e.providers,r)}}static \u0275prov=j({token:t,providedIn:"any",factory:()=>ne(jm)});static __NG_ELEMENT_ID__=-1},tt=new Q(""),Mn=(()=>{class t{static __NG_ELEMENT_ID__=UP;static __NG_ENV_ID__=n=>n}return t})(),Nm=class extends Mn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return Xi(this._lView)}onDestroy(e){let n=this._lView;return lg(n,e),()=>Sw(n,e)}};function UP(){return new Nm(me())}var Ww=!1,Er=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new vt(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new pe(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=j({token:t,providedIn:"root",factory:()=>new t})}return t})(),xm=class extends qe{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Ew()&&(this.destroyRef=k(Mn,{optional:!0})??void 0,this.pendingTasks=k(Er,{optional:!0})??void 0)}emit(e){let n=te(null);try{super.next(e)}finally{te(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof lt&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Je=xm;function Pc(...t){}function Cg(t){let e,n;function r(){t=Pc;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Ig(t){return queueMicrotask(()=>t()),()=>{t=Pc}}var Tg="isAngularZone",Ka=Tg+"_ID",BP=0,Lt=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Je(!1);onMicrotaskEmpty=new Je(!1);onStable=new Je(!1);onError=new Je(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Ww}=e;if(typeof Zone>"u")throw new J(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,GP(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Tg)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new J(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new J(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,HP,Pc,Pc);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},HP={};function wg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function $P(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Cg(()=>{t.callbackScheduled=!1,Pm(t),t.isCheckStableRunning=!0,wg(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Pm(t)}function GP(t){let e=()=>{$P(t)},n=BP++;t._inner=t._inner.fork({name:"angular",properties:{[Tg]:!0,[Ka]:n,[Ka+n]:!0},onInvokeTask:(r,i,o,s,a,l)=>{if(qP(l))return r.invokeTask(o,s,a,l);try{return sw(t),r.invokeTask(o,s,a,l)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),aw(t)}},onInvoke:(r,i,o,s,a,l,c)=>{try{return sw(t),r.invoke(o,s,a,l,c)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!zP(l)&&e(),aw(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Pm(t),wg(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Pm(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function sw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function aw(t){t._nesting--,wg(t)}var Ja=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Je;onMicrotaskEmpty=new Je;onStable=new Je;onError=new Je;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function qP(t){return Kw(t,"__ignore_ng_zone__")}function zP(t){return Kw(t,"__scheduler_tick__")}function Kw(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var zn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},zt=new Q("",{factory:()=>{let t=k(Lt),e=k(et),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(zn),n.handleError(r))})}}}),Jw={provide:ji,useValue:()=>{let t=k(zn,{optional:!0})},multi:!0},jP=new Q("",{factory:()=>{let t=k(tt).defaultView;if(!t)return;let e=k(zt),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),k(Mn).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function Dg(){return yr([mw(()=>void k(jP))])}function Yt(t,e){let[n,r,i]=im(t,e?.equal),o=n,s=o[xt];return o.set=r,o.update=i,o.asReadonly=Qw.bind(o),o}function Qw(){let t=this[xt];if(t.readonlyFn===void 0){let e=()=>this();e[xt]=t,t.readonlyFn=e}return t.readonlyFn}var Zc=(()=>{class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=WP}return t})();function WP(){return new Zc(me(),wt())}var Yr=class{},ul=new Q("",{factory:()=>!0});var Sg=new Q(""),Xc=(()=>{class t{internalPendingTasks=k(Er);scheduler=k(Yr);errorHandler=k(zt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=j({token:t,providedIn:"root",factory:()=>new t})}return t})(),Ag=(()=>{class t{static \u0275prov=j({token:t,providedIn:"root",factory:()=>new km})}return t})(),km=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},Fm=class{[xt];constructor(e){this[xt]=e}destroy(){this[xt].destroy()}};function nt(t){return om(t)}function yl(t){return{toString:t}.toString()}function XP(t){return typeof t=="function"}function TD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var sd=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},Cr=(()=>{let t=()=>wD;return t.ngInherit=!0,t})();function wD(t){return t.type.prototype.ngOnChanges&&(t.setInput=t1),e1}function e1(){let t=SD(this),e=t?.current;if(e){let n=t.previous;if(n===Zr)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function t1(t,e,n,r,i){let o=this.declaredInputs[r],s=SD(t)||n1(t,{previous:Zr,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new sd(c&&c.currentValue,n,l===Zr),TD(t,e,i,n)}var DD="__ngSimpleChanges__";function SD(t){return t[DD]||null}function n1(t,e){return t[DD]=e}var Yw=[];var Me=function(t,e=null,n){for(let r=0;r<Yw.length;r++){let i=Yw[r];i(t,e,n)}},Ie=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(Ie||{});function r1(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=wD(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function i1(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:h}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function nd(t,e,n){AD(t,e,3,n)}function rd(t,e,n,r){(t[oe]&3)===n&&AD(t,e,n,r)}function bg(t,e){let n=t[oe];(n&3)===e&&(n&=16383,n+=1,t[oe]=n)}function AD(t,e,n,r){let i=r!==void 0?t[Ji]&65535:0,o=r??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[Ji]+=65536),(a<o||o==-1)&&(o1(t,n,e,l),t[Ji]=(t[Ji]&4294901760)+l+2),l++}function Zw(t,e){Me(Ie.LifecycleHookStart,t,e);let n=te(null);try{e.call(t)}finally{te(n),Me(Ie.LifecycleHookEnd,t,e)}}function o1(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=t[s];i?t[oe]>>14<t[Ji]>>16&&(t[oe]&3)===e&&(t[oe]+=16384,Zw(a,o)):Zw(a,o)}var is=-1,ro=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function s1(t){return(t.flags&8)!==0}function a1(t){return(t.flags&16)!==0}function l1(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,o)}else{let o=i,s=n[++r];u1(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function bD(t){return t===3||t===4||t===6}function u1(t){return t.charCodeAt(0)===64}function os(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Xw(t,n,i,null,e[++r]):Xw(t,n,i,null,null))}}return t}function Xw(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function MD(t){return t!==is}function ad(t){return t&32767}function c1(t){return t>>16}function ld(t,e){let n=c1(t),r=e;for(;n>0;)r=r[Wi],n--;return r}var Vg=!0;function ud(t){let e=Vg;return Vg=t,e}var d1=256,RD=d1-1,ND=5,f1=0,Qn={};function h1(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(zi)&&(r=n[zi]),r==null&&(r=n[zi]=f1++);let i=r&RD,o=1<<i;e.data[t+(i>>ND)]|=o}function cd(t,e){let n=xD(t,e);if(n!==-1)return n;let r=e[ie];r.firstCreatePass&&(t.injectorIndex=e.length,Mg(r.data,t),Mg(e,null),Mg(r.blueprint,null));let i=ay(t,e),o=t.injectorIndex;if(MD(i)){let s=ad(i),a=ld(i,e),l=a[ie].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=i,o}function Mg(t,e){t.push(0,0,0,0,0,0,0,0,e)}function xD(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function ay(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=LD(i),r===null)return is;if(n++,i=i[Wi],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return is}function Ug(t,e,n){h1(t,e,n)}function p1(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(bD(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function PD(t,e,n){if(n&8||t!==void 0)return t;Lc(e,"NodeInjector")}function kD(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[vr],o=Ft(void 0);try{return i?i.get(e,r,n&8):qm(e,r,n&8)}finally{Ft(o)}}return PD(r,e,n)}function FD(t,e,n,r=0,i){if(t!==null){if(e[oe]&2048&&!(r&2)){let s=_1(t,e,n,r,Qn);if(s!==Qn)return s}let o=OD(t,e,n,r,Qn);if(o!==Qn)return o}return kD(e,n,r,i)}function OD(t,e,n,r,i){let o=y1(n);if(typeof o=="function"){if(!vg(e,t,r))return r&1?PD(i,n,r):kD(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Lc(n);else return s}finally{_g()}}else if(typeof o=="number"){let s=null,a=xD(t,e),l=is,c=r&1?e[Jt][un]:null;for((a===-1||r&4)&&(l=a===-1?ay(t,e):e[a+8],l===is||!tD(r,!1)?a=-1:(s=e[ie],a=ad(l),e=ld(l,e)));a!==-1;){let h=e[ie];if(eD(o,a,h.data)){let p=m1(a,e,n,s,r,c);if(p!==Qn)return p}l=e[a+8],l!==is&&tD(r,e[ie].data[a+8]===c)&&eD(o,a,e)?(s=h,a=ad(l),e=ld(l,e)):a=-1}}return i}function m1(t,e,n,r,i,o){let s=e[ie],a=s.data[t+8],l=r==null?ti(a)&&Vg:r!=s&&(a.type&3)!==0,c=i&1&&o===a,h=g1(a,s,n,l,c);return h!==null?dd(e,s,h,a,i):Qn}function g1(t,e,n,r,i){let o=t.providerIndexes,s=e.data,a=o&1048575,l=t.directiveStart,c=t.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:c;for(let v=p;v<m;v++){let I=s[v];if(v<l&&n===I||v>=l&&I.type===n)return v}if(i){let v=s[l];if(v&&Kn(v)&&v.type===n)return l}return null}function dd(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof ro){let a=o;if(a.resolving){let v=uw(s[n]);throw Gm(v)}let l=ud(a.canSeeViewProviders);a.resolving=!0;let c=s[n].type||s[n],h,p=a.injectImpl?Ft(a.injectImpl):null,m=vg(t,r,0);try{o=t[n]=a.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&r1(n,s[n],e)}finally{p!==null&&Ft(p),ud(l),a.resolving=!1,_g()}}return o}function y1(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(zi)?t[zi]:void 0;return typeof e=="number"?e>=0?e&RD:v1:e}function eD(t,e,n){let r=1<<t;return!!(n[e+(t>>ND)]&r)}function tD(t,e){return!(t&2)&&!(t&1&&e)}var no=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return FD(this._tNode,this._lView,e,Hi(r),n)}};function v1(){return new no(wt(),me())}function Ut(t){return yl(()=>{let e=t.prototype.constructor,n=e[ja]||Bg(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[ja]||Bg(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function Bg(t){return Om(t)?()=>{let e=Bg(_t(t));return e&&e()}:Jr(t)}function _1(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[oe]&2048&&!es(s);){let a=OD(o,s,n,r|2,Qn);if(a!==Qn)return a;let l=o.parent;if(!l){let c=s[eg];if(c){let h=c.get(n,Qn,r);if(h!==Qn)return h}l=LD(s),s=s[Wi]}o=l}return i}function LD(t){let e=t[ie],n=e.type;return n===2?e.declTNode:n===1?t[un]:null}function vl(t){return p1(wt(),t)}function E1(){return ly(wt(),me())}function ly(t,e){return new Zn(bn(t,e))}var Zn=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=E1}return t})();function VD(t){return(t.flags&128)===128}var uy=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(uy||{}),UD=new Map,C1=0;function I1(){return C1++}function T1(t){UD.set(t[nl],t)}function Hg(t){UD.delete(t[nl])}var nD="__ngContext__";function ss(t,e){Wn(e)?(t[nD]=e[nl],T1(e)):t[nD]=e}function BD(t){return $D(t[Xo])}function HD(t){return $D(t[ln])}function $D(t){for(;t!==null&&!An(t);)t=t[ln];return t}var w1;function cy(t){w1=t}var Dd=new Q("",{factory:()=>D1}),D1="ng";var Sd=new Q(""),_l=new Q("",{providedIn:"platform",factory:()=>"unknown"});var Ad=new Q("",{factory:()=>k(tt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var GD="r";var qD="di";var zD=!1,jD=new Q("",{factory:()=>zD});var S1=(t,e,n,r)=>{};function A1(t,e,n,r){S1(t,e,n,r)}function dy(t){return(t.flags&32)===32}var b1=()=>null;function WD(t,e,n=!1){return b1(t,e,n)}function KD(t,e){let n=t.contentQueries;if(n!==null){let r=te(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=t.data[s];yg(o),a.contentQueries(2,e[s],s)}}}finally{te(r)}}}function $g(t,e,n){yg(0);let r=te(null);try{e(t,n)}finally{te(r)}}function JD(t,e,n){if(ng(e)){let r=te(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=t.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{te(r)}}}var xn=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(xn||{});var ed;function M1(){if(ed===void 0&&(ed=null,Qa.trustedTypes))try{ed=Qa.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return ed}function rD(t){return M1()?.createScriptURL(t)||t}var fd=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${kc})`}};function El(t){return t instanceof fd?t.changingThisBreaksApplicationSecurity:t}function fy(t,e){let n=QD(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${kc})`)}return n===e}function QD(t){return t instanceof fd&&t.getTypeName()||null}var R1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function YD(t){return t=String(t),t.match(R1)?t:"unsafe:"+t}function N1(t,e){return t.createText(e)}function x1(t,e,n){t.setValue(e,n)}function ZD(t,e,n){return t.createElement(e,n)}function hd(t,e,n,r,i){t.insertBefore(e,n,r,i)}function XD(t,e,n){t.appendChild(e,n)}function iD(t,e,n,r,i){r!==null?hd(t,e,n,r,i):XD(t,e,n)}function eS(t,e,n,r){t.removeChild(null,e,n,r)}function P1(t,e,n){t.setAttribute(e,"style",n)}function k1(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function tS(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&l1(t,e,r),i!==null&&k1(t,e,i),o!==null&&P1(t,e,o)}var bd=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(bd||{});function us(t){let e=rS();return e?e.sanitize(bd.URL,t)||"":fy(t,"URL")?El(t):YD(Za(t))}function nS(t){let e=rS();if(e)return rD(e.sanitize(bd.RESOURCE_URL,t)||"");if(fy(t,"ResourceURL"))return rD(El(t));throw new J(904,!1)}function F1(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?nS:us}function hy(t,e,n){return F1(e,n)(t)}function rS(){let t=me();return t&&t[jn].sanitizer}function iS(t){return t instanceof Function?t():t}function O1(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var oS="ng-template";function L1(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&O1(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(py(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function py(t){return t.type===4&&t.value!==oS}function V1(t,e,n){let r=t.type===4&&!n?oS:t.value;return e===r}function U1(t,e,n){let r=4,i=t.attrs,o=i!==null?$1(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!Rn(r)&&!Rn(l))return!1;if(s&&Rn(l))continue;s=!1,r=l|r&1;continue}if(!s)if(r&4){if(r=2|r&1,l!==""&&!V1(t,l,n)||l===""&&e.length===1){if(Rn(r))return!1;s=!0}}else if(r&8){if(i===null||!L1(t,i,l,n)){if(Rn(r))return!1;s=!0}}else{let c=e[++a],h=B1(l,i,py(t),n);if(h===-1){if(Rn(r))return!1;s=!0;continue}if(c!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&c!==p){if(Rn(r))return!1;s=!0}}}}return Rn(r)||s}function Rn(t){return(t&1)===0}function B1(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return G1(e,t)}function H1(t,e,n=!1){for(let r=0;r<e.length;r++)if(U1(t,e[r],n))return!0;return!1}function $1(t){for(let e=0;e<t.length;e++){let n=t[e];if(bD(n))return e}return t.length}function G1(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function oD(t,e){return t?":not("+e.trim()+")":e}function q1(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let a=t[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Rn(s)&&(e+=oD(o,i),i=""),r=s,o=o||!Rn(r);n++}return i!==""&&(e+=oD(o,i)),e}function z1(t){return t.map(q1).join(",")}function j1(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!Rn(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var fn={};function my(t,e,n,r,i,o,s,a,l,c,h){let p=ut+r,m=p+i,v=W1(p,m),I=typeof c=="function"?c():c;return v[ie]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:I,incompleteFirstPass:!1,ssrId:h}}function W1(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:fn);return n}function K1(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=my(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function gy(t,e,n,r,i,o,s,a,l,c,h){let p=e.blueprint.slice();return p[Sn]=i,p[oe]=r|4|128|8|64|1024,(c!==null||t&&t[oe]&2048)&&(p[oe]|=2048),sg(p),p[ht]=p[Wi]=t,p[Qe]=n,p[jn]=s||t&&t[jn],p[ke]=a||t&&t[ke],p[vr]=l||t&&t[vr]||null,p[un]=o,p[nl]=I1(),p[Yo]=h,p[eg]=c,p[Jt]=e.type==2?t[Jt]:p,p}function J1(t,e,n){let r=bn(e,t),i=K1(n),o=t[jn].rendererFactory,s=yy(t,gy(t,i,null,sS(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function sS(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function aS(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function yy(t,e){return t[Xo]?t[Xm][ln]=e:t[Xo]=e,t[Xm]=e,e}function z(t=1){lS(ct(),me(),_r()+t,!1)}function lS(t,e,n,r){if(!r)if((e[oe]&3)===3){let o=t.preOrderCheckHooks;o!==null&&nd(e,o,n)}else{let o=t.preOrderHooks;o!==null&&rd(e,o,0,n)}ri(n)}var Md=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Md||{});function Gg(t,e,n,r){let i=te(null);try{let[o,s,a]=t.inputs[n],l=null;(s&Md.SignalBased)!==0&&(l=e[o][xt]),l!==null&&l.transformFn!==void 0?r=l.transformFn(r):a!==null&&(r=a.call(e,r)),t.setInput!==null?t.setInput(e,l,r,n,o):TD(e,l,o,r)}finally{te(i)}}var Yn=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Yn||{}),Q1;function vy(t,e){return Q1(t,e)}var io=new Set,Rd=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Rd||{}),Ir=new Q(""),sD=new Set;function ii(t){sD.has(t)||(sD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var _y=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=j({token:t,providedIn:"root",factory:()=>new t})}return t})(),uS=[0,1,2,3],cS=(()=>{class t{ngZone=k(Lt);scheduler=k(Yr);errorHandler=k(zn,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){k(Ir,{optional:!0})}execute(){let n=this.sequences.size>0;n&&Me(Ie.AfterRenderHooksStart),this.executing=!0;for(let r of uS)for(let i of this.sequences)if(!(i.erroredOrDestroyed||!i.hooks[r]))try{i.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>{let o=i.hooks[r];return o(i.pipelinedValue)},i.snapshot))}catch(o){i.erroredOrDestroyed=!0,this.errorHandler?.handleError(o)}this.executing=!1;for(let r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(let r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&Me(Ie.AfterRenderHooksEnd)}register(n){let{view:r}=n;r!==void 0?((r[Yi]??=[]).push(n),ts(r),r[oe]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Rd.AFTER_NEXT_RENDER,n):n()}static \u0275prov=j({token:t,providedIn:"root",factory:()=>new t})}return t})(),pd=class{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,i,o,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=i,this.snapshot=s,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();let e=this.view?.[Yi];e&&(this.view[Yi]=e.filter(n=>n!==this))}};function Nd(t,e){let n=e?.injector??k(an);return ii("NgAfterNextRender"),Z1(t,n,e,!0)}function Y1(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}function Z1(t,e,n,r){let i=e.get(_y);i.impl??=e.get(cS);let o=e.get(Ir,null,{optional:!0}),s=n?.manualCleanup!==!0?e.get(Mn):null,a=e.get(Zc,null,{optional:!0}),l=new pd(i.impl,Y1(t),a?.view,r,s,o?.snapshot(null));return i.impl.register(l),l}var dS=new Q("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function fS(t,e,n){let r=t.get(dS);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function X1(t,e){let n=t.get(dS);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function ek(t,e){for(let[n,r]of e)fS(t,r.animateFns)}function aD(t,e,n,r){let i=t?.[Zi]?.enter;e!==null&&i&&i.has(n.index)&&ek(r,i)}function rs(t,e,n,r,i,o,s,a){if(i!=null){let l,c=!1;An(i)?l=i:Wn(i)&&(c=!0,i=i[Sn]);let h=cn(i);t===0&&r!==null?(aD(a,r,o,n),s==null?XD(e,r,h):hd(e,r,h,s||null,!0)):t===1&&r!==null?(aD(a,r,o,n),hd(e,r,h,s||null,!0)):t===2?lD(a,o,n,p=>{eS(e,h,c,p)}):t===3&&lD(a,o,n,()=>{e.destroyNode(h)}),l!=null&&hk(e,t,n,l,o,r,s)}}function tk(t,e){hS(t,e),e[Sn]=null,e[un]=null}function nk(t,e,n,r,i,o){r[Sn]=i,r[un]=e,Pd(t,r,n,1,i,o)}function hS(t,e){e[jn].changeDetectionScheduler?.notify(9),Pd(t,e,e[ke],2,null,null)}function rk(t){let e=t[Xo];if(!e)return Rg(t[ie],t);for(;e;){let n=null;if(Wn(e))n=e[Xo];else{let r=e[Ye];r&&(n=r)}if(!n){for(;e&&!e[ln]&&e!==t;)Wn(e)&&Rg(e[ie],e),e=e[ht];e===null&&(e=t),Wn(e)&&Rg(e[ie],e),n=e&&e[ln]}e=n}}function Ey(t,e){let n=t[ol],r=n.indexOf(e);n.splice(r,1)}function xd(t,e){if(Xi(e))return;let n=e[ke];n.destroyNode&&Pd(t,e,n,3,null,null),rk(e)}function Rg(t,e){if(Xi(e))return;let n=te(null);try{e[oe]&=-129,e[oe]|=256,e[Qt]&&La(e[Qt]),sk(t,e),ok(t,e),e[ie].type===1&&e[ke].destroy();let r=e[Ki];if(r!==null&&An(e[ht])){r!==e[ht]&&Ey(r,e);let i=e[Qi];i!==null&&i.detachView(t)}Hg(e)}finally{te(n)}}function lD(t,e,n,r){let i=t?.[Zi];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&io.add(t),fS(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),a=[];if(s){for(let l=0;l<s.animateFns.length;l++){let c=s.animateFns[l],{promise:h}=c();a.push(h)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),ik(t,r)}else t&&io.delete(t),r(!1)},i)}function ik(t,e){let n=t[Zi]?.running;if(n){n.then(()=>{t[Zi].running=void 0,io.delete(t),e(!0)});return}e(!1)}function ok(t,e){let n=t.cleanup,r=e[Zo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(e[Zo]=null);let i=e[mr];if(i!==null){e[mr]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=e[rl];if(o!==null){e[rl]=null;for(let s of o)s.destroy()}}function sk(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ro)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],l=o[s+1];Me(Ie.LifecycleHookStart,a,l);try{l.call(a)}finally{Me(Ie.LifecycleHookEnd,a,l)}}else{Me(Ie.LifecycleHookStart,i,o);try{o.call(i)}finally{Me(Ie.LifecycleHookEnd,i,o)}}}}}function ak(t,e,n){return lk(t,e.parent,n)}function lk(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[Sn];if(ti(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===xn.None||i===xn.Emulated)return null}return bn(r,n)}function uk(t,e,n){return dk(t,e,n)}function ck(t,e,n){return t.type&40?bn(t,n):null}var dk=ck,uD;function Cy(t,e,n,r){let i=ak(t,r,e),o=e[ke],s=r.parent||e[un],a=uk(s,r,e);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)iD(o,i,n[l],a,!1);else iD(o,i,n,a,!1);uD!==void 0&&uD(o,r,e,n,i)}function cl(t,e){if(e!==null){let n=e.type;if(n&3)return bn(e,t);if(n&4)return qg(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return cl(t,r);{let i=t[e.index];return An(i)?qg(-1,i):cn(i)}}else{if(n&128)return cl(t,e.next);if(n&32)return vy(e,t)()||cn(t[e.index]);{let r=pS(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Qr(t[Jt]);return cl(i,r)}else return cl(t,e.next)}}}return null}function pS(t,e){if(e!==null){let r=t[Jt][un],i=e.projection;return r.projection[i]}return null}function qg(t,e){let n=Ye+t+1;if(n<e.length){let r=e[n],i=r[ie].firstChild;if(i!==null)return cl(r,i)}return e[ei]}function Iy(t,e,n,r,i,o,s){for(;n!=null;){let a=r[vr];if(n.type===128){n=n.next;continue}let l=r[n.index],c=n.type;if(s&&e===0&&(l&&ss(cn(l),r),n.flags|=2),!dy(n))if(c&8)Iy(t,e,n.child,r,i,o,!1),rs(e,t,a,i,l,n,o,r);else if(c&32){let h=vy(n,r),p;for(;p=h();)rs(e,t,a,i,p,n,o,r);rs(e,t,a,i,l,n,o,r)}else c&16?fk(t,e,r,n,i,o):rs(e,t,a,i,l,n,o,r);n=s?n.projectionNext:n.next}}function Pd(t,e,n,r,i,o){Iy(n,r,t.firstChild,e,i,o,!1)}function fk(t,e,n,r,i,o){let s=n[Jt],l=s[un].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let h=l[c];rs(e,t,n[vr],i,h,r,o,n)}else{let c=l,h=s[ht];VD(r)&&(c.flags|=128),Iy(t,e,c,h,i,o,!0)}}function hk(t,e,n,r,i,o,s){let a=r[ei],l=cn(r);a!==l&&rs(e,t,n,o,a,i,s);for(let c=Ye;c<r.length;c++){let h=r[c];Pd(h[ie],h,t,e,o,a)}}function pk(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Yn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Yn.Important),t.setStyle(n,r,i,o))}}function mS(t,e,n,r,i){let o=_r(),s=r&2;try{ri(-1),s&&e.length>ut&&lS(t,e,ut,!1);let a=s?Ie.TemplateUpdateStart:Ie.TemplateCreateStart;Me(a,i,n),n(r,i)}finally{ri(o);let a=s?Ie.TemplateUpdateEnd:Ie.TemplateCreateEnd;Me(a,i,n)}}function gS(t,e,n){Ek(t,e,n),(n.flags&64)===64&&Ck(t,e,n)}function Ty(t,e,n=bn){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(e,t):t[s];t[i++]=a}}}function mk(t,e,n,r){let o=r.get(jD,zD)||n===xn.ShadowDom||n===xn.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,o);return gk(s),s}function gk(t){yk(t)}var yk=()=>null;function vk(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function yS(t,e,n,r,i,o){let s=e[ie];if(wy(t,s,e,n,r)){ti(t)&&_k(e,t.index);return}t.type&3&&(n=vk(n)),vS(t,e,n,r,i,o)}function vS(t,e,n,r,i,o){if(t.type&3){let s=bn(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function _k(t,e){let n=dn(e,t);n[oe]&16||(n[oe]|=64)}function Ek(t,e,n){let r=n.directiveStart,i=n.directiveEnd;ti(n)&&J1(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||cd(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let a=t.data[s],l=dd(e,t,s,n);if(ss(l,e),o!==null&&Sk(e,s-r,l,a,n,o),Kn(a)){let c=dn(n.index,e);c[Qe]=dd(e,t,s,n)}}}function Ck(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Uw();try{ri(o);for(let a=r;a<i;a++){let l=t.data[a],c=e[a];Wc(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&Ik(l,c)}}finally{ri(-1),Wc(s)}}function Ik(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Tk(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];H1(e,o.selectors,!1)&&(r??=[],Kn(o)?r.unshift(o):r.push(o))}return r}function wk(t,e,n,r,i,o){let s=bn(t,e);Dk(e[ke],s,o,t.value,n,r,i)}function Dk(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let a=s==null?Za(o):s(o,r||"",i);t.setAttribute(e,i,a,n)}}function Sk(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],c=s[a+1];Gg(r,n,l,c)}}function _S(t,e,n,r,i){let o=ut+n,s=e[ie],a=i(s,e,t,r,n);e[o]=a,ns(t,!0);let l=t.type===2;return l?(tS(e[ke],a,t),(Mw()===0||$c(t))&&ss(a,e),Rw()):ss(a,e),Qc()&&(!l||!dy(t))&&Cy(s,e,a,t),t}function ES(t){let e=t;return hg()?kw():(e=e.parent,ns(e,!1)),e}function Ak(t,e){let n=t[vr];if(!n)return;let r;try{r=n.get(zt,null)}catch{r=null}r?.(e)}function wy(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],a=!1;if(s)for(let l=0;l<s.length;l+=2){let c=s[l],h=s[l+1],p=e.data[c];Gg(p,n[c],h,i),a=!0}if(o)for(let l of o){let c=n[l],h=e.data[l];Gg(h,c,r,i),a=!0}return a}function bk(t,e){let n=dn(e,t),r=n[ie];Mk(r,n);let i=n[Sn];i!==null&&n[Yo]===null&&(n[Yo]=WD(i,n[vr])),Me(Ie.ComponentStart);try{Dy(r,n,n[Qe])}finally{Me(Ie.ComponentEnd,n[Qe])}}function Mk(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Dy(t,e,n){Kc(e);try{let r=t.viewQuery;r!==null&&$g(1,r,n);let i=t.template;i!==null&&mS(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Qi]?.finishViewCreation(t),t.staticContentQueries&&KD(t,e),t.staticViewQueries&&$g(2,t.viewQuery,n);let o=t.components;o!==null&&Rk(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[oe]&=-5,Jc()}}function Rk(t,e){for(let n=0;n<e.length;n++)bk(t,e[n])}function Sy(t,e,n,r){let i=te(null);try{let o=e.tView,a=t[oe]&4096?4096:16,l=gy(t,o,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),c=t[e.index];l[Ki]=c;let h=t[Qi];return h!==null&&(l[Qi]=h.createEmbeddedView(o)),Dy(o,l,n),l}finally{te(i)}}function fl(t,e){return!e||e.firstChild===null||VD(t)}function hl(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(cn(o)),An(o)&&CS(o,r);let s=n.type;if(s&8)hl(t,e,n.child,r);else if(s&32){let a=vy(n,e),l;for(;l=a();)r.push(l)}else if(s&16){let a=pS(e,n);if(Array.isArray(a))r.push(...a);else{let l=Qr(e[Jt]);hl(l[ie],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function CS(t,e){for(let n=Ye;n<t.length;n++){let r=t[n],i=r[ie].firstChild;i!==null&&hl(r[ie],r,i,e)}t[ei]!==t[Sn]&&e.push(t[ei])}function IS(t){if(t[Yi]!==null){for(let e of t[Yi])e.impl.addSequence(e);t[Yi].length=0}}var TS=[];function Nk(t){return t[Qt]??xk(t)}function xk(t){let e=TS.pop()??Object.create(kk);return e.lView=t,e}function Pk(t){t.lView[Qt]!==t&&(t.lView=null,TS.push(t))}var kk=he(H({},ka),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{ts(t.lView)},consumerOnSignalRead(){this.lView[Qt]=this}});function Fk(t){let e=t[Qt]??Object.create(Ok);return e.lView=t,e}var Ok=he(H({},ka),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Qr(t.lView);for(;e&&!wS(e[ie]);)e=Qr(e);e&&ag(e)},consumerOnSignalRead(){this.lView[Qt]=this}});function wS(t){return t.type!==2}function DS(t){if(t[rl]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[rl])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[oe]&8192)}}var Lk=100;function SS(t,e=0){let r=t[jn].rendererFactory,i=!1;i||r.begin?.();try{Vk(t,e)}finally{i||r.end?.()}}function Vk(t,e){let n=pg();try{mg(!0),zg(t,e);let r=0;for(;al(t);){if(r===Lk)throw new J(103,!1);r++,zg(t,1)}}finally{mg(n)}}function Uk(t,e,n,r){if(Xi(e))return;let i=e[oe],o=!1,s=!1;Kc(e);let a=!0,l=null,c=null;o||(wS(t)?(c=Nk(e),l=Oa(c)):Qu()===null?(a=!1,c=Fk(e),l=Oa(c)):e[Qt]&&(La(e[Qt]),e[Qt]=null));try{sg(e),Ow(t.bindingStartIndex),n!==null&&mS(t,e,n,2,r);let h=(i&3)===3;if(!o)if(h){let v=t.preOrderCheckHooks;v!==null&&nd(e,v,null)}else{let v=t.preOrderHooks;v!==null&&rd(e,v,0,null),bg(e,0)}if(s||Bk(e),DS(e),AS(e,0),t.contentQueries!==null&&KD(t,e),!o)if(h){let v=t.contentCheckHooks;v!==null&&nd(e,v)}else{let v=t.contentHooks;v!==null&&rd(e,v,1),bg(e,1)}$k(t,e);let p=t.components;p!==null&&MS(e,p,0);let m=t.viewQuery;if(m!==null&&$g(2,m,r),!o)if(h){let v=t.viewCheckHooks;v!==null&&nd(e,v)}else{let v=t.viewHooks;v!==null&&rd(e,v,2),bg(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Hc]){for(let v of e[Hc])v();e[Hc]=null}o||(IS(e),e[oe]&=-73)}catch(h){throw o||ts(e),h}finally{c!==null&&(Yu(c,l),a&&Pk(c)),Jc()}}function AS(t,e){for(let n=BD(t);n!==null;n=HD(n))for(let r=Ye;r<n.length;r++){let i=n[r];bS(i,e)}}function Bk(t){for(let e=BD(t);e!==null;e=HD(e)){if(!(e[oe]&2))continue;let n=e[ol];for(let r=0;r<n.length;r++){let i=n[r];ag(i)}}}function Hk(t,e,n){Me(Ie.ComponentStart);let r=dn(e,t);try{bS(r,n)}finally{Me(Ie.ComponentEnd,r[Qe])}}function bS(t,e){Gc(t)&&zg(t,e)}function zg(t,e){let r=t[ie],i=t[oe],o=t[Qt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&Zu(o)),s||=!1,o&&(o.dirty=!1),t[oe]&=-9217,s)Uk(r,t,r.template,t[Qe]);else if(i&8192){let a=te(null);try{DS(t),AS(t,1);let l=r.components;l!==null&&MS(t,l,1),IS(t)}finally{te(a)}}}function MS(t,e,n){for(let r=0;r<e.length;r++)Hk(t,e[r],n)}function $k(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)ri(~i);else{let o=i,s=n[++r],a=n[++r];Vw(s,o);let l=e[o];Me(Ie.HostBindingsUpdateStart,l);try{a(2,l)}finally{Me(Ie.HostBindingsUpdateEnd,l)}}}}finally{ri(-1)}}function Ay(t,e){let n=pg()?64:1088;for(t[jn].changeDetectionScheduler?.notify(e);t;){t[oe]|=n;let r=Qr(t);if(es(t)&&!r)return t;t=r}return null}function RS(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function NS(t,e){let n=Ye+e;if(n<t.length)return t[n]}function kd(t,e,n,r=!0){let i=e[ie];if(Gk(i,e,t,n),r){let s=qg(n,t),a=e[ke],l=a.parentNode(t[ei]);l!==null&&nk(i,t[un],a,e,l,s)}let o=e[Yo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function xS(t,e){let n=pl(t,e);return n!==void 0&&xd(n[ie],n),n}function pl(t,e){if(t.length<=Ye)return;let n=Ye+e,r=t[n];if(r){let i=r[Ki];i!==null&&i!==t&&Ey(i,r),e>0&&(t[n-1][ln]=r[ln]);let o=Xa(t,Ye+e);tk(r[ie],r);let s=o[Qi];s!==null&&s.detachView(o[ie]),r[ht]=null,r[ln]=null,r[oe]&=-129}return r}function Gk(t,e,n,r){let i=Ye+r,o=n.length;r>0&&(n[i-1][ln]=e),r<o-Ye?(e[ln]=n[i],zm(n,Ye+r,e)):(n.push(e),e[ln]=null),e[ht]=n;let s=e[Ki];s!==null&&n!==s&&PS(s,e);let a=e[Qi];a!==null&&a.insertView(t),qc(e),e[oe]|=128}function PS(t,e){let n=t[ol],r=e[ht];if(Wn(r))t[oe]|=2;else{let i=r[ht][Jt];e[Jt]!==i&&(t[oe]|=2)}n===null?t[ol]=[e]:n.push(e)}var oo=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[ie];return hl(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Qe]}set context(e){this._lView[Qe]=e}get destroyed(){return Xi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[ht];if(An(e)){let n=e[il],r=n?n.indexOf(this):-1;r>-1&&(pl(e,r),Xa(n,r))}this._attachedToViewContainer=!1}xd(this._lView[ie],this._lView)}onDestroy(e){lg(this._lView,e)}markForCheck(){Ay(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[oe]&=-129}reattach(){qc(this._lView),this._lView[oe]|=128}detectChanges(){this._lView[oe]|=1024,SS(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new J(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=es(this._lView),n=this._lView[Ki];n!==null&&!e&&Ey(n,this._lView),hS(this._lView[ie],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new J(902,!1);this._appRef=e;let n=es(this._lView),r=this._lView[Ki];r!==null&&!n&&PS(r,this._lView),qc(this._lView)}};function Fd(t,e,n,r,i){let o=t.data[e];if(o===null)o=qk(t,e,n,r,i),Lw()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Pw();o.injectorIndex=s===null?-1:s.injectorIndex}return ns(o,!0),o}function qk(t,e,n,r,i){let o=fg(),s=hg(),a=s?o:o&&o.parent,l=t.data[e]=jk(t,a,n,e,r,i);return zk(t,l,o,s),l}function zk(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function jk(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,a=0;return xw()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Wk(t){let e=t[tg]??[],r=t[ht][ke],i=[];for(let o of e)o.data[qD]!==void 0?i.push(o):Kk(o,r);t[tg]=i}function Kk(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[GD];for(;n<i;){let o=r.nextSibling;eS(e,r,!1),r=o,n++}}}var Jk=()=>null,Qk=()=>null;function jg(t,e){return Jk(t,e)}function kS(t,e,n){return Qk(t,e,n)}var FS=class{},Od=class{},Wg=class{resolveComponentFactory(e){throw new J(917,!1)}},Cl=class{static NULL=new Wg},so=class{},Tr=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>Yk()}return t})();function Yk(){let t=me(),e=wt(),n=dn(e.index,t);return(Wn(n)?n:t)[ke]}var OS=(()=>{class t{static \u0275prov=j({token:t,providedIn:"root",factory:()=>null})}return t})();var id={},Kg=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,id,r);return i!==id||n===id?i:this.parentInjector.get(e,n,r)}};function md(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=Fc(i,a);else if(o==2){let l=a,c=e[++s];r=Fc(r,l+": "+c+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function we(t,e=0){let n=me();if(n===null)return ne(t,e);let r=wt();return FD(r,n,_t(t),e)}function Zk(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let a=s,l=null,c=null;for(let h of s)if(h.resolveHostDirectives!==null){[a,l,c]=h.resolveHostDirectives(s);break}tF(t,e,n,a,o,l,c)}o!==null&&r!==null&&Xk(n,r,o)}function Xk(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new J(-301,!1);r.push(e[i],o)}}function eF(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function tF(t,e,n,r,i,o,s){let a=r.length,l=!1;for(let m=0;m<a;m++){let v=r[m];!l&&Kn(v)&&(l=!0,eF(t,n,m)),Ug(cd(n,e),t,v.type)}aF(n,t.data.length,a);for(let m=0;m<a;m++){let v=r[m];v.providersResolver&&v.providersResolver(v)}let c=!1,h=!1,p=aS(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let m=0;m<a;m++){let v=r[m];if(n.mergedAttrs=os(n.mergedAttrs,v.hostAttrs),rF(t,n,e,p,v),sF(p,v,i),s!==null&&s.has(v)){let[b,A]=s.get(v);n.directiveToIndex.set(v.type,[p,b+n.directiveStart,A+n.directiveStart])}else(o===null||!o.has(v))&&n.directiveToIndex.set(v.type,p);v.contentQueries!==null&&(n.flags|=4),(v.hostBindings!==null||v.hostAttrs!==null||v.hostVars!==0)&&(n.flags|=64);let I=v.type.prototype;!c&&(I.ngOnChanges||I.ngOnInit||I.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),c=!0),!h&&(I.ngOnChanges||I.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),h=!0),p++}nF(t,n,o)}function nF(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))cD(0,e,i,r),cD(1,e,i,r),fD(e,r,!1);else{let o=n.get(i);dD(0,e,o,r),dD(1,e,o,r),fD(e,r,!0)}}}function cD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),LS(e,o)}}function dD(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;t===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),LS(e,s)}}function LS(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function fD(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||py(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let l=r[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!n&&i.hasOwnProperty(l)){let c=i[l];for(let h of c)if(h===e){s??=[],s.push(l,r[a+1]);break}}else if(n&&o.hasOwnProperty(l)){let c=o[l];for(let h=0;h<c.length;h+=2)if(c[h]===e){s??=[],s.push(c[h+1],r[a+1]);break}}a+=2}t.initialInputs??=[],t.initialInputs.push(s)}function rF(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=Jr(i.type,!0)),s=new ro(o,Kn(i),we,null);t.blueprint[r]=s,n[r]=s,iF(t,e,r,aS(t,n,i.hostVars,fn),i)}function iF(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;oF(s)!=a&&s.push(a),s.push(n,r,o)}}function oF(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function sF(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Kn(e)&&(n[""]=t)}}function aF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function VS(t,e,n,r,i,o,s,a){let l=e[ie],c=l.consts,h=Jn(c,s),p=Fd(l,t,n,r,h);return o&&Zk(l,e,p,Jn(c,a),i),p.mergedAttrs=os(p.mergedAttrs,p.attrs),p.attrs!==null&&md(p,p.attrs,!1),p.mergedAttrs!==null&&md(p,p.mergedAttrs,!0),l.queries!==null&&l.queries.elementStart(l,p),p}function US(t,e){i1(t,e),ng(e)&&t.queries.elementEnd(e)}function lF(t,e,n,r,i,o){let s=e.consts,a=Jn(s,i),l=Fd(e,t,n,r,a);if(l.mergedAttrs=os(l.mergedAttrs,l.attrs),o!=null){let c=Jn(s,o);l.localNames=[];for(let h=0;h<c.length;h+=2)l.localNames.push(c[h],-1)}return l.attrs!==null&&md(l,l.attrs,!1),l.mergedAttrs!==null&&md(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function uF(t,e,n){return t[e]=n}function Xn(t,e,n){if(n===fn)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function od(t,e,n){return function r(i){let o=ti(t)?dn(t.index,e):e;Ay(o,5);let s=e[Qe],a=hD(e,s,n,i),l=r.__ngNextListenerFn__;for(;l;)a=hD(e,s,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function hD(t,e,n,r){let i=te(null);try{return Me(Ie.OutputStart,e,n),n(r)!==!1}catch(o){return Ak(t,o),!1}finally{Me(Ie.OutputEnd,e,n),te(i)}}function BS(t,e,n,r,i,o,s,a){let l=$c(t),c=!1,h=null;if(!r&&l&&(h=dF(e,n,o,t.index)),h!==null){let p=h.__ngLastListenerFn__||h;p.__ngNextListenerFn__=s,h.__ngLastListenerFn__=s,c=!0}else{let p=bn(t,n),m=r?r(p):p;A1(n,m,o,a);let v=i.listen(m,o,a);if(!cF(o)){let I=r?b=>r(cn(b[t.index])):t.index;HS(I,e,n,o,a,v,!1)}}return c}function cF(t){return t.startsWith("animation")||t.startsWith("transition")}function dF(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=e[Zo],l=i[o+2];return a&&a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function HS(t,e,n,r,i,o,s){let a=e.firstCreatePass?bw(e):null,l=Aw(n),c=l.length;l.push(i,o),a&&a.push(r,t,c,(c+1)*(s?-1:1))}function pD(t,e,n,r,i,o){let s=e[n],a=e[ie],c=a.data[n].outputs[r],p=s[c].subscribe(o);HS(t.index,a,e,i,o,p,!0)}var Jg=Symbol("BINDING");var gd=class extends Cl{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Xr(e);return new as(n,this.ngModule)}};function fF(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Md.SignalBased)!==0};return i&&(o.transform=i),o})}function hF(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function pF(t,e,n){let r=e instanceof et?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Kg(n,r):n}function mF(t){let e=t.get(so,null);if(e===null)throw new J(407,!1);let n=t.get(OS,null),r=t.get(Yr,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function gF(t,e){let n=$S(t);return ZD(e,n,n==="svg"?rg:n==="math"?Iw:null)}function $S(t){return(t.selectors[0][0]||"div").toLowerCase()}var as=class extends Od{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=fF(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=hF(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=z1(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){Me(Ie.DynamicComponentStart);let a=te(null);try{let l=this.componentDef,c=yF(r,l,s,o),h=pF(l,i||this.ngModule,e),p=mF(h),m=p.rendererFactory.createRenderer(null,l),v=r?mk(m,r,l.encapsulation,h):gF(l,m),I=s?.some(mD)||o?.some(N=>typeof N!="function"&&N.bindings.some(mD)),b=gy(null,c,null,512|sS(l),null,null,p,m,h,null,WD(v,h,!0));b[ut]=v,Kc(b);let A=null;try{let N=VS(ut,b,2,"#host",()=>c.directiveRegistry,!0,0);tS(m,v,N),ss(v,b),gS(c,b,N),JD(c,N,b),US(c,N),n!==void 0&&_F(N,this.ngContentSelectors,n),A=dn(N.index,b),b[Qe]=A[Qe],Dy(c,b,null)}catch(N){throw A!==null&&Hg(A),Hg(b),N}finally{Me(Ie.DynamicComponentEnd),Jc()}return new yd(this.componentType,b,!!I)}finally{te(a)}}};function yF(t,e,n,r){let i=t?["ng-version","21.0.2"]:j1(e.selectors[0]),o=null,s=null,a=0;if(n)for(let h of n)a+=h[Jg].requiredVars,h.create&&(h.targetIdx=0,(o??=[]).push(h)),h.update&&(h.targetIdx=0,(s??=[]).push(h));if(r)for(let h=0;h<r.length;h++){let p=r[h];if(typeof p!="function")for(let m of p.bindings){a+=m[Jg].requiredVars;let v=h+1;m.create&&(m.targetIdx=v,(o??=[]).push(m)),m.update&&(m.targetIdx=v,(s??=[]).push(m))}}let l=[e];if(r)for(let h of r){let p=typeof h=="function"?h:h.type,m=Jm(p);l.push(m)}return my(0,null,vF(o,s),1,a,l,null,null,null,[i],null)}function vF(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function mD(t){let e=t[Jg].kind;return e==="input"||e==="twoWay"}var yd=class extends FS{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=sl(n[ie],ut),this.location=ly(this._tNode,n),this.instance=dn(this._tNode.index,n)[Qe],this.hostView=this.changeDetectorRef=new oo(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=wy(r,i[ie],i,e,n);this.previousInputValues.set(e,n);let s=dn(r.index,i);Ay(s,1)}get injector(){return new no(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function _F(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Il=(()=>{class t{static __NG_ELEMENT_ID__=EF}return t})();function EF(){let t=wt();return IF(t,me())}var CF=Il,GS=class extends CF{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return ly(this._hostTNode,this._hostLView)}get injector(){return new no(this._hostTNode,this._hostLView)}get parentInjector(){let e=ay(this._hostTNode,this._hostLView);if(MD(e)){let n=ld(e,this._hostLView),r=ad(e),i=n[ie].data[r+8];return new no(i,n)}else return new no(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=gD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Ye}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=jg(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,fl(this._hostTNode,s)),a}createComponent(e,n,r,i,o,s,a){let l=e&&!XP(e),c;if(l)c=n;else{let A=n||{};c=A.index,r=A.injector,i=A.projectableNodes,o=A.environmentInjector||A.ngModuleRef,s=A.directives,a=A.bindings}let h=l?e:new as(Xr(e)),p=r||this.parentInjector;if(!o&&h.ngModule==null){let N=(l?p:this.parentInjector).get(et,null);N&&(o=N)}let m=Xr(h.componentType??{}),v=jg(this._lContainer,m?.id??null),I=v?.firstChild??null,b=h.create(p,i,I,o,s,a);return this.insertImpl(b.hostView,c,fl(this._hostTNode,v)),b}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(ww(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[ht],c=new GS(l,l[un],l[ht]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return kd(s,i,o,r),e.attachToViewContainerRef(),zm(Ng(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=gD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=pl(this._lContainer,n);r&&(Xa(Ng(this._lContainer),n),xd(r[ie],r))}detach(e){let n=this._adjustIndex(e,-1),r=pl(this._lContainer,n);return r&&Xa(Ng(this._lContainer),n)!=null?new oo(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function gD(t){return t[il]}function Ng(t){return t[il]||(t[il]=[])}function IF(t,e){let n,r=e[t.index];return An(r)?n=r:(n=RS(r,e,null,t),e[t.index]=n,yy(e,n)),wF(n,e,t,r),new GS(n,t,e)}function TF(t,e){let n=t[ke],r=n.createComment(""),i=bn(e,t),o=n.parentNode(i);return hd(n,o,r,n.nextSibling(i),!1),r}var wF=AF,DF=()=>!1;function SF(t,e,n){return DF(t,e,n)}function AF(t,e,n,r){if(t[ei])return;let i;n.type&8?i=cn(r):i=TF(e,n),t[ei]=i}var ao=class{},Ld=class{};var vd=class extends ao{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new gd(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=Km(e);this._bootstrapComponents=iS(o.bootstrap),this._r3Injector=Eg(e,n,[{provide:ao,useValue:this},{provide:Cl,useValue:this.componentFactoryResolver},...r],gr(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},_d=class extends Ld{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new vd(this.moduleType,e,[])}};var ml=class extends ao{injector;componentFactoryResolver=new gd(this);instance=null;constructor(e){super();let n=new Gi([...e.providers,{provide:ao,useValue:this},{provide:Cl,useValue:this.componentFactoryResolver}],e.parent||tl(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Tl(t,e,n=null){return new ml({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var bF=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Qm(!1,n.type),i=r.length>0?Tl([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=j({token:t,providedIn:"environment",factory:()=>new t(ne(et))})}return t})();function xe(t){return yl(()=>{let e=qS(t),n=he(H({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===uy.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(bF).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||xn.Emulated,styles:t.styles||Ot,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&ii("NgStandalone"),zS(n);let r=t.dependencies;return n.directiveDefs=yD(r,MF),n.pipeDefs=yD(r,pw),n.id=xF(n),n})}function MF(t){return Xr(t)||Jm(t)}function er(t){return yl(()=>({type:t.type,bootstrap:t.bootstrap||Ot,declarations:t.declarations||Ot,imports:t.imports||Ot,exports:t.exports||Ot,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function RF(t,e){if(t==null)return Zr;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,a,l;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,l=i[3]||null):(o=i,s=i,a=Md.None,l=null),n[o]=[r,a,l],e[o]=s}return n}function NF(t){if(t==null)return Zr;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function ze(t){return yl(()=>{let e=qS(t);return zS(e),e})}function by(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function qS(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Zr,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Ot,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:RF(t.inputs,e),outputs:NF(t.outputs),debugInfo:null}}function zS(t){t.features?.forEach(e=>e(t))}function yD(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function xF(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function PF(t){return Object.getPrototypeOf(t.prototype).constructor}function Bt(t){let e=PF(t.type),n=!0,r=[t];for(;e;){let i;if(Kn(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new J(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let s=t;s.inputs=xg(t.inputs),s.declaredInputs=xg(t.declaredInputs),s.outputs=xg(t.outputs);let a=i.hostBindings;a&&VF(t,a);let l=i.viewQuery,c=i.contentQueries;if(l&&OF(t,l),c&&LF(t,c),kF(t,i),lw(t.outputs,i.outputs),Kn(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Bt&&(n=!1)}}e=Object.getPrototypeOf(e)}FF(r)}function kF(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function FF(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=os(i.hostAttrs,n=os(n,i.hostAttrs))}}function xg(t){return t===Zr?{}:t===Ot?[]:t}function OF(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function LF(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,o)=>{e(r,i,o),n(r,i,o)}:t.contentQueries=e}function VF(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function UF(t,e,n,r,i,o,s,a){if(n.firstCreatePass){t.mergedAttrs=os(t.mergedAttrs,t.attrs);let h=t.tView=my(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),h.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),ns(t,!1);let l=BF(n,e,t,r);Qc()&&Cy(n,e,l,t),ss(l,e);let c=RS(l,e,l,t);e[r+ut]=c,yy(e,c),SF(c,t,e)}function Ed(t,e,n,r,i,o,s,a,l,c,h){let p=n+ut,m;if(e.firstCreatePass){if(m=Fd(e,p,4,s||null,a||null),c!=null){let v=Jn(e.consts,c);m.localNames=[];for(let I=0;I<v.length;I+=2)m.localNames.push(v[I],-1)}}else m=e.data[p];return UF(m,t,e,n,r,i,o,l),c!=null&&Ty(t,m,h),m}var BF=HF;function HF(t,e,n,r){return Yc(!0),e[ke].createComment("")}var My=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function jS(t){return typeof t=="function"&&t[xt]!==void 0}function Ry(t){return jS(t)&&typeof t.set=="function"}var Ny=new Q("");function wr(t){return!!t&&typeof t.then=="function"}function Vd(t){return!!t&&typeof t.subscribe=="function"}var WS=new Q("");var xy=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=k(WS,{optional:!0})??[];injector=k(an);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Et(this.injector,i);if(wr(o))n.push(o);else if(Vd(o)){let s=new Promise((a,l)=>{o.subscribe({complete:a,error:l})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Ud=new Q("");function KS(){rm(()=>{let t="";throw new J(600,t)})}function JS(t){return t.isBoundToModule}var $F=10;var oi=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=k(zt);afterRenderManager=k(_y);zonelessEnabled=k(ul);rootEffectScheduler=k(Ag);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new qe;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=k(Er);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(ce(n=>!n))}constructor(){k(Ir,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=k(et);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=an.NULL){return this._injector.get(Lt).run(()=>{Me(Ie.BootstrapComponentStart);let s=n instanceof Od;if(!this._injector.get(xy).done){let I="";throw new J(405,I)}let l;s?l=n:l=this._injector.get(Cl).resolveComponentFactory(n),this.componentTypes.push(l.componentType);let c=JS(l)?void 0:this._injector.get(ao),h=r||l.selector,p=l.create(i,[],h,c),m=p.location.nativeElement,v=p.injector.get(Ny,null);return v?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),dl(this.components,p),v?.unregisterApplication(m)}),this._loadComponent(p),Me(Ie.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Me(Ie.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Rd.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Me(Ie.ChangeDetectionEnd),new J(101,!1);let n=te(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,te(n),this.afterTick.next(),Me(Ie.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(so,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<$F;){Me(Ie.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Me(Ie.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!al(i))continue;let o=r&&!this.zonelessEnabled?0:1;SS(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>al(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;dl(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Ud,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>dl(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new J(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function dl(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function si(t,e,n,r){let i=me(),o=ni();if(Xn(i,o,e)){let s=ct(),a=ll();wk(a,i,t,e,n,r)}return si}var pQ=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var Qg=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Pg(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function GF(t,e,n,r){let i,o,s=0,a=t.length-1,l=void 0;if(Array.isArray(e)){te(r);let c=e.length-1;for(te(null);s<=a&&s<=c;){let h=t.at(s),p=e[s],m=Pg(s,h,s,p,n);if(m!==0){m<0&&t.updateValue(s,p),s++;continue}let v=t.at(a),I=e[c],b=Pg(a,v,c,I,n);if(b!==0){b<0&&t.updateValue(a,I),a--,c--;continue}let A=n(s,h),N=n(a,v),O=n(s,p);if(Object.is(O,N)){let L=n(c,I);Object.is(L,A)?(t.swap(s,a),t.updateValue(a,I),c--,a--):t.move(a,s),t.updateValue(s,p),s++;continue}if(i??=new Cd,o??=_D(t,s,a,n),Yg(t,i,s,O))t.updateValue(s,p),s++,a++;else if(o.has(O))i.set(A,t.detach(s)),a--;else{let L=t.create(s,e[s]);t.attach(s,L),s++,a++}}for(;s<=c;)vD(t,i,n,s,e[s]),s++}else if(e!=null){te(r);let c=e[Symbol.iterator]();te(null);let h=c.next();for(;!h.done&&s<=a;){let p=t.at(s),m=h.value,v=Pg(s,p,s,m,n);if(v!==0)v<0&&t.updateValue(s,m),s++,h=c.next();else{i??=new Cd,o??=_D(t,s,a,n);let I=n(s,m);if(Yg(t,i,s,I))t.updateValue(s,m),s++,a++,h=c.next();else if(!o.has(I))t.attach(s,t.create(s,m)),s++,a++,h=c.next();else{let b=n(s,p);i.set(b,t.detach(s)),a--}}}for(;!h.done;)vD(t,i,n,t.length,h.value),h=c.next()}for(;s<=a;)t.destroy(t.detach(a--));i?.forEach(c=>{t.destroy(c)})}function Yg(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function vD(t,e,n,r,i){if(Yg(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function _D(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var Cd=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function Dt(t,e,n,r,i,o,s,a){ii("NgControlFlow");let l=me(),c=ct(),h=Jn(c.consts,o);return Ed(l,c,t,e,n,r,i,h,256,s,a),wl}function wl(t,e,n,r,i,o,s,a){ii("NgControlFlow");let l=me(),c=ct(),h=Jn(c.consts,o);return Ed(l,c,t,e,n,r,i,h,512,s,a),wl}function St(t,e){ii("NgControlFlow");let n=me(),r=ni(),i=n[r]!==fn?n[r]:-1,o=i!==-1?Id(n,ut+i):void 0,s=0;if(Xn(n,r,t)){let a=te(null);try{if(o!==void 0&&xS(o,s),t!==-1){let l=ut+t,c=Id(n,l),h=ty(n[ie],l),p=kS(c,h,n),m=Sy(n,h,e,{dehydratedView:p});kd(c,m,s,fl(h,p))}}finally{te(a)}}else if(o!==void 0){let a=NS(o,s);a!==void 0&&(a[Qe]=e)}}var Zg=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Ye}};var Xg=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function ai(t,e,n,r,i,o,s,a,l,c,h,p,m){ii("NgControlFlow");let v=me(),I=ct(),b=l!==void 0,A=me(),N=a?s.bind(A[Jt][Qe]):s,O=new Xg(b,N);A[ut+t]=O,Ed(v,I,t+1,e,n,r,i,Jn(I.consts,o),256),b&&Ed(v,I,t+2,l,c,h,p,Jn(I.consts,m),512)}var ey=class extends Qg{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Ye}at(e){return this.getLView(e)[Qe].$implicit}attach(e,n){let r=n[Yo];this.needsIndexUpdate||=e!==this.length,kd(this.lContainer,n,e,fl(this.templateTNode,r)),qF(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,zF(this.lContainer,e),jF(this.lContainer,e)}create(e,n){let r=jg(this.lContainer,this.templateTNode.tView.ssrId),i=Sy(this.hostLView,this.templateTNode,new Zg(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){xd(e[ie],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Qe].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Qe].$index=e}getLView(e){return WF(this.lContainer,e)}};function li(t){let e=te(null),n=_r();try{let r=me(),i=r[ie],o=r[n],s=n+1,a=Id(r,s);if(o.liveCollection===void 0){let c=ty(i,s);o.liveCollection=new ey(a,r,c)}else o.liveCollection.reset();let l=o.liveCollection;if(GF(l,t,o.trackByFn,e),l.updateIndexes(),o.hasEmptyBlock){let c=ni(),h=l.length===0;if(Xn(r,c,h)){let p=n+2,m=Id(r,p);if(h){let v=ty(i,p),I=kS(m,v,r),b=Sy(r,v,void 0,{dehydratedView:I});kd(m,b,0,fl(v,I))}else i.firstUpdatePass&&Wk(m),xS(m,0)}}}finally{te(e)}}function Id(t,e){return t[e]}function qF(t,e){if(t.length<=Ye)return;let n=Ye+e,r=t[n],i=r?r[Zi]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[vr];X1(o,i),io.delete(r),i.detachedLeaveAnimationFns=void 0}}function zF(t,e){if(t.length<=Ye)return;let n=Ye+e,r=t[n],i=r?r[Zi]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function jF(t,e){return pl(t,e)}function WF(t,e){return NS(t,e)}function ty(t,e){return sl(t,e)}function De(t,e,n){let r=me(),i=ni();if(Xn(r,i,e)){let o=ct(),s=ll();yS(s,r,t,e,r[ke],n)}return De}function ny(t,e,n,r,i){wy(e,t,n,i?"class":"style",r)}function P(t,e,n,r){let i=me(),o=i[ie],s=t+ut,a=o.firstCreatePass?VS(s,i,2,e,Tk,Nw(),n,r):o.data[s];if(_S(a,i,t,e,QS),$c(a)){let l=i[ie];gS(l,i,a),JD(l,a,i)}return r!=null&&Ty(i,a),P}function F(){let t=ct(),e=wt(),n=ES(e);return t.firstCreatePass&&US(t,n),cg(n)&&dg(),ug(),n.classesWithoutHost!=null&&s1(n)&&ny(t,n,me(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&a1(n)&&ny(t,n,me(),n.stylesWithoutHost,!1),F}function ge(t,e,n,r){return P(t,e,n,r),F(),ge}function Ue(t,e,n,r){let i=me(),o=i[ie],s=t+ut,a=o.firstCreatePass?lF(s,o,2,e,n,r):o.data[s];return _S(a,i,t,e,QS),r!=null&&Ty(i,a),Ue}function Be(){let t=wt(),e=ES(t);return cg(e)&&dg(),ug(),Be}function jt(t,e,n,r){return Ue(t,e,n,r),Be(),jt}var QS=(t,e,n,r,i)=>(Yc(!0),ZD(e[ke],r,zw()));function Py(){return me()}function ui(t,e,n){let r=me(),i=ni();if(Xn(r,i,e)){let o=ct(),s=ll();vS(s,r,t,e,r[ke],n)}return ui}var Dl="en-US";var KF=Dl;function YS(t){typeof t=="string"&&(KF=t.toLowerCase().replace(/_/g,"-"))}function Fe(t,e,n){let r=me(),i=ct(),o=wt();return ZS(i,r,r[ke],o,t,e,n),Fe}function Bd(t,e,n){let r=me(),i=ct(),o=wt();return(o.type&3||n)&&BS(o,i,r,n,r[ke],t,e,od(o,r,e)),Bd}function ZS(t,e,n,r,i,o,s){let a=!0,l=null;if((r.type&3||s)&&(l??=od(r,e,o),BS(r,t,e,s,n,i,o,l)&&(a=!1)),a){let c=r.outputs?.[i],h=r.hostDirectiveOutputs?.[i];if(h&&h.length)for(let p=0;p<h.length;p+=2){let m=h[p],v=h[p+1];l??=od(r,e,o),pD(r,e,m,v,i,l)}if(c&&c.length)for(let p of c)l??=od(r,e,o),pD(r,e,p,i,i,l)}}function Ct(t=1){return qw(t)}function td(t,e){return t<<17|e<<2}function lo(t){return t>>17&32767}function JF(t){return(t&2)==2}function QF(t,e){return t&131071|e<<17}function ry(t){return t|2}function ls(t){return(t&131068)>>2}function kg(t,e){return t&-131069|e<<2}function YF(t){return(t&1)===1}function iy(t){return t|1}function ZF(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,a=lo(s),l=ls(s);t[r]=n;let c=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||Qo(p,h)>0)&&(c=!0)}else h=n;if(i)if(l!==0){let m=lo(t[a+1]);t[r+1]=td(m,a),m!==0&&(t[m+1]=kg(t[m+1],r)),t[a+1]=QF(t[a+1],r)}else t[r+1]=td(a,0),a!==0&&(t[a+1]=kg(t[a+1],r)),a=r;else t[r+1]=td(l,0),a===0?a=r:t[l+1]=kg(t[l+1],r),l=r;c&&(t[r+1]=ry(t[r+1])),ED(t,h,r,!0),ED(t,h,r,!1),XF(e,h,t,r,o),s=td(a,l),o?e.classBindings=s:e.styleBindings=s}function XF(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Qo(o,e)>=0&&(n[r+1]=iy(n[r+1]))}function ED(t,e,n,r){let i=t[n+1],o=e===null,s=r?lo(i):ls(i),a=!1;for(;s!==0&&(a===!1||o);){let l=t[s],c=t[s+1];eO(l,e)&&(a=!0,t[s+1]=r?iy(c):ry(c)),s=r?lo(c):ls(c)}a&&(t[n+1]=r?ry(i):iy(i))}function eO(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Qo(t,e)>=0:!1}var Nn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function tO(t){return t.substring(Nn.key,Nn.keyEnd)}function nO(t){return rO(t),XS(t,e0(t,0,Nn.textEnd))}function XS(t,e){let n=Nn.textEnd;return n===e?-1:(e=Nn.keyEnd=iO(t,Nn.key=e,n),e0(t,e,n))}function rO(t){Nn.key=0,Nn.keyEnd=0,Nn.value=0,Nn.valueEnd=0,Nn.textEnd=t.length}function e0(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function iO(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function tr(t,e,n){return t0(t,e,n,!1),tr}function Oe(t,e){return t0(t,e,null,!0),Oe}function uo(t){sO(fO,oO,t,!0)}function oO(t,e){for(let n=nO(e);n>=0;n=XS(e,n))Uc(t,tO(e),!0)}function t0(t,e,n,r){let i=me(),o=ct(),s=gg(2);if(o.firstUpdatePass&&r0(o,t,s,r),e!==fn&&Xn(i,s,e)){let a=o.data[_r()];i0(o,a,i,i[ke],t,i[s+1]=pO(e,n),r,s)}}function sO(t,e,n,r){let i=ct(),o=gg(2);i.firstUpdatePass&&r0(i,null,o,r);let s=me();if(n!==fn&&Xn(s,o,n)){let a=i.data[_r()];if(o0(a,r)&&!n0(i,o)){let l=r?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(n=Fc(l,n||"")),ny(i,a,s,n,r)}else hO(i,a,s,s[ke],s[o+1],s[o+1]=dO(t,e,n),r,o)}}function n0(t,e){return e>=t.expandoStartIndex}function r0(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[_r()],s=n0(t,n);o0(o,r)&&e===null&&!s&&(e=!1),e=aO(i,o,e,r),ZF(i,o,e,n,s,r)}}function aO(t,e,n,r){let i=Bw(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Fg(null,t,e,n,r),n=gl(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=Fg(i,t,e,n,r),o===null){let l=lO(t,e,r);l!==void 0&&Array.isArray(l)&&(l=Fg(null,t,e,l[1],r),l=gl(l,e.attrs,r),uO(t,e,r,l))}else o=cO(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function lO(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ls(r)!==0)return t[lo(r)]}function uO(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[lo(i)]=r}function cO(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=gl(r,s,n)}return gl(r,e.attrs,n)}function Fg(t,e,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],r=gl(r,o.hostAttrs,i),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function gl(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Uc(t,s,n?!0:e[++o]))}return t===void 0?null:t}function dO(t,e,n){if(n==null||n==="")return Ot;let r=[],i=El(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function fO(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&Uc(t,r,n)}function hO(t,e,n,r,i,o,s,a){i===fn&&(i=Ot);let l=0,c=0,h=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;h!==null||p!==null;){let m=l<i.length?i[l+1]:void 0,v=c<o.length?o[c+1]:void 0,I=null,b;h===p?(l+=2,c+=2,m!==v&&(I=p,b=v)):p===null||h!==null&&h<p?(l+=2,I=h):(c+=2,I=p,b=v),I!==null&&i0(t,e,n,r,I,b,s,a),h=l<i.length?i[l]:null,p=c<o.length?o[c]:null}}function i0(t,e,n,r,i,o,s,a){if(!(e.type&3))return;let l=t.data,c=l[a+1],h=YF(c)?CD(l,e,n,i,ls(c),s):void 0;if(!Td(h)){Td(o)||JF(c)&&(o=CD(l,null,n,i,a,s));let p=ig(_r(),n);pk(r,s,p,i,o)}}function CD(t,e,n,r,i,o){let s=e===null,a;for(;i>0;){let l=t[i],c=Array.isArray(l),h=c?l[1]:l,p=h===null,m=n[i+1];m===fn&&(m=p?Ot:void 0);let v=p?Bc(m,r):h===r?m:void 0;if(c&&!Td(v)&&(v=Bc(l,r)),Td(v)&&(a=v,s))return a;let I=t[i+1];i=s?lo(I):ls(I)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=Bc(l,r))}return a}function Td(t){return t!==void 0}function pO(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=gr(El(t)))),t}function o0(t,e){return(t.flags&(e?8:16))!==0}function B(t,e=""){let n=me(),r=ct(),i=t+ut,o=r.firstCreatePass?Fd(r,i,1,e,null):r.data[i],s=mO(r,n,o,e,t);n[i]=s,Qc()&&Cy(r,n,s,o),ns(o,!1)}var mO=(t,e,n,r,i)=>(Yc(!0),N1(e[ke],r));function gO(t,e,n,r=""){return Xn(t,ni(),n)?e+Za(n)+r:fn}function Ze(t){return Sl("",t),Ze}function Sl(t,e,n){let r=me(),i=gO(r,t,e,n);return i!==fn&&yO(r,_r(),i),Sl}function yO(t,e,n){let r=ig(e,t);x1(t[ke],r,n)}function Zt(t,e,n){Ry(e)&&(e=e());let r=me(),i=ni();if(Xn(r,i,e)){let o=ct(),s=ll();yS(s,r,t,e,r[ke],n)}return Zt}function hn(t,e){let n=Ry(t);return n&&t.set(e),n}function Xt(t,e){let n=me(),r=ct(),i=wt();return ZS(r,n,n[ke],i,t,e),Xt}function vO(t,e,n){let r=ct();if(r.firstCreatePass){let i=Kn(t);oy(n,r.data,r.blueprint,i,!0),oy(e,r.data,r.blueprint,i,!1)}}function oy(t,e,n,r,i){if(t=_t(t),Array.isArray(t))for(let o=0;o<t.length;o++)oy(t[o],e,n,r,i);else{let o=ct(),s=me(),a=wt(),l=$i(t)?t:_t(t.provide),c=Zm(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if($i(t)||!t.multi){let v=new ro(c,i,we,null),I=Lg(l,e,i?h:h+m,p);I===-1?(Ug(cd(a,s),o,l),Og(o,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),s.push(v)):(n[I]=v,s[I]=v)}else{let v=Lg(l,e,h+m,p),I=Lg(l,e,h,h+m),b=v>=0&&n[v],A=I>=0&&n[I];if(i&&!A||!i&&!b){Ug(cd(a,s),o,l);let N=CO(i?EO:_O,n.length,i,r,c,t);!i&&A&&(n[I].providerFactory=N),Og(o,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(N),s.push(N)}else{let N=s0(n[i?I:v],c,!i&&r);Og(o,t,v>-1?v:I,N)}!i&&r&&A&&n[I].componentProviders++}}}function Og(t,e,n,r){let i=$i(e),o=_w(e);if(i||o){let l=(o?_t(e.useClass):e).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=c.indexOf(n);h===-1?c.push(n,[r,l]):c[h+1].push(r,l)}else c.push(n,l)}}}function s0(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Lg(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function _O(t,e,n,r,i){return sy(this.multi,[])}function EO(t,e,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=dd(r,r[ie],this.providerFactory.index,i);s=l.slice(0,a),sy(o,s);for(let c=a;c<l.length;c++)s.push(l[c])}else s=[],sy(o,s);return s}function sy(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function CO(t,e,n,r,i,o){let s=new ro(t,n,we,null);return s.multi=[],s.index=e,s.componentProviders=0,s0(s,i,r&&!n),s}function pn(t,e=[]){return n=>{n.providersResolver=(r,i)=>vO(r,i?i(t):t,e)}}function IO(t,e){let n=t[e];return n===fn?void 0:n}function TO(t,e,n,r,i,o){let s=e+n;return Xn(t,s,i)?uF(t,s+1,o?r.call(o,i):r(i)):IO(t,s+1)}function Hd(t,e){let n=ct(),r,i=t+ut;n.firstCreatePass?(r=wO(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=Jr(r.type,!0)),s,a=Ft(we);try{let l=ud(!1),c=o();return ud(l),og(n,me(),i,c),c}finally{Ft(a)}}function wO(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function $d(t,e,n){let r=t+ut,i=me(),o=Tw(i,r);return DO(i,r)?TO(i,Fw(),e,o.transform,n,o):o.transform(n)}function DO(t,e){return t[ie].data[e].pure}var wd=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},ky=(()=>{class t{compileModuleSync(n){return new _d(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Km(n),o=iS(i.declarations).reduce((s,a)=>{let l=Xr(a);return l&&s.push(new as(l)),s},[]);return new wd(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var a0=(()=>{class t{applicationErrorHandler=k(zt);appRef=k(oi);taskService=k(Er);ngZone=k(Lt);zonelessEnabled=k(ul);tracing=k(Ir,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new lt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Ka):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(k(Sg,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Ig:Cg;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Ka+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Ig(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function l0(){return[{provide:Yr,useExisting:a0},{provide:Lt,useClass:Ja},{provide:ul,useValue:!0}]}function SO(){return typeof $localize<"u"&&$localize.locale||Dl}var Gd=new Q("",{factory:()=>k(Gd,{optional:!0,skipSelf:!0})||SO()});function Al(t,e){return Xu(t,e?.equal)}var c0=Symbol("InputSignalNode#UNSET"),jO=he(H({},ec),{transformFn:void 0,applyValueToInputSignal(t,e){Va(t,e)}});function d0(t,e){let n=Object.create(jO);n.value=t,n.transformFn=e?.transform;function r(){if(Fa(n),n.value===c0){let i=null;throw new J(-950,i)}return n.value}return r[xt]=n,r}var zd=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>vl(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function u0(t,e){return d0(t,e)}function WO(t){return d0(c0,t)}var f0=(u0.required=WO,u0);var Fy=new Q(""),KO=new Q("");function bl(t){return!t.moduleRef}function JO(t){let e=bl(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Lt);return n.run(()=>{bl(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(zt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),bl(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Fy);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Fy);s.add(o),t.moduleRef.onDestroy(()=>{dl(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return YO(r,n,()=>{let o=e.get(Er),s=o.add(),a=e.get(xy);return a.runInitializers(),a.donePromise.then(()=>{let l=e.get(Gd,Dl);if(YS(l||Dl),!e.get(KO,!0))return bl(t)?e.get(oi):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(bl(t)){let h=e.get(oi);return t.rootComponent!==void 0&&h.bootstrap(t.rootComponent),h}else return QO?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var QO;function YO(t,e,n){try{let r=n();return wr(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var qd=null;function ZO(t=[],e){return an.create({name:e,providers:[{provide:el,useValue:"platform"},{provide:Fy,useValue:new Set([()=>qd=null])},...t]})}function XO(t=[]){if(qd)return qd;let e=ZO(t);return qd=e,KS(),eL(e),e}function eL(t){let e=t.get(Sd,null);Et(t,()=>{e?.forEach(n=>n())})}var gn=(()=>{class t{static __NG_ELEMENT_ID__=tL}return t})();function tL(t){return nL(wt(),me(),(t&16)===16)}function nL(t,e,n){if(ti(t)&&!n){let r=dn(t.index,e);return new oo(r,r)}else if(t.type&175){let r=e[Jt];return new oo(r,e)}return null}function h0(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;Me(Ie.BootstrapApplicationStart);try{let o=i?.injector??XO(r),s=[l0(),Jw,...n||[]],a=new ml({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return JO({r3Injector:a.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{Me(Ie.BootstrapApplicationEnd)}}function cs(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var g0=null;function yn(){return g0}function Oy(t){g0??=t}var Ml=class{},Ly=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>k(y0),providedIn:"platform"})}return t})();var y0=(()=>{class t extends Ly{_location;_history;_doc=k(tt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return yn().getBaseHref(this._doc)}onPopState(n){let r=yn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=yn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function v0(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function p0(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function ci(t){return t&&t[0]!=="?"?`?${t}`:t}var ds=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>k(E0),providedIn:"root"})}return t})(),_0=new Q(""),E0=(()=>{class t extends ds{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??k(tt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return v0(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+ci(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+ci(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+ci(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(ne(Ly),ne(_0,8))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),fs=(()=>{class t{_subject=new qe;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=oL(p0(m0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ci(r))}normalize(n){return t.stripTrailingSlash(iL(this._basePath,m0(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ci(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ci(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ci;static joinWithSlash=v0;static stripTrailingSlash=p0;static \u0275fac=function(r){return new(r||t)(ne(ds))};static \u0275prov=j({token:t,factory:()=>rL(),providedIn:"root"})}return t})();function rL(){return new fs(ne(ds))}function iL(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function m0(t){return t.replace(/\/index.html$/,"")}function oL(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function sL(t,e){return new J(2100,!1)}var Vy=class{createSubscription(e,n,r){return nt(()=>e.subscribe({next:n,error:r}))}dispose(e){nt(()=>e.unsubscribe())}},Uy=class{createSubscription(e,n,r){return e.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(e){e.unsubscribe()}},aL=new Uy,lL=new Vy,By=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=k(zt);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(wr(n))return aL;if(Vd(n))return lL;throw sL(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)(we(gn,16))};static \u0275pipe=by({name:"async",type:t,pure:!1})}return t})();function Rl(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var co=class{};var C0="browser";var Nl=class{_doc;constructor(e){this._doc=e}manager},jd=(()=>{class t extends Nl{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(ne(tt))};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})(),Jd=new Q(""),qy=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof jd));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof jd);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new J(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(ne(Jd),ne(Lt))};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})(),Hy="ng-app-id";function I0(t){for(let e of t)e.remove()}function T0(t,e){let n=e.createElement("style");return n.textContent=t,n}function fL(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Hy}="${e}"],link[${Hy}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Hy),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Gy(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var zy=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,fL(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,T0);r?.forEach(i=>this.addUsage(i,this.external,Gy))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(I0(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])I0(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,T0(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Gy(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(ne(tt),ne(Dd),ne(Ad,8),ne(_l))};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})(),$y={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},jy=/%COMP%/g;var D0="%COMP%",hL=`_nghost-${D0}`,pL=`_ngcontent-${D0}`,mL=!0,gL=new Q("",{factory:()=>mL});function yL(t){return pL.replace(jy,t)}function vL(t){return hL.replace(jy,t)}function S0(t,e){return e.map(n=>n.replace(jy,t))}var Wy=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,a,l=null,c=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=l,this.tracingService=c,this.platformIsServer=!1,this.defaultRenderer=new xl(n,s,a,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof Kd?i.applyToHost(n):i instanceof Pl&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case xn.Emulated:o=new Kd(l,c,r,this.appId,h,s,a,p,m);break;case xn.ShadowDom:return new Wd(l,n,r,s,a,this.nonce,p,m,c);case xn.ExperimentalIsolatedShadowDom:return new Wd(l,n,r,s,a,this.nonce,p,m);default:o=new Pl(l,c,r,h,s,a,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(ne(qy),ne(zy),ne(Dd),ne(gL),ne(tt),ne(Lt),ne(Ad),ne(Ir,8))};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})(),xl=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS($y[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(w0(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(w0(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new J(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=$y[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=$y[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(Yn.DashCase|Yn.Important)?e.style.setProperty(n,r,i&Yn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Yn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=yn().getGlobalEventTarget(this.doc,e),!e))throw new J(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function w0(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Wd=class extends xl{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,o,s,a,l,c){super(e,i,o,a,l),this.hostEl=n,this.sharedStylesHost=c,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let h=r.styles;h=S0(r.id,h);for(let m of h){let v=document.createElement("style");s&&v.setAttribute("nonce",s),v.textContent=m,this.shadowRoot.appendChild(v)}let p=r.getExternalStyles?.();if(p)for(let m of p){let v=Gy(m,i);s&&v.setAttribute("nonce",s),this.shadowRoot.appendChild(v)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Pl=class extends xl{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,a,l,c){super(e,o,s,a,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let h=r.styles;this.styles=c?S0(c,h):h,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&io.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},Kd=class extends Pl{contentAttr;hostAttr;constructor(e,n,r,i,o,s,a,l,c){let h=i+"-"+r.id;super(e,n,r,o,s,a,l,c,h),this.contentAttr=yL(h),this.hostAttr=vL(h)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Qd=class t extends Ml{supportsDOMEvents=!0;static makeCurrent(){Oy(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=_L();return n==null?null:EL(n)}resetBaseElement(){kl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Rl(document.cookie,e)}},kl=null;function _L(){return kl=kl||document.head.querySelector("base"),kl?kl.getAttribute("href"):null}function EL(t){return new URL(t,document.baseURI).pathname}var CL=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})(),A0=["alt","control","meta","shift"],IL={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},TL={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},b0=(()=>{class t extends Nl{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),a=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>yn().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),A0.forEach(c=>{let h=r.indexOf(c);h>-1&&(r.splice(h,1),s+=c+".")}),s+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(n,r){let i=IL[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),A0.forEach(s=>{if(s!==i){let a=TL[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(ne(tt))};static \u0275prov=j({token:t,factory:t.\u0275fac})}return t})();function Ky(t,e,n){let r=H({rootComponent:t,platformRef:n?.platformRef},wL(e));return h0(r)}function wL(t){return{appProviders:[...ML,...t?.providers??[]],platformProviders:bL}}function DL(){Qd.makeCurrent()}function SL(){return new zn}function AL(){return cy(document),document}var bL=[{provide:_l,useValue:C0},{provide:Sd,useValue:DL,multi:!0},{provide:tt,useFactory:AL}];var ML=[{provide:el,useValue:"root"},{provide:zn,useFactory:SL},{provide:Jd,useClass:jd,multi:!0},{provide:Jd,useClass:b0,multi:!0},Wy,zy,qy,{provide:so,useExisting:Wy},{provide:co,useClass:CL},[]];var di=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Zd=class{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}},Xd=class{encodeKey(e){return M0(e)}encodeValue(e){return M0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function RL(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],l=n.get(s)||[];l.push(a),n.set(s,l)}),n}var NL=/%(\d[a-f0-9])/gi,xL={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function M0(t){return encodeURIComponent(t).replace(NL,(e,n)=>xL[n]??e)}function Yd(t){return`${t}`}var Dr=class t{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Xd,e.fromString){if(e.fromObject)throw new J(2805,!1);this.map=RL(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Yd):[Yd(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Yd(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Yd(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};function PL(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function R0(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function N0(t){return typeof Blob<"u"&&t instanceof Blob}function x0(t){return typeof FormData<"u"&&t instanceof FormData}function kL(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var P0="Content-Type",k0="Accept",F0="text/plain",O0="application/json",FL=`${O0}, ${F0}, */*`,hs=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,n,r,i){this.url=n,this.method=e.toUpperCase();let o;if(PL(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new J(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),o.referrerPolicy&&(this.referrerPolicy=o.referrerPolicy),this.transferCache=o.transferCache}if(this.headers??=new di,this.context??=new Zd,!this.params)this.params=new Dr,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),l=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||R0(this.body)||N0(this.body)||x0(this.body)||kL(this.body)?this.body:this.body instanceof Dr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||x0(this.body)?null:N0(this.body)?this.body.type||null:R0(this.body)?null:typeof this.body=="string"?F0:this.body instanceof Dr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?O0:null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,l=e.mode||this.mode,c=e.redirect||this.redirect,h=e.credentials||this.credentials,p=e.referrer||this.referrer,m=e.integrity||this.integrity,v=e.referrerPolicy||this.referrerPolicy,I=e.transferCache??this.transferCache,b=e.timeout??this.timeout,A=e.body!==void 0?e.body:this.body,N=e.withCredentials??this.withCredentials,O=e.reportProgress??this.reportProgress,L=e.headers||this.headers,G=e.params||this.params,Z=e.context??this.context;return e.setHeaders!==void 0&&(L=Object.keys(e.setHeaders).reduce((Y,w)=>Y.set(w,e.setHeaders[w]),L)),e.setParams&&(G=Object.keys(e.setParams).reduce((Y,w)=>Y.set(w,e.setParams[w]),G)),new t(n,r,A,{params:G,headers:L,context:Z,reportProgress:O,responseType:i,withCredentials:N,transferCache:I,keepalive:o,cache:a,priority:s,timeout:b,mode:l,redirect:c,credentials:h,referrer:p,integrity:m,referrerPolicy:v})}},fo=(function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t})(fo||{}),ms=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(e,n=200,r="OK"){this.headers=e.headers||new di,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.responseType=e.responseType,this.ok=this.status>=200&&this.status<300}},ef=class t extends ms{constructor(e={}){super(e)}type=fo.ResponseHeader;clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Fl=class t extends ms{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=fo.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected,responseType:e.responseType??this.responseType})}},ps=class extends ms{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},OL=200,LL=204;var VL=new Q("");var UL=/^\)\]\}',?\n/;var Qy=(()=>{class t{xhrFactory;tracingService=k(Ir,{optional:!0});constructor(n){this.xhrFactory=n}maybePropagateTrace(n){return this.tracingService?.propagate?this.tracingService.propagate(n):n}handle(n){if(n.method==="JSONP")throw new J(-2800,!1);let r=this.xhrFactory;return re(null).pipe(Pt(()=>new pe(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((A,N)=>s.setRequestHeader(A,N.join(","))),n.headers.has(k0)||s.setRequestHeader(k0,FL),!n.headers.has(P0)){let A=n.detectContentTypeHeader();A!==null&&s.setRequestHeader(P0,A)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let A=n.responseType.toLowerCase();s.responseType=A!=="json"?A:"text"}let a=n.serializeBody(),l=null,c=()=>{if(l!==null)return l;let A=s.statusText||"OK",N=new di(s.getAllResponseHeaders()),O=s.responseURL||n.url;return l=new ef({headers:N,status:s.status,statusText:A,url:O}),l},h=this.maybePropagateTrace(()=>{let{headers:A,status:N,statusText:O,url:L}=c(),G=null;N!==LL&&(G=typeof s.response>"u"?s.responseText:s.response),N===0&&(N=G?OL:0);let Z=N>=200&&N<300;if(n.responseType==="json"&&typeof G=="string"){let Y=G;G=G.replace(UL,"");try{G=G!==""?JSON.parse(G):null}catch(w){G=Y,Z&&(Z=!1,G={error:w,text:G})}}Z?(o.next(new Fl({body:G,headers:A,status:N,statusText:O,url:L||void 0})),o.complete()):o.error(new ps({error:G,headers:A,status:N,statusText:O,url:L||void 0}))}),p=this.maybePropagateTrace(A=>{let{url:N}=c(),O=new ps({error:A,status:s.status||0,statusText:s.statusText||"Unknown Error",url:N||void 0});o.error(O)}),m=p;n.timeout&&(m=this.maybePropagateTrace(A=>{let{url:N}=c(),O=new ps({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:N||void 0});o.error(O)}));let v=!1,I=this.maybePropagateTrace(A=>{v||(o.next(c()),v=!0);let N={type:fo.DownloadProgress,loaded:A.loaded};A.lengthComputable&&(N.total=A.total),n.responseType==="text"&&s.responseText&&(N.partialText=s.responseText),o.next(N)}),b=this.maybePropagateTrace(A=>{let N={type:fo.UploadProgress,loaded:A.loaded};A.lengthComputable&&(N.total=A.total),o.next(N)});return s.addEventListener("load",h),s.addEventListener("error",p),s.addEventListener("timeout",m),s.addEventListener("abort",p),n.reportProgress&&(s.addEventListener("progress",I),a!==null&&s.upload&&s.upload.addEventListener("progress",b)),s.send(a),o.next({type:fo.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",h),s.removeEventListener("timeout",m),n.reportProgress&&(s.removeEventListener("progress",I),a!==null&&s.upload&&s.upload.removeEventListener("progress",b)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(ne(co))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function BL(t,e){return e(t)}function HL(t,e,n){return(r,i)=>Et(n,()=>e(r,o=>t(o,i)))}var L0=new Q("",{factory:()=>[]}),V0=new Q(""),U0=new Q("",{providedIn:"root",factory:()=>!0});var Yy=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=ne(Qy),i},providedIn:"root"})}return t})();var tf=(()=>{class t{backend;injector;chain=null;pendingTasks=k(Xc);contributeToStability=k(U0);constructor(n,r){this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(L0),...this.injector.get(V0,[])]));this.chain=r.reduceRight((i,o)=>HL(i,o,this.injector),BL)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(Gn(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(ne(Yy),ne(et))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Zy=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=ne(tf),i},providedIn:"root"})}return t})();function Jy(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,credentials:t.credentials,transferCache:t.transferCache,timeout:t.timeout,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect,integrity:t.integrity,referrer:t.referrer,referrerPolicy:t.referrerPolicy}}var gs=(()=>{class t{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof hs)o=n;else{let l;i.headers instanceof di?l=i.headers:l=new di(i.headers);let c;i.params&&(i.params instanceof Dr?c=i.params:c=new Dr({fromObject:i.params})),o=new hs(n,r,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,referrerPolicy:i.referrerPolicy,integrity:i.integrity,timeout:i.timeout})}let s=re(o).pipe(Wo(l=>this.handler.handle(l)));if(n instanceof hs||i.observe==="events")return s;let a=s.pipe(rn(l=>l instanceof Fl));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(ce(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new J(2806,!1);return l.body}));case"blob":return a.pipe(ce(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new J(2807,!1);return l.body}));case"text":return a.pipe(ce(l=>{if(l.body!==null&&typeof l.body!="string")throw new J(2808,!1);return l.body}));case"json":default:return a.pipe(ce(l=>l.body))}case"response":return a;default:throw new J(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Dr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Jy(i,r))}post(n,r,i={}){return this.request("POST",n,Jy(i,r))}put(n,r,i={}){return this.request("PUT",n,Jy(i,r))}static \u0275fac=function(r){return new(r||t)(ne(Zy))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var $L=new Q("",{factory:()=>!0}),GL="XSRF-TOKEN",qL=new Q("",{providedIn:"root",factory:()=>GL}),zL="X-XSRF-TOKEN",jL=new Q("",{providedIn:"root",factory:()=>zL}),WL=(()=>{class t{cookieName=k(qL);doc=k(tt);lastCookieString="";lastToken=null;parseCount=0;getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Rl(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),B0=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=ne(WL),i},providedIn:"root"})}return t})(),KL=/^(?:https?:)?\/\//i;function JL(t,e){if(!k($L)||t.method==="GET"||t.method==="HEAD"||KL.test(t.url))return e(t);let n=k(B0).getToken(),r=k(jL);return n!=null&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,n)})),e(t)}function Xy(...t){let e=[gs,tf,{provide:Zy,useExisting:tf},{provide:Yy,useFactory:()=>k(VL,{optional:!0})??k(Qy)},{provide:L0,useValue:JL,multi:!0}];for(let n of t)e.push(...n.\u0275providers);return yr(e)}var H0=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(ne(tt))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var $0=()=>{};var z0=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},YL=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],a=t[n++],l=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},j0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,a=s?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,h=o>>2,p=(o&3)<<4|a>>4,m=(a&15)<<2|c>>6,v=c&63;l||(v=64,s||(m=64)),r.push(n[h],n[p],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(z0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):YL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let c=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||c==null||p==null)throw new ev;let m=o<<2|a>>4;if(r.push(m),c!==64){let v=a<<4&240|c>>2;if(r.push(v),p!==64){let I=c<<6&192|p;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},ev=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ZL=function(t){let e=z0(t);return j0.encodeByteArray(e,!0)},Ll=function(t){return ZL(t).replace(/\./g,"")},W0=function(t){try{return j0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function K0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var XL=()=>K0().__FIREBASE_DEFAULTS__,eV=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},tV=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&W0(t[1]);return e&&JSON.parse(e)},tv=()=>{try{return $0()||XL()||eV()||tV()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nV=t=>tv()?.emulatorHosts?.[t],J0=t=>{let e=nV(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},nv=()=>tv()?.config;var nf=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function rf(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Q0(t){return(await fetch(t,{credentials:"include"})).ok}function Y0(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=H({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ll(JSON.stringify(n)),Ll(JSON.stringify(s)),""].join(".")}var Ol={};function rV(){let t={prod:[],emulator:[]};for(let e of Object.keys(Ol))Ol[e]?t.emulator.push(e):t.prod.push(e);return t}function iV(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var G0=!1;function Z0(t,e){if(typeof window>"u"||typeof document>"u"||!rf(window.location.host)||Ol[t]===e||Ol[t]||G0)return;Ol[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=rV().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function l(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{G0=!0,s()},m}function h(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=iV(r),v=n("text"),I=document.getElementById(v)||document.createElement("span"),b=n("learnmore"),A=document.getElementById(b)||document.createElement("a"),N=n("preprendIcon"),O=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let L=m.element;a(L),h(A,b);let G=c();l(O,N),L.append(O,I,A,G),document.body.appendChild(L)}o?(I.innerText="Preview backend disconnected.",O.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(O.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function X0(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oV(){let t=tv()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eA(){return!oV()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rv(){try{return typeof indexedDB=="object"}catch{return!1}}function tA(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var sV="FirebaseError",Sr=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=sV,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vl.prototype.create)}},Vl=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?aV(o,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new Sr(i,a,r)}};function aV(t,e){return t.replace(lV,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var lV=/\{\$([^}]+)}/g;function ys(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(q0(o)&&q0(s)){if(!ys(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function q0(t){return t!==null&&typeof t=="object"}var _oe=14400*1e3;function vs(t){return t&&t._delegate?t._delegate:t}var Ar=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ho="[DEFAULT]";var iv=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new nf;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(cV(e))try{this.getOrInitializeService({instanceIdentifier:ho})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=ho){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ho){return this.instances.has(e)}getOptions(e=ho){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ho){return this.component?this.component.multipleInstances?e:ho:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function uV(t){return t===ho?void 0:t}function cV(t){return t.instantiationMode==="EAGER"}var of=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new iv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var dV=[],Ee=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(Ee||{}),fV={debug:Ee.DEBUG,verbose:Ee.VERBOSE,info:Ee.INFO,warn:Ee.WARN,error:Ee.ERROR,silent:Ee.SILENT},hV=Ee.INFO,pV={[Ee.DEBUG]:"log",[Ee.VERBOSE]:"log",[Ee.INFO]:"info",[Ee.WARN]:"warn",[Ee.ERROR]:"error"},mV=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=pV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},_s=class{constructor(e){this.name=e,this._logLevel=hV,this._logHandler=mV,this._userLogHandler=null,dV.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ee))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fV[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ee.DEBUG,...e),this._logHandler(this,Ee.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ee.VERBOSE,...e),this._logHandler(this,Ee.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ee.INFO,...e),this._logHandler(this,Ee.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ee.WARN,...e),this._logHandler(this,Ee.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ee.ERROR,...e),this._logHandler(this,Ee.ERROR,...e)}};var gV=(t,e)=>e.some(n=>t instanceof n),nA,rA;function yV(){return nA||(nA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function vV(){return rA||(rA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var iA=new WeakMap,sv=new WeakMap,oA=new WeakMap,ov=new WeakMap,lv=new WeakMap;function _V(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(nr(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&iA.set(n,t)}).catch(()=>{}),lv.set(e,t),e}function EV(t){if(sv.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});sv.set(t,e)}var av={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||oA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return nr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function sA(t){av=t(av)}function CV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(sf(this),e,...n);return oA.set(r,e.sort?e.sort():[e]),nr(r)}:vV().includes(t)?function(...e){return t.apply(sf(this),e),nr(iA.get(this))}:function(...e){return nr(t.apply(sf(this),e))}}function IV(t){return typeof t=="function"?CV(t):(t instanceof IDBTransaction&&EV(t),gV(t,yV())?new Proxy(t,av):t)}function nr(t){if(t instanceof IDBRequest)return _V(t);if(ov.has(t))return ov.get(t);let e=IV(t);return e!==t&&(ov.set(t,e),lv.set(e,t)),e}var sf=t=>lv.get(t);function lA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),a=nr(s);return r&&s.addEventListener("upgradeneeded",l=>{r(nr(s.result),l.oldVersion,l.newVersion,nr(s.transaction),l)}),n&&s.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}var TV=["get","getKey","getAll","getAllKeys","count"],wV=["put","add","delete","clear"],uv=new Map;function aA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(uv.get(e))return uv.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=wV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||TV.includes(n)))return;let o=async function(s,...a){let l=this.transaction(s,i?"readwrite":"readonly"),c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return uv.set(e,o),o}sA(t=>he(H({},t),{get:(e,n,r)=>aA(e,n)||t.get(e,n,r),has:(e,n)=>!!aA(e,n)||t.has(e,n)}));var dv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DV(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function DV(t){return t.getComponent()?.type==="VERSION"}var fv="@firebase/app",uA="0.14.6";var br=new _s("@firebase/app"),SV="@firebase/app-compat",AV="@firebase/analytics-compat",bV="@firebase/analytics",MV="@firebase/app-check-compat",RV="@firebase/app-check",NV="@firebase/auth",xV="@firebase/auth-compat",PV="@firebase/database",kV="@firebase/data-connect",FV="@firebase/database-compat",OV="@firebase/functions",LV="@firebase/functions-compat",VV="@firebase/installations",UV="@firebase/installations-compat",BV="@firebase/messaging",HV="@firebase/messaging-compat",$V="@firebase/performance",GV="@firebase/performance-compat",qV="@firebase/remote-config",zV="@firebase/remote-config-compat",jV="@firebase/storage",WV="@firebase/storage-compat",KV="@firebase/firestore",JV="@firebase/ai",QV="@firebase/firestore-compat",YV="firebase",ZV="12.6.0";var hv="[DEFAULT]",XV={[fv]:"fire-core",[SV]:"fire-core-compat",[bV]:"fire-analytics",[AV]:"fire-analytics-compat",[RV]:"fire-app-check",[MV]:"fire-app-check-compat",[NV]:"fire-auth",[xV]:"fire-auth-compat",[PV]:"fire-rtdb",[kV]:"fire-data-connect",[FV]:"fire-rtdb-compat",[OV]:"fire-fn",[LV]:"fire-fn-compat",[VV]:"fire-iid",[UV]:"fire-iid-compat",[BV]:"fire-fcm",[HV]:"fire-fcm-compat",[$V]:"fire-perf",[GV]:"fire-perf-compat",[qV]:"fire-rc",[zV]:"fire-rc-compat",[jV]:"fire-gcs",[WV]:"fire-gcs-compat",[KV]:"fire-fst",[QV]:"fire-fst-compat",[JV]:"fire-vertex","fire-js":"fire-js",[YV]:"fire-js-all"};var af=new Map,e2=new Map,pv=new Map;function cA(t,e){try{t.container.addComponent(e)}catch(n){br.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ul(t){let e=t.name;if(pv.has(e))return br.debug(`There were multiple attempts to register component ${e}.`),!1;pv.set(e,t);for(let n of af.values())cA(n,t);for(let n of e2.values())cA(n,t);return!0}function pA(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function mA(t){return t==null?!1:t.settings!==void 0}var t2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},fi=new Vl("app","Firebase",t2);var mv=class{constructor(e,n,r){this._isDeleted=!1,this._options=H({},e),this._config=H({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ar("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw fi.create("app-deleted",{appName:this._name})}};var gA=ZV;function vv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=H({name:hv,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw fi.create("bad-app-name",{appName:String(i)});if(n||(n=nv()),!n)throw fi.create("no-options");let o=af.get(i);if(o){if(ys(n,o.options)&&ys(r,o.config))return o;throw fi.create("duplicate-app",{appName:i})}let s=new of(i);for(let l of pv.values())s.addComponent(l);let a=new mv(n,r,s);return af.set(i,a),a}function yA(t=hv){let e=af.get(t);if(!e&&t===hv&&nv())return vv();if(!e)throw fi.create("no-app",{appName:t});return e}function hi(t,e,n){let r=XV[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),br.warn(s.join(" "));return}Ul(new Ar(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var n2="firebase-heartbeat-database",r2=1,Bl="firebase-heartbeat-store",cv=null;function vA(){return cv||(cv=lA(n2,r2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bl)}catch(n){console.warn(n)}}}}).catch(t=>{throw fi.create("idb-open",{originalErrorMessage:t.message})})),cv}async function i2(t){try{let n=(await vA()).transaction(Bl),r=await n.objectStore(Bl).get(_A(t));return await n.done,r}catch(e){if(e instanceof Sr)br.warn(e.message);else{let n=fi.create("idb-get",{originalErrorMessage:e?.message});br.warn(n.message)}}}async function dA(t,e){try{let r=(await vA()).transaction(Bl,"readwrite");await r.objectStore(Bl).put(e,_A(t)),await r.done}catch(n){if(n instanceof Sr)br.warn(n.message);else{let r=fi.create("idb-set",{originalErrorMessage:n?.message});br.warn(r.message)}}}function _A(t){return`${t.name}!${t.options.appId}`}var o2=1024,s2=30,gv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new yv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=fA();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>s2){let i=l2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){br.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=fA(),{heartbeatsToSend:n,unsentEntries:r}=a2(this._heartbeatsCache.heartbeats),i=Ll(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return br.warn(e),""}}};function fA(){return new Date().toISOString().substring(0,10)}function a2(t,e=o2){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),hA(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),hA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var yv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rv()?tA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await i2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return dA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return dA(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function hA(t){return Ll(JSON.stringify({version:2,heartbeats:t})).length}function l2(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function u2(t){Ul(new Ar("platform-logger",e=>new dv(e),"PRIVATE")),Ul(new Ar("heartbeat",e=>new gv(e),"PRIVATE")),hi(fv,uA,t),hi(fv,uA,"esm2020"),hi("fire-js","")}u2("");var c2="firebase",d2="12.6.0";hi(c2,d2,"app");var se="primary",Xl=Symbol("RouteTitle"),Tv=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function yo(t){return new Tv(t)}function bA(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=t[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function hf(t){return new Promise((e,n)=>{t.pipe(pr()).subscribe({next:r=>e(r),error:r=>n(r)})})}function f2(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!rr(t[n],e[n]))return!1;return!0}function rr(t,e){let n=t?wv(t):void 0,r=e?wv(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!MA(t[i],e[i]))return!1;return!0}function wv(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function MA(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function RA(t){return t.length>0?t[t.length-1]:null}function _o(t){return wc(t)?t:wr(t)?Pe(Promise.resolve(t)):re(t)}function NA(t){return wc(t)?hf(t):Promise.resolve(t)}var h2={exact:PA,subset:kA},xA={exact:p2,subset:m2,ignored:()=>!0};function EA(t,e,n){return h2[n.paths](t.root,e.root,n.matrixParams)&&xA[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function p2(t,e){return rr(t,e)}function PA(t,e,n){if(!mo(t.segments,e.segments)||!cf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!PA(t.children[r],e.children[r],n))return!1;return!0}function m2(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>MA(t[n],e[n]))}function kA(t,e,n){return FA(t,e,e.segments,n)}function FA(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!mo(i,n)||e.hasChildren()||!cf(i,n,r))}else if(t.segments.length===n.length){if(!mo(t.segments,n)||!cf(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!kA(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!mo(t.segments,i)||!cf(t.segments,i,r)||!t.children[se]?!1:FA(t.children[se],e,o,r)}}function cf(t,e,n){return e.every((r,i)=>xA[n](t[i].parameters,r.parameters))}var kn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new Ae([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=yo(this.queryParams),this._queryParamMap}toString(){return v2.serialize(this)}},Ae=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return df(this)}},pi=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=yo(this.parameters),this._parameterMap}toString(){return LA(this)}};function g2(t,e){return mo(t,e)&&t.every((n,r)=>rr(n.parameters,e[r].parameters))}function mo(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function y2(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===se&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==se&&(n=n.concat(e(i,r)))}),n}var eu=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>new mi,providedIn:"root"})}return t})(),mi=class{parse(e){let n=new Sv(e);return new kn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Hl(e.root,!0)}`,r=C2(e.queryParams),i=typeof e.fragment=="string"?`#${_2(e.fragment)}`:"";return`${n}${r}${i}`}},v2=new mi;function df(t){return t.segments.map(e=>LA(e)).join("/")}function Hl(t,e){if(!t.hasChildren())return df(t);if(e){let n=t.children[se]?Hl(t.children[se],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==se&&r.push(`${i}:${Hl(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=y2(t,(r,i)=>i===se?[Hl(t.children[se],!1)]:[`${i}:${Hl(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[se]!=null?`${df(t)}/${n[0]}`:`${df(t)}/(${n.join("//")})`}}function OA(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function lf(t){return OA(t).replace(/%3B/gi,";")}function _2(t){return encodeURI(t)}function Dv(t){return OA(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ff(t){return decodeURIComponent(t)}function CA(t){return ff(t.replace(/\+/g,"%20"))}function LA(t){return`${Dv(t.path)}${E2(t.parameters)}`}function E2(t){return Object.entries(t).map(([e,n])=>`;${Dv(e)}=${Dv(n)}`).join("")}function C2(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${lf(n)}=${lf(i)}`).join("&"):`${lf(n)}=${lf(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var I2=/^[^\/()?;#]+/;function _v(t){let e=t.match(I2);return e?e[0]:""}var T2=/^[^\/()?;=#]+/;function w2(t){let e=t.match(T2);return e?e[0]:""}var D2=/^[^=?&#]+/;function S2(t){let e=t.match(D2);return e?e[0]:""}var A2=/^[^&#]+/;function b2(t){let e=t.match(A2);return e?e[0]:""}var Sv=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ae([],{}):new Ae([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[se]=new Ae(e,n)),r}parseSegment(){let e=_v(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new J(4009,!1);return this.capture(e),new pi(ff(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=w2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=_v(this.remaining);i&&(r=i,this.capture(r))}e[ff(n)]=ff(r)}parseQueryParam(e){let n=S2(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=b2(this.remaining);s&&(r=s,this.capture(r))}let i=CA(n),o=CA(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=_v(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new J(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=se);let s=this.parseChildren();n[o??se]=Object.keys(s).length===1&&s[se]?s[se]:new Ae([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new J(4011,!1)}};function VA(t){return t.segments.length>0?new Ae([],{[se]:t}):t}function UA(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=UA(i);if(r===se&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new Ae(t.segments,e);return M2(n)}function M2(t){if(t.numberOfChildren===1&&t.children[se]){let e=t.children[se];return new Ae(t.segments.concat(e.segments),e.children)}return t}function gi(t){return t instanceof kn}function BA(t,e,n=null,r=null,i=new mi){let o=HA(t);return $A(o,e,n,r,i)}function HA(t){let e;function n(o){let s={};for(let l of o.children){let c=n(l);s[l.outlet]=c}let a=new Ae(o.url,s);return o===t&&(e=a),a}let r=n(t.root),i=VA(r);return e??i}function $A(t,e,n,r,i){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return Ev(o,o,o,n,r,i);let s=R2(e);if(s.toRoot())return Ev(o,o,new Ae([],{}),n,r,i);let a=N2(s,o,t),l=a.processChildren?Gl(a.segmentGroup,a.index,s.commands):qA(a.segmentGroup,a.index,s.commands);return Ev(o,a.segmentGroup,l,n,r,i)}function pf(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function jl(t){return typeof t=="object"&&t!=null&&t.outlets}function IA(t,e,n){t||="\u0275";let r=new kn;return r.queryParams={[t]:e},n.parse(n.serialize(r)).queryParams[t]}function Ev(t,e,n,r,i,o){let s={};for(let[c,h]of Object.entries(r??{}))s[c]=Array.isArray(h)?h.map(p=>IA(c,p,o)):IA(c,h,o);let a;t===e?a=n:a=GA(t,e,n);let l=VA(UA(a));return new kn(l,s,i)}function GA(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=GA(o,e,n)}),new Ae(t.segments,r)}var mf=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&pf(r[0]))throw new J(4003,!1);let i=r.find(jl);if(i&&i!==RA(r))throw new J(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function R2(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new mf(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new mf(n,e,r)}var Cs=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function N2(t,e,n){if(t.isAbsolute)return new Cs(e,!0,0);if(!n)return new Cs(e,!1,NaN);if(n.parent===null)return new Cs(n,!0,0);let r=pf(t.commands[0])?0:1,i=n.segments.length-1+r;return x2(n,i,t.numberOfDoubleDots)}function x2(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new J(4005,!1);i=r.segments.length}return new Cs(r,!1,i-o)}function P2(t){return jl(t[0])?t[0].outlets:{[se]:t}}function qA(t,e,n){if(t??=new Ae([],{}),t.segments.length===0&&t.hasChildren())return Gl(t,e,n);let r=k2(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new Ae(t.segments.slice(0,r.pathIndex),{});return o.children[se]=new Ae(t.segments.slice(r.pathIndex),t.children),Gl(o,0,i)}else return r.match&&i.length===0?new Ae(t.segments,{}):r.match&&!t.hasChildren()?Av(t,e,n):r.match?Gl(t,0,i):Av(t,e,n)}function Gl(t,e,n){if(n.length===0)return new Ae(t.segments,{});{let r=P2(n),i={};if(Object.keys(r).some(o=>o!==se)&&t.children[se]&&t.numberOfChildren===1&&t.children[se].segments.length===0){let o=Gl(t.children[se],e,n);return new Ae(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=qA(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new Ae(t.segments,i)}}function k2(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],a=n[r];if(jl(a))break;let l=`${a}`,c=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!wA(l,c,s))return o;r+=2}else{if(!wA(l,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Av(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(jl(o)){let l=F2(o.outlets);return new Ae(r,l)}if(i===0&&pf(n[0])){let l=t.segments[e];r.push(new pi(l.path,TA(n[0]))),i++;continue}let s=jl(o)?o.outlets[se]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&pf(a)?(r.push(new pi(s,TA(a))),i+=2):(r.push(new pi(s,{})),i++)}return new Ae(r,{})}function F2(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Av(new Ae([],{}),0,r))}),e}function TA(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function wA(t,e,n){return t==n.path&&rr(e,n.parameters)}var ql="imperative",pt=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(pt||{}),tn=class{id;url;constructor(e,n){this.id=e,this.url=n}},vo=class extends tn{type=pt.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},or=class extends tn{urlAfterRedirects;type=pt.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ht=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Ht||{}),Wl=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(Wl||{}),ir=class extends tn{reason;code;type=pt.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Mr=class extends tn{reason;code;type=pt.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},Ts=class extends tn{error;target;type=pt.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Kl=class extends tn{urlAfterRedirects;state;type=pt.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gf=class extends tn{urlAfterRedirects;state;type=pt.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yf=class extends tn{urlAfterRedirects;state;shouldActivate;type=pt.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},vf=class extends tn{urlAfterRedirects;state;type=pt.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},_f=class extends tn{urlAfterRedirects;state;type=pt.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ef=class{route;type=pt.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Cf=class{route;type=pt.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},If=class{snapshot;type=pt.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Tf=class{snapshot;type=pt.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wf=class{snapshot;type=pt.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Df=class{snapshot;type=pt.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Jl=class{},ws=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function O2(t){return!(t instanceof Jl)&&!(t instanceof ws)}function L2(t,e){return t.providers&&!t._injector&&(t._injector=Tl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Pn(t){return t.outlet||se}function V2(t,e){let n=t.filter(r=>Pn(r)===e);return n.push(...t.filter(r=>Pn(r)!==e)),n}function As(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Sf=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return As(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new bs(this.rootInjector)}},bs=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Sf(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(ne(et))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Af=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=bv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=bv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Mv(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Mv(e,this._root).map(n=>n.value)}};function bv(t,e){if(t===e.value)return e;for(let n of e.children){let r=bv(t,n);if(r)return r}return null}function Mv(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Mv(t,n);if(r.length)return r.unshift(e),r}return[]}var en=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Es(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ql=class extends Af{snapshot;constructor(e,n){super(e),this.snapshot=n,Fv(this,e)}toString(){return this.snapshot.toString()}};function zA(t){let e=U2(t),n=new vt([new pi("",{})]),r=new vt({}),i=new vt({}),o=new vt({}),s=new vt(""),a=new Rr(n,r,o,s,i,se,t,e.root);return a.snapshot=e.root,new Ql(new en(a,[]),e)}function U2(t){let e={},n={},r={},o=new go([],e,r,"",n,se,t,null,{});return new Yl("",new en(o,[]))}var Rr=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ce(c=>c[Xl]))??re(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ce(e=>yo(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ce(e=>yo(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function bf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:H(H({},e.params),t.params),data:H(H({},e.data),t.data),resolve:H(H(H(H({},t.data),e.data),i?.data),t._resolvedData)}:r={params:H({},t.params),data:H({},t.data),resolve:H(H({},t.data),t._resolvedData??{})},i&&WA(i)&&(r.resolve[Xl]=i.title),r}var go=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Xl]}constructor(e,n,r,i,o,s,a,l,c){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=yo(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=yo(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Yl=class extends Af{url;constructor(e,n){super(n),this.url=e,Fv(this,n)}toString(){return jA(this._root)}};function Fv(t,e){e.value._routerState=t,e.children.forEach(n=>Fv(t,n))}function jA(t){let e=t.children.length>0?` { ${t.children.map(jA).join(", ")} } `:"";return`${t.value}${e}`}function Cv(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,rr(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),rr(e.params,n.params)||t.paramsSubject.next(n.params),f2(e.url,n.url)||t.urlSubject.next(n.url),rr(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Rv(t,e){let n=rr(t.params,e.params)&&g2(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Rv(t.parent,e.parent))}function WA(t){return typeof t.title=="string"||t.title===null}var KA=new Q(""),tu=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=se;activateEvents=new Je;deactivateEvents=new Je;attachEvents=new Je;detachEvents=new Je;routerOutletData=f0(void 0,{});parentContexts=k(bs);location=k(Il);changeDetector=k(gn);inputBinder=k(xf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new J(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new J(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new J(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new J(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Nv(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ze({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Cr]})}return t})(),Nv=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===Rr?this.route:e===bs?this.childContexts:e===KA?this.outletData:this.parent.get(e,n)}},xf=new Q("");var Ov=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=xe({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&ge(0,"router-outlet")},dependencies:[tu],encapsulation:2})}return t})();function Lv(t){let e=t.children&&t.children.map(Lv),n=e?he(H({},t),{children:e}):H({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==se&&(n.component=Ov),n}function B2(t,e,n){let r=Zl(t,e._root,n?n._root:void 0);return new Ql(r,e)}function Zl(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=H2(t,e,n);return new en(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Zl(t,a)),s}}let r=$2(e.value),i=e.children.map(o=>Zl(t,o));return new en(r,i)}}function H2(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Zl(t,r,i);return Zl(t,r)})}function $2(t){return new Rr(new vt(t.url),new vt(t.params),new vt(t.queryParams),new vt(t.fragment),new vt(t.data),t.outlet,t.component,t)}var Ds=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},JA="ngNavigationCancelingError";function Mf(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=gi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=QA(!1,Ht.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function QA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[JA]=!0,n.cancellationCode=e,n}function G2(t){return YA(t)&&gi(t.url)}function YA(t){return!!t&&t[JA]}var q2=(t,e,n,r)=>ce(i=>(new xv(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),xv=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Cv(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Es(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Es(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Es(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Es(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Df(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Tf(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(Cv(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Cv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Rf=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Is=class{component;route;constructor(e,n){this.component=e,this.route=n}};function z2(t,e,n){let r=t._root,i=e?e._root:null;return $l(r,i,n,[r.value])}function j2(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ms(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!Lm(t)?t:e.get(t):r}function $l(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Es(e);return t.children.forEach(s=>{W2(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>zl(a,n.getContext(s),i)),i}function W2(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=K2(s,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Rf(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?$l(t,e,a?a.children:null,r,i):$l(t,e,n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Is(a.outlet.component,s))}else s&&zl(e,a,i),i.canActivateChecks.push(new Rf(r)),o.component?$l(t,null,a?a.children:null,r,i):$l(t,null,n,r,i);return i}function K2(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!mo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!mo(t.url,e.url)||!rr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rv(t,e)||!rr(t.queryParams,e.queryParams);case"paramsChange":default:return!Rv(t,e)}}function zl(t,e,n){let r=Es(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?zl(s,e.children.getContext(o),n):zl(s,null,n):zl(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Is(e.outlet.component,i)):n.canDeactivateChecks.push(new Is(null,i)):n.canDeactivateChecks.push(new Is(null,i))}function nu(t){return typeof t=="function"}function J2(t){return typeof t=="boolean"}function Q2(t){return t&&nu(t.canLoad)}function Y2(t){return t&&nu(t.canActivate)}function Z2(t){return t&&nu(t.canActivateChild)}function X2(t){return t&&nu(t.canDeactivate)}function eU(t){return t&&nu(t.canMatch)}function ZA(t){return t instanceof Ui||t?.name==="EmptyError"}var uf=Symbol("INITIAL_VALUE");function Ss(){return Pt(t=>gm(t.map(e=>e.pipe(on(1),Em(uf)))).pipe(ce(e=>{for(let n of e)if(n!==!0){if(n===uf)return uf;if(n===!1||tU(n))return n}return!0}),rn(e=>e!==uf),on(1)))}function tU(t){return gi(t)||t instanceof Ds}function XA(t){return t.aborted?re(void 0).pipe(on(1)):new pe(e=>{let n=()=>{e.next(),e.complete()};return t.addEventListener("abort",n),()=>t.removeEventListener("abort",n)})}function eb(t){return qa(XA(t))}function nU(t,e){return Xe(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?re(he(H({},n),{guardsResult:!0})):rU(s,r,i,t).pipe(Xe(a=>a&&J2(a)?iU(r,o,t,e):re(a)),ce(a=>he(H({},n),{guardsResult:a})))})}function rU(t,e,n,r){return Pe(t).pipe(Xe(i=>uU(i.component,i.route,n,e,r)),pr(i=>i!==!0,!0))}function iU(t,e,n,r){return Pe(e).pipe(Wo(i=>Kr(sU(i.route.parent,r),oU(i.route,r),lU(t,i.path,n),aU(t,i.route,n))),pr(i=>i!==!0,!0))}function oU(t,e){return t!==null&&e&&e(new wf(t)),re(!0)}function sU(t,e){return t!==null&&e&&e(new If(t)),re(!0)}function aU(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return re(!0);let i=r.map(o=>Ha(()=>{let s=As(e)??n,a=Ms(o,s),l=Y2(a)?a.canActivate(e,t):Et(s,()=>a(e,t));return _o(l).pipe(pr())}));return re(i).pipe(Ss())}function lU(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>j2(s)).filter(s=>s!==null).map(s=>Ha(()=>{let a=s.guards.map(l=>{let c=As(s.node)??n,h=Ms(l,c),p=Z2(h)?h.canActivateChild(r,t):Et(c,()=>h(r,t));return _o(p).pipe(pr())});return re(a).pipe(Ss())}));return re(o).pipe(Ss())}function uU(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return re(!0);let s=o.map(a=>{let l=As(e)??i,c=Ms(a,l),h=X2(c)?c.canDeactivate(t,e,n,r):Et(l,()=>c(t,e,n,r));return _o(h).pipe(pr())});return re(s).pipe(Ss())}function cU(t,e,n,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return re(!0);let s=o.map(a=>{let l=Ms(a,t),c=Q2(l)?l.canLoad(e,n):Et(t,()=>l(e,n)),h=_o(c);return i?h.pipe(eb(i)):h});return re(s).pipe(Ss(),tb(r))}function tb(t){return dm(kt(e=>{if(typeof e!="boolean")throw Mf(t,e)}),ce(e=>e===!0))}function dU(t,e,n,r,i){let o=e.canMatch;if(!o||o.length===0)return re(!0);let s=o.map(a=>{let l=Ms(a,t),c=eU(l)?l.canMatch(e,n):Et(t,()=>l(e,n)),h=_o(c);return i?h.pipe(eb(i)):h});return re(s).pipe(Ss(),tb(r))}var po=class nb extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,nb.prototype)}},Pv=class rb extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,rb.prototype)}};function fU(t){throw new J(4e3,!1)}function hU(t){throw QA(!1,Ht.GuardRejected)}var pU=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}async lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[se])throw fU(`${e.redirectTo}`);i=i.children[se]}}async applyRedirectCommands(e,n,r,i,o){let s=await mU(n,i,o);if(s instanceof kn)throw new Pv(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Pv(a);return a}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new kn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,r,i)}),new Ae(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new J(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function mU(t,e,n){if(typeof t=="string")return Promise.resolve(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,params:c,data:h,title:p}=e;return hf(_o(Et(n,()=>r({params:c,data:h,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:l,title:p}))))}var kv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function gU(t,e,n,r,i,o){let s=ib(t,e,n);return s.matched?(r=L2(e,r),dU(r,e,n,i,o).pipe(ce(a=>a===!0?s:H({},kv)))):re(s)}function ib(t,e,n){if(e.path==="**")return yU(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?H({},kv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||bA)(n,t,e);if(!i)return H({},kv);let o={};Object.entries(i.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=i.consumed.length>0?H(H({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function yU(t){return{matched:!0,parameters:t.length>0?RA(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function DA(t,e,n,r){return n.length>0&&EU(t,n,r)?{segmentGroup:new Ae(e,_U(r,new Ae(n,t.children))),slicedSegments:[]}:n.length===0&&CU(t,n,r)?{segmentGroup:new Ae(t.segments,vU(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ae(t.segments,t.children),slicedSegments:n}}function vU(t,e,n,r){let i={};for(let o of n)if(Pf(t,e,o)&&!r[Pn(o)]){let s=new Ae([],{});i[Pn(o)]=s}return H(H({},r),i)}function _U(t,e){let n={};n[se]=e;for(let r of t)if(r.path===""&&Pn(r)!==se){let i=new Ae([],{});n[Pn(r)]=i}return n}function EU(t,e,n){return n.some(r=>Pf(t,e,r)&&Pn(r)!==se)}function CU(t,e,n){return n.some(r=>Pf(t,e,r))}function Pf(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function IU(t,e,n){return e.length===0&&!t.children[n]}var TU=class{};async function wU(t,e,n,r,i,o,s="emptyOnly",a){return new SU(t,e,n,r,i,s,o,a).recognize()}var DU=31,SU=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,a,l){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=l,this.applyRedirects=new pU(this.urlSerializer,this.urlTree)}noMatchError(e){return new J(4002,`'${e.segmentGroup}'`)}async recognize(){let e=DA(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(e),i=new en(r,n),o=new Yl("",i),s=BA(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let n=new go([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),se,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,se,n),rootSnapshot:n}}catch(r){if(r instanceof Pv)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof po?this.noMatchError(r):r}}async processSegmentGroup(e,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,n,r,o);let s=await this.processSegment(e,n,r,r.segments,i,!0,o);return s instanceof en?[s]:[]}async processChildren(e,n,r,i){let o=[];for(let l of Object.keys(r.children))l==="primary"?o.unshift(l):o.push(l);let s=[];for(let l of o){let c=r.children[l],h=V2(n,l),p=await this.processSegmentGroup(e,h,c,l,i);s.push(...p)}let a=ob(s);return AU(a),a}async processSegment(e,n,r,i,o,s,a){for(let l of n)try{return await this.processSegmentAgainstRoute(l._injector??e,n,l,r,i,o,s,a)}catch(c){if(c instanceof po||ZA(c))continue;throw c}if(IU(r,i,o))return new TU;throw new po(r)}async processSegmentAgainstRoute(e,n,r,i,o,s,a,l){if(Pn(r)!==s&&(s===se||!Pf(i,o,r)))throw new po(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,l);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,l);throw new po(i)}async expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,a){let{matched:l,parameters:c,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=ib(n,i,o);if(!l)throw new po(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>DU&&(this.allowRedirects=!1));let v=new go(o,c,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,SA(i),Pn(i),i.component??i._loadedComponent??null,i,AA(i)),I=bf(v,a,this.paramsInheritanceStrategy);if(v.params=Object.freeze(I.params),v.data=Object.freeze(I.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let b=await this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,v,e),A=await this.applyRedirects.lineralizeSegments(i,b);return this.processSegment(e,r,n,A.concat(m),s,!1,a)}async matchSegmentAgainstRoute(e,n,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await hf(gU(n,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!a?.matched)throw new po(n);e=r._injector??e;let{routes:l}=await this.getChildConfig(e,r,i),c=r._loadedInjector??e,{parameters:h,consumedSegments:p,remainingSegments:m}=a,v=new go(p,h,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,SA(r),Pn(r),r.component??r._loadedComponent??null,r,AA(r)),I=bf(v,s,this.paramsInheritanceStrategy);v.params=Object.freeze(I.params),v.data=Object.freeze(I.data);let{segmentGroup:b,slicedSegments:A}=DA(n,p,m,l);if(A.length===0&&b.hasChildren()){let L=await this.processChildren(c,l,b,v);return new en(v,L)}if(l.length===0&&A.length===0)return new en(v,[]);let N=Pn(r)===o,O=await this.processSegment(c,l,b,A,N?se:o,!0,v);return new en(v,O instanceof en?[O]:[])}async getChildConfig(e,n,r){if(n.children)return{routes:n.children,injector:e};if(n.loadChildren){if(n._loadedRoutes!==void 0)return{routes:n._loadedRoutes,injector:n._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await hf(cU(e,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,o}throw hU(n)}return{routes:[],injector:e}}};function AU(t){t.sort((e,n)=>e.value.outlet===se?-1:n.value.outlet===se?1:e.value.outlet.localeCompare(n.value.outlet))}function bU(t){let e=t.value.routeConfig;return e&&e.path===""}function ob(t){let e=[],n=new Set;for(let r of t){if(!bU(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=ob(r.children);e.push(new en(r.value,i))}return e.filter(r=>!n.has(r))}function SA(t){return t.data||{}}function AA(t){return t.resolve||{}}var MU=new Q("",{factory:()=>wU});function RU(t,e,n,r,i,o,s){let a=t.get(MU);return Xe(l=>re(l).pipe(Pt(c=>a(t,e,n,r,c.extractedUrl,i,o,s)),ce(({state:c,tree:h})=>he(H({},l),{targetSnapshot:c,urlAfterRedirects:h}))))}function NU(t,e){return Xe(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return re(n);let o=new Set(i.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of sb(l))s.add(c);let a=0;return Pe(s).pipe(Wo(l=>o.has(l)?xU(l,r,t,e):(l.data=bf(l,l.parent,t).resolve,re(void 0))),kt(()=>a++),bc(1),Xe(l=>a===s.size?re(n):Gt))})}function sb(t){let e=t.children.map(n=>sb(n)).flat();return[t,...e]}function xU(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!WA(i)&&(o[Xl]=i.title),Ha(()=>(t.data=bf(t,t.parent,n).resolve,PU(o,t,e,r).pipe(ce(s=>(t._resolvedData=s,t.data=H(H({},t.data),s),null)))))}function PU(t,e,n,r){let i=wv(t);if(i.length===0)return re({});let o={};return Pe(i).pipe(Xe(s=>kU(t[s],e,n,r).pipe(pr(),kt(a=>{if(a instanceof Ds)throw Mf(new mi,a);o[s]=a}))),bc(1),ce(()=>o),Ga(s=>ZA(s)?Gt:mm(s)))}function kU(t,e,n,r){let i=As(e)??r,o=Ms(t,i),s=o.resolve?o.resolve(e,n):Et(i,()=>o(e,n));return _o(s)}function Iv(t){return Pt(e=>{let n=t(e);return n?Pe(n).pipe(ce(()=>e)):re(e)})}var Vv=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===se);return r}getResolvedTitleForRoute(n){return n.data[Xl]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>k(ab),providedIn:"root"})}return t})(),ab=(()=>{class t extends Vv{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(ne(H0))};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Rs=new Q("",{factory:()=>({})}),ru=new Q(""),lb=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=k(ky);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await NA(Et(n,()=>r.loadComponent())),s=await db(cb(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await ub(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();async function ub(t,e,n,r){let i=await NA(Et(n,()=>t.loadChildren())),o=await db(cb(i)),s;o instanceof Ld||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(t);let a,l,c=!1;return Array.isArray(s)?(l=s,c=!0):(a=s.create(n).injector,l=a.get(ru,[],{optional:!0,self:!0}).flat()),{routes:l.map(Lv),injector:a}}function FU(t){return t&&typeof t=="object"&&"default"in t}function cb(t){return FU(t)?t.default:t}async function db(t){return t}var kf=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>k(OU),providedIn:"root"})}return t})(),OU=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),fb=new Q("");var LU=()=>{},hb=new Q(""),pb=(()=>{class t{currentNavigation=Yt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Yt(null,{});events=new qe;transitionAbortWithErrorSubject=new qe;configLoader=k(lb);environmentInjector=k(et);destroyRef=k(Mn);urlSerializer=k(eu);rootContexts=k(bs);location=k(fs);inputBindingEnabled=k(xf,{optional:!0})!==null;titleStrategy=k(Vv);options=k(Rs,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=k(kf);createViewTransition=k(fb,{optional:!0});navigationErrorHandler=k(hb,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>re(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Ef(i)),r=i=>this.events.next(new Cf(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;nt(()=>{this.transitions?.next(he(H({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new vt(null),this.transitions.pipe(rn(r=>r!==null),Pt(r=>{let i=!1,o=new AbortController;return re(r).pipe(Pt(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Ht.SupersededByNewNavigation),Gt;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?he(H({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let l=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),c=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!l&&c!=="reload")return this.events.next(new Mr(s.id,this.urlSerializer.serialize(s.rawUrl),"",Wl.IgnoredSameUrlNavigation)),s.resolve(!1),Gt;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return re(s).pipe(Pt(h=>(this.events.next(new vo(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),h.id!==this.navigationId?Gt:Promise.resolve(h))),RU(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),kt(h=>{r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=h.urlAfterRedirects,m));let p=new Kl(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:h,extractedUrl:p,source:m,restoredState:v,extras:I}=s,b=new vo(h,this.urlSerializer.serialize(p),m,v);this.events.next(b);let A=zA(this.rootComponentType).snapshot;return this.currentTransition=r=he(H({},s),{targetSnapshot:A,urlAfterRedirects:p,extras:he(H({},I),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(N=>(N.finalUrl=p,N)),re(r)}else return this.events.next(new Mr(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Wl.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Gt}),kt(s=>{let a=new gf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),ce(s=>(this.currentTransition=r=he(H({},s),{guards:z2(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),nU(this.environmentInjector,s=>this.events.next(s)),kt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Mf(this.urlSerializer,s.guardsResult);let a=new yf(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),rn(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Ht.GuardRejected),!1)),Iv(s=>{if(s.guards.canActivateChecks.length!==0)return re(s).pipe(kt(a=>{let l=new vf(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),Pt(a=>{let l=!1;return re(a).pipe(NU(this.paramsInheritanceStrategy,this.environmentInjector),kt({next:()=>l=!0,complete:()=>{l||this.cancelNavigationTransition(a,"",Ht.NoDataFromResolver)}}))}),kt(a=>{let l=new _f(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),Iv(s=>{let a=c=>{let h=[];if(c.routeConfig?._loadedComponent)c.component=c.routeConfig?._loadedComponent;else if(c.routeConfig?.loadComponent){let p=As(c)??this.environmentInjector;h.push(this.configLoader.loadComponent(p,c.routeConfig).then(m=>{c.component=m}))}for(let p of c.children)h.push(...a(p));return h},l=a(s.targetSnapshot.root);return l.length===0?re(s):Pe(Promise.all(l).then(()=>s))}),Iv(()=>this.afterPreactivation()),Pt(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,l=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return l?Pe(l).pipe(ce(()=>r)):re(r)}),ce(s=>{let a=B2(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=he(H({},s),{targetRouterState:a}),this.currentNavigation.update(l=>(l.targetRouterState=a,l)),r}),kt(()=>{this.events.next(new Jl)}),q2(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),on(1),qa(XA(o.signal).pipe(rn(()=>!i&&!r.targetRouterState),kt(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Ht.Aborted)}))),kt({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=LU,a)),this.lastSuccessfulNavigation.set(nt(this.currentNavigation)),this.events.next(new or(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),qa(this.transitionAbortWithErrorSubject.pipe(kt(s=>{throw s}))),Gn(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Ht.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ga(s=>{if(this.destroyed)return r.resolve(!1),Gt;if(i=!0,YA(s))this.events.next(new ir(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),G2(s)?this.events.next(new ws(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new Ts(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let l=Et(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(l instanceof Ds){let{message:c,cancellationCode:h}=Mf(this.urlSerializer,l);this.events.next(new ir(r.id,this.urlSerializer.serialize(r.extractedUrl),c,h)),this.events.next(new ws(l.redirectTo,l.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(l){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(l)}}return Gt}))}))}cancelNavigationTransition(n,r,i){let o=new ir(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=nt(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function VU(t){return t!==ql}var mb=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>k(UU),providedIn:"root"})}return t})(),Nf=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},UU=(()=>{class t extends Nf{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ut(t)))(i||t)}})();static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Uv=(()=>{class t{urlSerializer=k(eu);options=k(Rs,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=k(fs);urlHandlingStrategy=k(kf);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new kn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof kn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=zA(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:()=>k(gb),providedIn:"root"})}return t})(),gb=(()=>{class t extends Uv{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof vo?this.updateStateMemento():n instanceof Mr?this.commitTransition(r):n instanceof Kl?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Jl?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof ir&&n.code!==Ht.SupersededByNewNavigation&&n.code!==Ht.Redirect?this.restoreHistory(r):n instanceof Ts?this.restoreHistory(r,!0):n instanceof or&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,l=H(H({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",l)}else{let a=H(H({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ut(t)))(i||t)}})();static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Bv(t,e){t.events.pipe(rn(n=>n instanceof or||n instanceof ir||n instanceof Ts||n instanceof Mr),ce(n=>n instanceof or||n instanceof Mr?0:(n instanceof ir?n.code===Ht.Redirect||n.code===Ht.SupersededByNewNavigation:!1)?2:1),rn(n=>n!==2),on(1)).subscribe(()=>{e()})}var BU={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},HU={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},iu=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=k(My);stateManager=k(Uv);options=k(Rs,{optional:!0})||{};pendingTasks=k(Er);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=k(pb);urlSerializer=k(eu);location=k(fs);urlHandlingStrategy=k(kf);injector=k(et);_events=new qe;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=k(mb);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=k(ru,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!k(xf,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new lt;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=nt(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ir&&r.code!==Ht.Redirect&&r.code!==Ht.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof or)this.navigated=!0;else if(r instanceof ws){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=H({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||VU(i.source)},s);this.scheduleNavigation(a,ql,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}O2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ql,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let l=H({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(l=>{this.disposed||this.injector.get(zt)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return nt(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Lv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=H(H({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=HA(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return $A(p,n,h,c??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=gi(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,ql,null,r)}navigate(n,r={skipLocationChange:!1}){return $U(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(qi(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=H({},BU):r===!1?i=H({},HU):i=r,gi(n))return EA(this.currentUrlTree,n,i);let o=this.parseUrl(n);return EA(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,l,c;s?(a=s.resolve,l=s.reject,c=s.promise):c=new Promise((p,m)=>{a=p,l=m});let h=this.pendingTasks.add();return Bv(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function $U(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new J(4008,!1)}var yi=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Yt(null,{});get href(){return nt(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new qe;applicationErrorHandler=k(zt);options=k(Rs,{optional:!0});constructor(n,r,i,o,s,a){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.reactiveHref.set(k(new zd("href"),{optional:!0}));let l=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area"||!!(typeof customElements=="object"&&customElements.get(l)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof or&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(gi(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l)?.catch(c=>{this.applicationErrorHandler(c)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:gi(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(we(iu),we(Rr),vl("tabindex"),we(Tr),we(Zn),we(ds))};static \u0275dir=ze({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&Fe("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&si("href",i.reactiveHref(),hy)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",cs],skipLocationChange:[2,"skipLocationChange","skipLocationChange",cs],replaceUrl:[2,"replaceUrl","replaceUrl",cs],routerLink:"routerLink"},features:[Cr]})}return t})();var qU=new Q("");function Hv(t,...e){return yr([{provide:ru,multi:!0,useValue:t},[],{provide:Rr,useFactory:zU},{provide:Ud,multi:!0,useFactory:jU},e.map(n=>n.\u0275providers)])}function zU(){return k(iu).routerState.root}function jU(){let t=k(an);return e=>{let n=t.get(oi);if(e!==n.components[0])return;let r=t.get(iu),i=t.get(WU);t.get(KU)===1&&r.initialNavigation(),t.get(JU,null,{optional:!0})?.setUpPreloading(),t.get(qU,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var WU=new Q("",{factory:()=>new qe}),KU=new Q("",{factory:()=>1});var JU=new Q("");var Ff=class t{tech;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=xe({type:t,selectors:[["app-tech-card"]],hostAttrs:[1,"col-xxl-4","col-md-6","mt-4","px-4","py-3"],inputs:{tech:"tech"},decls:9,vars:6,consts:[[1,"text-center"],["target","_blank",3,"href"],["height","55",3,"src","alt"],[1,"mt-2","mb-2"],["target","_blank",1,"text-decoration-none","text-dark",3,"href"],[1,"text-muted"]],template:function(n,r){n&1&&(Ue(0,"div",0)(1,"a",1),jt(2,"img",2),Be(),Ue(3,"div")(4,"h5",3)(5,"a",4),B(6),Be()(),Ue(7,"p",5),B(8),Be()()()),n&2&&(z(),ui("href",r.tech.link,us),z(),ui("src",r.tech.image,us)("alt",r.tech.title),z(3),ui("href",r.tech.link,us),z(),Sl(" ",r.tech.title," "),z(2),Ze(r.tech.description))},encapsulation:2})};var QU=(t,e)=>e.title;function YU(t,e){if(t&1&&ge(0,"app-tech-card",49),t&2){let n=e.$implicit;De("tech",n)}}var Of=class t{technologies=[{title:"Angular",description:"Framework de desarrollo frontend en el que se basa la arquitectura de la aplicaci\xF3n web. Gestiona aspectos como la navegaci\xF3n y la interacci\xF3n con el usuario.",image:"assets/images/techs/angular.png",link:"https://angular.dev/"},{title:"Firebase",description:"Plataforma backend en la nube utilizada para la persistencia de datos, autenticaci\xF3n de usuarios y sincronizaci\xF3n en tiempo real.",image:"assets/images/techs/firebase.png",link:"https://firebase.google.com/"},{title:"Bootstrap",description:"Framework CSS empleado para construir una interfaz adaptable, consistente y accesible en distintos dispositivos.",image:"assets/images/techs/bootstrap.png",link:"https://getbootstrap.com/"},{title:"Gemini",description:"API de inteligencia artificial de Google utilizada para generaci\xF3n de texto a trav\xE9s de la interpretaci\xF3n de contenido de usuarios.",image:"assets/images/techs/gemini.png",link:"https://ai.google.dev/gemini-api/docs?hl=es-419"},{title:"Text2Color",description:"API de conversi\xF3n de inputs en lenguaje natural a paletas de colores adaptadas a conceptos creativos.",image:"assets/images/techs/text-2-color.png",link:"https://text2color.com/"},{title:"The Color API",description:"API de generaci\xF3n de esquemas crom\xE1ticos a partir de colores determinados.",image:"assets/images/techs/ai.png",link:"https://www.thecolorapi.com/"},{title:"GitHub",description:"Plataforma de control de versiones utilizada para la gesti\xF3n del c\xF3digo fuente, documentaci\xF3n del proyecto y colaboraci\xF3n.",image:"assets/images/techs/github.png",link:"https://github.com/alvaro-ortiz-fernandez/CreativIA"},{title:"Visual Studio Code",description:"Entorno de desarrollo empleado para la implementaci\xF3n del proyecto, con soporte para depuraci\xF3n e integraci\xF3n con Git.",image:"assets/images/techs/vscode.png",link:"https://code.visualstudio.com/"}];static \u0275fac=function(n){return new(n||t)};static \u0275cmp=xe({type:t,selectors:[["app-home"]],decls:126,vars:0,consts:[[1,"row","pb-5","gx-5","align-items-center"],[1,"col-xxl-5"],[1,"text-center","text-xxl-start"],[1,"badge","bg-gradient-primary-to-secondary","text-white","mb-4"],[1,"text-uppercase"],[1,"fs-3","fw-light","text-muted"],[1,"display-3","fw-bolder","mt-3","mb-5"],[1,"text-gradient","d-inline"],[1,"d-grid","gap-3","d-sm-flex","justify-content-sm-center","justify-content-xxl-start","mb-3"],["routerLink","/componer",1,"btn","btn-primary","btn-lg","px-4","py-3","me-sm-3","fs-6","fw-bolder"],[1,"px-2"],[1,"bi","bi-stars","ms-2"],["routerLink","/library",1,"btn","btn-outline-dark","btn-lg","px-4","py-3","fs-6","fw-bolder"],[1,"bi","bi-journals","ms-2"],[1,"col-xxl-7"],[1,"d-flex","justify-content-center","mt-5","mt-xxl-0"],[1,"profile","bg-gradient-primary-to-secondary"],["src","assets/images/logo-home.png","alt","CreativIA",1,"profile-img"],[1,"dots-1"],["version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","viewBox","0 0 191.6 1215.4",0,"xml","space","preserve",2,"enable-background","new 0 0 191.6 1215.4"],["transform","translate(0.000000,1280.000000) scale(0.100000,-0.100000)"],["d","M227.7,12788.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C383.7,12801.6,289.7,12808.6,227.7,12788.6z"],["d","M1507.7,12788.6c-151-50-253-216-222-362c25-119,136-230,254-255c194-41,395,142,375,339c-11,105-90,213-190,262        C1663.7,12801.6,1569.7,12808.6,1507.7,12788.6z"],["d","M227.7,11508.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C383.7,11521.6,289.7,11528.6,227.7,11508.6z"],["d","M1507.7,11508.6c-151-50-253-216-222-362c25-119,136-230,254-255c194-41,395,142,375,339c-11,105-90,213-190,262        C1663.7,11521.6,1569.7,11528.6,1507.7,11508.6z"],["d","M227.7,10228.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C383.7,10241.6,289.7,10248.6,227.7,10228.6z"],["d","M1507.7,10228.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C1663.7,10241.6,1569.7,10248.6,1507.7,10228.6z"],["d","M227.7,8948.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C383.7,8961.6,289.7,8968.6,227.7,8948.6z"],["d","M1507.7,8948.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C1663.7,8961.6,1569.7,8968.6,1507.7,8948.6z"],["d","M227.7,7668.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C383.7,7681.6,289.7,7688.6,227.7,7668.6z"],["d","M1507.7,7668.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C1663.7,7681.6,1569.7,7688.6,1507.7,7668.6z"],["d","M227.7,6388.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C383.7,6401.6,289.7,6408.6,227.7,6388.6z"],["d","M1507.7,6388.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C1663.7,6401.6,1569.7,6408.6,1507.7,6388.6z"],["d","M227.7,5108.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C383.7,5121.6,289.7,5128.6,227.7,5108.6z"],["d","M1507.7,5108.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C1663.7,5121.6,1569.7,5128.6,1507.7,5108.6z"],["d","M227.7,3828.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C383.7,3841.6,289.7,3848.6,227.7,3828.6z"],["d","M1507.7,3828.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C1663.7,3841.6,1569.7,3848.6,1507.7,3828.6z"],["d","M227.7,2548.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C383.7,2561.6,289.7,2568.6,227.7,2548.6z"],["d","M1507.7,2548.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C1663.7,2561.6,1569.7,2568.6,1507.7,2548.6z"],["d","M227.7,1268.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C383.7,1281.6,289.7,1288.6,227.7,1268.6z"],["d","M1507.7,1268.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C1663.7,1281.6,1569.7,1288.6,1507.7,1268.6z"],[1,"dots-2"],[1,"dots-3"],[1,"dots-4"],[1,"row","mt-2","g-xxl-5","g-4"],[1,"col-sm-12"],[1,"landing-title","text-center","mb-0"],[1,"lead","fw-light","mt-3"],[1,"row","px-0","align-items-center","justify-content-center"],[3,"tech"]],template:function(n,r){n&1&&(P(0,"section",0)(1,"article",1)(2,"div",2)(3,"div",3)(4,"div",4),B(5,"IA \xB7 Color \xB7 Creatividad visual"),F()(),P(6,"div",5),B(7,"Explora, analiza y crea paletas de color a partir de ideas o im\xE1genes"),F(),P(8,"h1",6)(9,"span",7),B(10,"Transforma emociones en color"),F()(),P(11,"div",8)(12,"a",9)(13,"span",10),B(14,"Crear paleta"),F(),ge(15,"i",11),F(),P(16,"a",12)(17,"span",10),B(18,"Explorar biblioteca"),F(),ge(19,"i",13),F()()()(),P(20,"article",14)(21,"div",15)(22,"div",16),ge(23,"img",17),P(24,"div",18),eo(),P(25,"svg",19)(26,"g",20),ge(27,"path",21)(28,"path",22)(29,"path",23)(30,"path",24)(31,"path",25)(32,"path",26)(33,"path",27)(34,"path",28)(35,"path",29)(36,"path",30)(37,"path",31)(38,"path",32)(39,"path",33)(40,"path",34)(41,"path",35)(42,"path",36)(43,"path",37)(44,"path",38)(45,"path",39)(46,"path",40),F()()(),to(),P(47,"div",41),eo(),P(48,"svg",19)(49,"g",20),ge(50,"path",21)(51,"path",22)(52,"path",23)(53,"path",24)(54,"path",25)(55,"path",26)(56,"path",27)(57,"path",28)(58,"path",29)(59,"path",30)(60,"path",31)(61,"path",32)(62,"path",33)(63,"path",34)(64,"path",35)(65,"path",36)(66,"path",37)(67,"path",38)(68,"path",39)(69,"path",40),F()()(),to(),P(70,"div",42),eo(),P(71,"svg",19)(72,"g",20),ge(73,"path",21)(74,"path",22)(75,"path",23)(76,"path",24)(77,"path",25)(78,"path",26)(79,"path",27)(80,"path",28)(81,"path",29)(82,"path",30)(83,"path",31)(84,"path",32)(85,"path",33)(86,"path",34)(87,"path",35)(88,"path",36)(89,"path",37)(90,"path",38)(91,"path",39)(92,"path",40),F()()(),to(),P(93,"div",43),eo(),P(94,"svg",19)(95,"g",20),ge(96,"path",21)(97,"path",22)(98,"path",23)(99,"path",24)(100,"path",25)(101,"path",26)(102,"path",27)(103,"path",28)(104,"path",29)(105,"path",30)(106,"path",31)(107,"path",32)(108,"path",33)(109,"path",34)(110,"path",35)(111,"path",36)(112,"path",37)(113,"path",38)(114,"path",39)(115,"path",40),F()()()()()()(),to(),P(116,"section",44)(117,"div",45)(118,"div",46)(119,"h2",7),B(120,"Tecnolog\xEDas principales"),F(),P(121,"p",47),B(122,"CreativIA est\xE1 construido sobre los siguientes frameworks, herramientas y APIs."),F()()(),P(123,"div",48),ai(124,YU,1,1,"app-tech-card",49,QU),F()()),n&2&&(z(124),li(r.technologies))},dependencies:[yi,Ff],encapsulation:2})};var Db=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(we(Tr),we(Zn))};static \u0275dir=ze({type:t})}return t})(),Ps=(()=>{class t extends Db{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ut(t)))(i||t)}})();static \u0275dir=ze({type:t,features:[Bt]})}return t})(),Co=new Q(""),ZU={provide:Co,useExisting:Vt(()=>Kv),multi:!0},Kv=(()=>{class t extends Ps{writeValue(n){this.setProperty("checked",n)}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ut(t)))(i||t)}})();static \u0275dir=ze({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,i){r&1&&Fe("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},standalone:!1,features:[pn([ZU]),Bt]})}return t})(),XU={provide:Co,useExisting:Vt(()=>Hf),multi:!0};function eB(){let t=yn()?yn().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var tB=new Q(""),Hf=(()=>{class t extends Db{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!eB())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(we(Tr),we(Zn),we(tB,8))};static \u0275dir=ze({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Fe("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[pn([XU]),Bt]})}return t})();function nB(t){return t==null||rB(t)===0}function rB(t){return t==null?null:Array.isArray(t)||typeof t=="string"?t.length:t instanceof Set?t.size:null}var $f=new Q(""),iB=new Q("");function oB(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function sB(t){return e=>{if(e.value==null||t==null)return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function aB(t){if(!t)return $v;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(nB(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function $v(t){return null}function Sb(t){return t!=null}function Ab(t){return wr(t)?Pe(t):t}function bb(t){let e={};return t.forEach(n=>{e=n!=null?H(H({},e),n):e}),Object.keys(e).length===0?null:e}function Mb(t,e){return e.map(n=>n(t))}function lB(t){return!t.validate}function Rb(t){return t.map(e=>lB(e)?e:n=>e.validate(n))}function uB(t){if(!t)return null;let e=t.filter(Sb);return e.length==0?null:function(n){return bb(Mb(n,e))}}function Nb(t){return t!=null?uB(Rb(t)):null}function cB(t){if(!t)return null;let e=t.filter(Sb);return e.length==0?null:function(n){let r=Mb(n,e).map(Ab);return $a(r).pipe(ce(bb))}}function xb(t){return t!=null?cB(Rb(t)):null}function yb(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function dB(t){return t._rawValidators}function fB(t){return t._rawAsyncValidators}function Gv(t){return t?Array.isArray(t)?t:[t]:[]}function Vf(t,e){return Array.isArray(t)?t.includes(e):t===e}function vb(t,e){let n=Gv(e);return Gv(t).forEach(i=>{Vf(n,i)||n.push(i)}),n}function _b(t,e){return Gv(e).filter(n=>!Vf(t,n))}var Uf=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Nb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},qv=class extends Uf{name;get formDirective(){return null}get path(){return null}},uu=class extends Uf{_parent=null;name=null;valueAccessor=null},zv=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var Pb=(()=>{class t extends zv{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(we(uu,2))};static \u0275dir=ze({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Oe("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[Bt]})}return t})();var ou="VALID",Lf="INVALID",Ns="PENDING",su="DISABLED",Eo=class{},Bf=class extends Eo{value;source;constructor(e,n){super(),this.value=e,this.source=n}},au=class extends Eo{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},lu=class extends Eo{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},xs=class extends Eo{status;source;constructor(e,n){super(),this.status=e,this.source=n}};var jv=class extends Eo{source;constructor(e){super(),this.source=e}};function hB(t){return(Gf(t)?t.validators:t)||null}function pB(t){return Array.isArray(t)?Nb(t):t||null}function mB(t,e){return(Gf(e)?e.asyncValidators:t)||null}function gB(t){return Array.isArray(t)?xb(t):t||null}function Gf(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var Wv=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return nt(this.statusReactive)}set status(e){nt(()=>this.statusReactive.set(e))}_status=Al(()=>this.statusReactive(),{});statusReactive=Yt(void 0,{});get valid(){return this.status===ou}get invalid(){return this.status===Lf}get pending(){return this.status==Ns}get disabled(){return this.status===su}get enabled(){return this.status!==su}errors;get pristine(){return nt(this.pristineReactive)}set pristine(e){nt(()=>this.pristineReactive.set(e))}_pristine=Al(()=>this.pristineReactive(),{});pristineReactive=Yt(!0,{});get dirty(){return!this.pristine}get touched(){return nt(this.touchedReactive)}set touched(e){nt(()=>this.touchedReactive.set(e))}_touched=Al(()=>this.touchedReactive(),{});touchedReactive=Yt(!1,{});get untouched(){return!this.touched}_events=new qe;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(vb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(vb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(_b(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(_b(e,this._rawAsyncValidators))}hasValidator(e){return Vf(this._rawValidators,e)}hasAsyncValidator(e){return Vf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(he(H({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new lu(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new lu(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(he(H({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new au(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new au(!0,r))}markAsPending(e={}){this.status=Ns;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new xs(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(he(H({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=su,this.errors=null,this._forEachChild(i=>{i.disable(he(H({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Bf(this.value,r)),this._events.next(new xs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(he(H({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ou,this._forEachChild(r=>{r.enable(he(H({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(he(H({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ou||this.status===Ns)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Bf(this.value,n)),this._events.next(new xs(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(he(H({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?su:ou}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Ns,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let r=Ab(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new xs(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Je,this.statusChanges=new Je}_calculateStatus(){return this._allControlsDisabled()?su:this.errors?Lf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ns)?Ns:this._anyControlsHaveStatus(Lf)?Lf:ou}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new au(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new lu(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Gf(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=pB(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=gB(this._rawAsyncValidators)}};var Jv=new Q("",{factory:()=>qf}),qf="always";function yB(t,e){return[...e.path,t]}function vB(t,e,n=qf){EB(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),CB(t,e),TB(t,e),IB(t,e),_B(t,e)}function Eb(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function _B(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function EB(t,e){let n=dB(t);e.validator!==null?t.setValidators(yb(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=fB(t);e.asyncValidator!==null?t.setAsyncValidators(yb(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();Eb(e._rawValidators,i),Eb(e._rawAsyncValidators,i)}function CB(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&kb(t,e)})}function IB(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&kb(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function kb(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function TB(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function wB(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function DB(t){return Object.getPrototypeOf(t.constructor)===Ps}function SB(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(o=>{o.constructor===Hf?n=o:DB(o)?r=o:i=o}),i||r||n||null}function Cb(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Ib(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var AB=class extends Wv{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(hB(n),mB(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Gf(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Ib(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new jv(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Cb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Cb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Ib(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var bB={provide:uu,useExisting:Vt(()=>Qv)},Tb=Promise.resolve(),Qv=(()=>{class t extends uu{_changeDetectorRef;callSetDisabledState;control=new AB;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Je;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=SB(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),wB(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){vB(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){Tb.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&cs(r);Tb.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?yB(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(we(qv,9),we($f,10),we(iB,10),we(Co,10),we(gn,8),we(Jv,8))};static \u0275dir=ze({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[pn([bB]),Bt,Cr]})}return t})();var MB={provide:Co,useExisting:Vt(()=>Yv),multi:!0},Yv=(()=>{class t extends Ps{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ut(t)))(i||t)}})();static \u0275dir=ze({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Fe("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[pn([MB]),Bt]})}return t})();var RB={provide:Co,useExisting:Vt(()=>Zv),multi:!0},Zv=(()=>{class t extends Ps{writeValue(n){this.setProperty("value",parseFloat(n))}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ut(t)))(i||t)}})();static \u0275dir=ze({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,i){r&1&&Fe("change",function(s){return i.onChange(s.target.value)})("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[pn([RB]),Bt]})}return t})();var NB=new Q("");var xB={provide:Co,useExisting:Vt(()=>zf),multi:!0};function Fb(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function PB(t){return t.split(":")[0]}var zf=(()=>{class t extends Ps{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;appRefInjector=k(oi).injector;destroyRef=k(Mn);cdr=k(gn);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Nd({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(n){this.cdr.markForCheck(),this.value=n;let r=this._getOptionId(n),i=Fb(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=PB(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ut(t)))(i||t)}})();static \u0275dir=ze({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Fe("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[pn([xB]),Bt]})}return t})(),Ob=(()=>{class t{_element;_renderer;_select;id;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(Fb(this.id,n)),this._select._writeValueAfterRender())}set value(n){this._setElementValue(n),this._select&&this._select._writeValueAfterRender()}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(r){return new(r||t)(we(Zn),we(Tr),we(zf,9))};static \u0275dir=ze({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})(),kB={provide:Co,useExisting:Vt(()=>Lb),multi:!0};function wb(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function FB(t){return t.split(":")[0]}var Lb=(()=>{class t extends Ps{value;_optionMap=new Map;_idCounter=0;set compareWith(n){this._compareWith=n}_compareWith=Object.is;writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(o=>this._getOptionId(o));r=(o,s)=>{o._setSelected(i.indexOf(s.toString())>-1)}}else r=(i,o)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],o=r.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let l=s[a],c=this._getOptionValue(l.value);i.push(c)}}else{let s=r.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let c=this._getOptionValue(l.value);i.push(c)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=FB(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ut(t)))(i||t)}})();static \u0275dir=ze({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Fe("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[pn([kB]),Bt]})}return t})(),Vb=(()=>{class t{_element;_renderer;_select;id;_value;constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(wb(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(wb(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(r){return new(r||t)(we(Zn),we(Tr),we(Lb,9))};static \u0275dir=ze({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return t})();function Ub(t){return typeof t=="number"?t:parseFloat(t)}var Xv=(()=>{class t{_validator=$v;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):$v,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||t)};static \u0275dir=ze({type:t,features:[Cr]})}return t})(),OB={provide:$f,useExisting:Vt(()=>e_),multi:!0},e_=(()=>{class t extends Xv{max;inputName="max";normalizeInput=n=>Ub(n);createValidator=n=>sB(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ut(t)))(i||t)}})();static \u0275dir=ze({type:t,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&si("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[pn([OB]),Bt]})}return t})(),LB={provide:$f,useExisting:Vt(()=>t_),multi:!0},t_=(()=>{class t extends Xv{min;inputName="min";normalizeInput=n=>Ub(n);createValidator=n=>oB(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ut(t)))(i||t)}})();static \u0275dir=ze({type:t,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&si("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[pn([LB]),Bt]})}return t})();var VB={provide:$f,useExisting:Vt(()=>n_),multi:!0},n_=(()=>{class t extends Xv{pattern;inputName="pattern";normalizeInput=n=>n;createValidator=n=>aB(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=Ut(t)))(i||t)}})();static \u0275dir=ze({type:t,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&si("pattern",i._enabled?i.pattern:null)},inputs:{pattern:"pattern"},standalone:!1,features:[pn([VB]),Bt]})}return t})();var Bb=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=er({type:t});static \u0275inj=Dn({})}return t})();var Hb=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Jv,useValue:n.callSetDisabledState??qf}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=er({type:t});static \u0275inj=Dn({imports:[Bb]})}return t})(),$b=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:NB,useValue:n.warnOnNgModelWithFormControl??"always"},{provide:Jv,useValue:n.callSetDisabledState??qf}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=er({type:t});static \u0275inj=Dn({imports:[Bb]})}return t})();var BB,HB;function $B(){return{geminiUrl:BB,vertexUrl:HB}}function GB(t,e,n,r){var i,o;if(!t?.baseUrl){let s=$B();return e?(i=s.vertexUrl)!==null&&i!==void 0?i:n:(o=s.geminiUrl)!==null&&o!==void 0?o:r}return t.baseUrl}var Fn=class{};function q(t,e){let n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){let o=e[i];return o!=null?String(o):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function d(t,e,n){for(let o=0;o<e.length-1;o++){let s=e[o];if(s.endsWith("[]")){let a=s.slice(0,-2);if(!(a in t))if(Array.isArray(n))t[a]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[a])){let l=t[a];if(Array.isArray(n))for(let c=0;c<l.length;c++){let h=l[c];d(h,e.slice(o+1),n[c])}else for(let c of l)d(c,e.slice(o+1),n)}return}else if(s.endsWith("[0]")){let a=s.slice(0,-3);a in t||(t[a]=[{}]);let l=t[a];d(l[0],e.slice(o+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}let r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function u(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;let i=e[r];if(i.endsWith("[]")){let o=i.slice(0,-2);if(o in t){let s=t[o];return Array.isArray(s)?s.map(a=>u(a,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function qB(t,e){for(let[n,r]of Object.entries(e)){let i=n.split("."),o=r.split("."),s=new Set,a=-1;for(let l=0;l<i.length;l++)if(i[l]==="*"){a=l;break}if(a!==-1&&o.length>a)for(let l=a;l<o.length;l++){let c=o[l];c!=="*"&&!c.endsWith("[]")&&!c.endsWith("[0]")&&s.add(c)}r_(t,i,o,0,s)}}function r_(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;let o=e[r];if(o.endsWith("[]")){let s=o.slice(0,-2),a=t;if(s in a&&Array.isArray(a[s]))for(let l of a[s])r_(l,e,n,r+1,i)}else if(o==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){let s=t,a=Object.keys(s).filter(c=>!c.startsWith("_")&&!i.has(c)),l={};for(let c of a)l[c]=s[c];for(let[c,h]of Object.entries(l)){let p=[];for(let m of n.slice(r))m==="*"?p.push(c):p.push(m);d(s,p,h)}for(let c of a)delete s[c]}}else{let s=t;o in s&&r_(s[o],e,n,r+1,i)}}function K_(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function zB(t){let e={},n=u(t,["operationName"]);n!=null&&d(e,["operationName"],n);let r=u(t,["resourceName"]);return r!=null&&d(e,["_url","resourceName"],r),e}function jB(t){let e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);let r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);let i=u(t,["done"]);i!=null&&d(e,["done"],i);let o=u(t,["error"]);o!=null&&d(e,["error"],o);let s=u(t,["response","generateVideoResponse"]);return s!=null&&d(e,["response"],KB(s)),e}function WB(t){let e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);let r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);let i=u(t,["done"]);i!=null&&d(e,["done"],i);let o=u(t,["error"]);o!=null&&d(e,["error"],o);let s=u(t,["response"]);return s!=null&&d(e,["response"],JB(s)),e}function KB(t){let e={},n=u(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>QB(s))),d(e,["generatedVideos"],o)}let r=u(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);let i=u(t,["raiMediaFilteredReasons"]);return i!=null&&d(e,["raiMediaFilteredReasons"],i),e}function JB(t){let e={},n=u(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>YB(s))),d(e,["generatedVideos"],o)}let r=u(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);let i=u(t,["raiMediaFilteredReasons"]);return i!=null&&d(e,["raiMediaFilteredReasons"],i),e}function QB(t){let e={},n=u(t,["video"]);return n!=null&&d(e,["video"],rH(n)),e}function YB(t){let e={},n=u(t,["_self"]);return n!=null&&d(e,["video"],iH(n)),e}function ZB(t){let e={},n=u(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function XB(t){let e={},n=u(t,["operationName"]);return n!=null&&d(e,["_url","operationName"],n),e}function eH(t){let e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);let r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);let i=u(t,["done"]);i!=null&&d(e,["done"],i);let o=u(t,["error"]);o!=null&&d(e,["error"],o);let s=u(t,["response"]);return s!=null&&d(e,["response"],tH(s)),e}function tH(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["parent"]);r!=null&&d(e,["parent"],r);let i=u(t,["documentName"]);return i!=null&&d(e,["documentName"],i),e}function lM(t){let e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);let r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);let i=u(t,["done"]);i!=null&&d(e,["done"],i);let o=u(t,["error"]);o!=null&&d(e,["error"],o);let s=u(t,["response"]);return s!=null&&d(e,["response"],nH(s)),e}function nH(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["parent"]);r!=null&&d(e,["parent"],r);let i=u(t,["documentName"]);return i!=null&&d(e,["documentName"],i),e}function rH(t){let e={},n=u(t,["uri"]);n!=null&&d(e,["uri"],n);let r=u(t,["encodedVideo"]);r!=null&&d(e,["videoBytes"],K_(r));let i=u(t,["encoding"]);return i!=null&&d(e,["mimeType"],i),e}function iH(t){let e={},n=u(t,["gcsUri"]);n!=null&&d(e,["uri"],n);let r=u(t,["bytesBase64Encoded"]);r!=null&&d(e,["videoBytes"],K_(r));let i=u(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}var To=(function(t){return t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL",t})(To||{});var i_=(function(t){return t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO",t})(i_||{});var uM=(function(t){return t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",t})(uM||{});var cu=(function(t){return t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT",t})(cu||{});var fu=class{constructor(e){let n={};for(let r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}};var Io=class{get text(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",h=!1,p=[];for(let m of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[v,I]of Object.entries(m))v!=="text"&&v!=="thought"&&v!=="thoughtSignature"&&(I!==null||I!==void 0)&&p.push(v);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;h=!0,c+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?c:void 0}get data(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="",h=[];for(let p of(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(let[m,v]of Object.entries(p))m!=="inlineData"&&(v!==null||v!==void 0)&&h.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(c+=atob(p.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,n,r,i,o,s,a,l;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let c=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if(c?.length!==0)return c}get executableCode(){var e,n,r,i,o,s,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let h=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(h?.length!==0)return(c=h?.[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,n,r,i,o,s,a,l,c;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let h=(l=(a=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(h?.length!==0)return(c=h?.[0])===null||c===void 0?void 0:c.output}},Kf=class{},Jf=class{},o_=class{},s_=class{},a_=class{},l_=class{},Qf=class{},Yf=class{},Zf=class{},u_=class{};var Xf=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let r=new t,i,o=e;return n?i=WB(o):i=jB(o),Object.assign(r,i),r}},eh=class{},th=class{},nh=class{},rh=class{},c_=class{},d_=class{},f_=class{};var h_=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let r=new t,o=eH(e);return Object.assign(r,o),r}},p_=class{},m_=class{},g_=class{};var ih=class{};var y_=class{get text(){var e,n,r;let i="",o=!1,s=[];for(let a of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(let[l,c]of Object.entries(a))l!=="text"&&l!=="thought"&&c!==null&&s.push(l);if(typeof a.text=="string"){if(typeof a.thought=="boolean"&&a.thought)continue;o=!0,i+=a.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),o?i:void 0}get data(){var e,n,r;let i="",o=[];for(let s of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(let[a,l]of Object.entries(s))a!=="inlineData"&&l!==null&&o.push(a);s.inlineData&&typeof s.inlineData.data=="string"&&(i+=atob(s.inlineData.data))}return o.length>0&&console.warn(`there are non-data parts ${o} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}};var v_=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};var __=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let r=new t,o=lM(e);return Object.assign(r,o),r}};function Se(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function cM(t,e){let n=Se(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function dM(t){return Array.isArray(t)?t.map(e=>oh(e)):[oh(t)]}function oh(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function fM(t){let e=oh(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function hM(t){let e=oh(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Gb(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function pM(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Gb(e)):[Gb(t)]}function E_(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function qb(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function zb(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function At(t){if(t==null)throw new Error("ContentUnion is required");return E_(t)?t:{role:"user",parts:pM(t)}}function J_(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{let r=At(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){let n=At(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>At(n)):[At(e)]}function vn(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(qb(t)||zb(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[At(t)]}let e=[],n=[],r=E_(t[0]);for(let i of t){let o=E_(i);if(o!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)e.push(i);else{if(qb(i)||zb(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:pM(n)}),e}function oH(t,e){t.includes("null")&&(e.nullable=!0);let n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(To).includes(n[0].toUpperCase())?n[0].toUpperCase():To.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let r of n)e.anyOf.push({type:Object.values(To).includes(r.toUpperCase())?r.toUpperCase():To.TYPE_UNSPECIFIED})}}function ks(t){let e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");let o=t.anyOf;o!=null&&o.length==2&&(o[0].type==="null"?(e.nullable=!0,t=o[1]):o[1].type==="null"&&(e.nullable=!0,t=o[0])),t.type instanceof Array&&oH(t.type,e);for(let[s,a]of Object.entries(t))if(a!=null)if(s=="type"){if(a==="null")throw new Error("type: null can not be the only possible type for the field.");if(a instanceof Array)continue;e.type=Object.values(To).includes(a.toUpperCase())?a.toUpperCase():To.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=ks(a);else if(r.includes(s)){let l=[];for(let c of a){if(c.type=="null"){e.nullable=!0;continue}l.push(ks(c))}e[s]=l}else if(i.includes(s)){let l={};for(let[c,h]of Object.entries(a))l[c]=ks(h);e[s]=l}else{if(s==="additionalProperties")continue;e[s]=a}return e}function Q_(t){return ks(t)}function Y_(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Z_(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Ls(t){if(t.functionDeclarations)for(let e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=ks(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=ks(e.response));return t}function Vs(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");let e=[];for(let n of t)e.push(n);return e}function sH(t,e,n,r=1){let i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function xr(t,e){if(typeof e!="string")throw new Error("name must be a string");return sH(t,e,"cachedContents")}function mM(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function vi(t){return K_(t)}function aH(t){return t!=null&&typeof t=="object"&&"name"in t}function lH(t){return t!=null&&typeof t=="object"&&"video"in t}function uH(t){return t!=null&&typeof t=="object"&&"uri"in t}function gM(t){var e;let n;if(aH(t)&&(n=t.name),!(uH(t)&&(n=t.uri,n===void 0))&&!(lH(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){let i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function yM(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function vM(t){for(let e of["models","tunedModels","publisherModels"])if(cH(t,e))return t[e];return[]}function cH(t,e){return t!==null&&typeof t=="object"&&e in t}function dH(t,e={}){let n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function fH(t,e={}){let n=[],r=new Set;for(let i of t){let o=i.name;if(r.has(o))throw new Error(`Duplicate function name ${o} found in MCP tools. Please ensure function names are unique.`);r.add(o);let s=dH(i,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function _M(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;let r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function hH(t){if(typeof t!="string")return t;let e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function EM(t){if(typeof t!="object"||t===null)return{};let e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;let i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let o=!1;for(let s of i){if(typeof s!="object"||s===null)continue;let l=s.response;if(typeof l!="object"||l===null)continue;if(l.embedding!==void 0){o=!0;break}}return o&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Us(t,e){let n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function CM(t){let e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function pH(t){let e={},n=u(t,["responsesFile"]);n!=null&&d(e,["fileName"],n);let r=u(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>KH(s))),d(e,["inlinedResponses"],o)}let i=u(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["inlinedEmbedContentResponses"],o)}return e}function mH(t){let e={},n=u(t,["predictionsFormat"]);n!=null&&d(e,["format"],n);let r=u(t,["gcsDestination","outputUriPrefix"]);r!=null&&d(e,["gcsUri"],r);let i=u(t,["bigqueryDestination","outputUri"]);return i!=null&&d(e,["bigqueryUri"],i),e}function gH(t){let e={},n=u(t,["format"]);n!=null&&d(e,["predictionsFormat"],n);let r=u(t,["gcsUri"]);r!=null&&d(e,["gcsDestination","outputUriPrefix"],r);let i=u(t,["bigqueryUri"]);if(i!=null&&d(e,["bigqueryDestination","outputUri"],i),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(u(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function jf(t){let e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);let r=u(t,["metadata","displayName"]);r!=null&&d(e,["displayName"],r);let i=u(t,["metadata","state"]);i!=null&&d(e,["state"],CM(i));let o=u(t,["metadata","createTime"]);o!=null&&d(e,["createTime"],o);let s=u(t,["metadata","endTime"]);s!=null&&d(e,["endTime"],s);let a=u(t,["metadata","updateTime"]);a!=null&&d(e,["updateTime"],a);let l=u(t,["metadata","model"]);l!=null&&d(e,["model"],l);let c=u(t,["metadata","output"]);return c!=null&&d(e,["dest"],pH(EM(c))),e}function C_(t){let e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);let r=u(t,["displayName"]);r!=null&&d(e,["displayName"],r);let i=u(t,["state"]);i!=null&&d(e,["state"],CM(i));let o=u(t,["error"]);o!=null&&d(e,["error"],o);let s=u(t,["createTime"]);s!=null&&d(e,["createTime"],s);let a=u(t,["startTime"]);a!=null&&d(e,["startTime"],a);let l=u(t,["endTime"]);l!=null&&d(e,["endTime"],l);let c=u(t,["updateTime"]);c!=null&&d(e,["updateTime"],c);let h=u(t,["model"]);h!=null&&d(e,["model"],h);let p=u(t,["inputConfig"]);p!=null&&d(e,["src"],yH(p));let m=u(t,["outputConfig"]);m!=null&&d(e,["dest"],mH(EM(m)));let v=u(t,["completionStats"]);return v!=null&&d(e,["completionStats"],v),e}function yH(t){let e={},n=u(t,["instancesFormat"]);n!=null&&d(e,["format"],n);let r=u(t,["gcsSource","uris"]);r!=null&&d(e,["gcsUri"],r);let i=u(t,["bigquerySource","inputUri"]);return i!=null&&d(e,["bigqueryUri"],i),e}function vH(t,e){let n={};if(u(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(u(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let r=u(e,["fileName"]);r!=null&&d(n,["fileName"],r);let i=u(e,["inlinedRequests"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>WH(t,s))),d(n,["requests","requests"],o)}return n}function _H(t){let e={},n=u(t,["format"]);n!=null&&d(e,["instancesFormat"],n);let r=u(t,["gcsUri"]);r!=null&&d(e,["gcsSource","uris"],r);let i=u(t,["bigqueryUri"]);if(i!=null&&d(e,["bigquerySource","inputUri"],i),u(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(u(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function EH(t){let e={},n=u(t,["data"]);if(n!=null&&d(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function CH(t,e){let n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],Us(t,r)),n}function IH(t,e){let n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],Us(t,r)),n}function TH(t){let e={},n=u(t,["content"]);n!=null&&d(e,["content"],n);let r=u(t,["citationMetadata"]);r!=null&&d(e,["citationMetadata"],wH(r));let i=u(t,["tokenCount"]);i!=null&&d(e,["tokenCount"],i);let o=u(t,["finishReason"]);o!=null&&d(e,["finishReason"],o);let s=u(t,["avgLogprobs"]);s!=null&&d(e,["avgLogprobs"],s);let a=u(t,["groundingMetadata"]);a!=null&&d(e,["groundingMetadata"],a);let l=u(t,["index"]);l!=null&&d(e,["index"],l);let c=u(t,["logprobsResult"]);c!=null&&d(e,["logprobsResult"],c);let h=u(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(v=>v)),d(e,["safetyRatings"],m)}let p=u(t,["urlContextMetadata"]);return p!=null&&d(e,["urlContextMetadata"],p),e}function wH(t){let e={},n=u(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),d(e,["citations"],r)}return e}function IM(t){let e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>t$(o))),d(e,["parts"],i)}let r=u(t,["role"]);return r!=null&&d(e,["role"],r),e}function DH(t,e){let n={},r=u(t,["displayName"]);if(e!==void 0&&r!=null&&d(e,["batch","displayName"],r),u(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function SH(t,e){let n={},r=u(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);let i=u(t,["dest"]);return e!==void 0&&i!=null&&d(e,["outputConfig"],gH(hH(i))),n}function jb(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],Se(t,r));let i=u(e,["src"]);i!=null&&d(n,["batch","inputConfig"],vH(t,_M(t,i)));let o=u(e,["config"]);return o!=null&&DH(o,n),n}function AH(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["model"],Se(t,r));let i=u(e,["src"]);i!=null&&d(n,["inputConfig"],_H(_M(t,i)));let o=u(e,["config"]);return o!=null&&SH(o,n),n}function bH(t,e){let n={},r=u(t,["displayName"]);return e!==void 0&&r!=null&&d(e,["batch","displayName"],r),n}function MH(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],Se(t,r));let i=u(e,["src"]);i!=null&&d(n,["batch","inputConfig"],OH(t,i));let o=u(e,["config"]);return o!=null&&bH(o,n),n}function RH(t,e){let n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],Us(t,r)),n}function NH(t,e){let n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],Us(t,r)),n}function xH(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["name"]);r!=null&&d(e,["name"],r);let i=u(t,["done"]);i!=null&&d(e,["done"],i);let o=u(t,["error"]);return o!=null&&d(e,["error"],o),e}function PH(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["name"]);r!=null&&d(e,["name"],r);let i=u(t,["done"]);i!=null&&d(e,["done"],i);let o=u(t,["error"]);return o!=null&&d(e,["error"],o),e}function kH(t,e){let n={},r=u(e,["contents"]);if(r!=null){let o=J_(t,r);Array.isArray(o)&&(o=o.map(s=>s)),d(n,["requests[]","request","content"],o)}let i=u(e,["config"]);return i!=null&&(d(n,["_self"],FH(i,n)),qB(n,{"requests[].*":"requests[].request.*"})),n}function FH(t,e){let n={},r=u(t,["taskType"]);e!==void 0&&r!=null&&d(e,["requests[]","taskType"],r);let i=u(t,["title"]);e!==void 0&&i!=null&&d(e,["requests[]","title"],i);let o=u(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&d(e,["requests[]","outputDimensionality"],o),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function OH(t,e){let n={},r=u(e,["fileName"]);r!=null&&d(n,["file_name"],r);let i=u(e,["inlinedRequests"]);return i!=null&&d(n,["requests"],kH(t,i)),n}function LH(t){let e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);let r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function VH(t){let e={},n=u(t,["id"]);n!=null&&d(e,["id"],n);let r=u(t,["args"]);r!=null&&d(e,["args"],r);let i=u(t,["name"]);if(i!=null&&d(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function UH(t){let e={},n=u(t,["mode"]);n!=null&&d(e,["mode"],n);let r=u(t,["allowedFunctionNames"]);if(r!=null&&d(e,["allowedFunctionNames"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function BH(t,e,n){let r={},i=u(e,["systemInstruction"]);n!==void 0&&i!=null&&d(n,["systemInstruction"],IM(At(i)));let o=u(e,["temperature"]);o!=null&&d(r,["temperature"],o);let s=u(e,["topP"]);s!=null&&d(r,["topP"],s);let a=u(e,["topK"]);a!=null&&d(r,["topK"],a);let l=u(e,["candidateCount"]);l!=null&&d(r,["candidateCount"],l);let c=u(e,["maxOutputTokens"]);c!=null&&d(r,["maxOutputTokens"],c);let h=u(e,["stopSequences"]);h!=null&&d(r,["stopSequences"],h);let p=u(e,["responseLogprobs"]);p!=null&&d(r,["responseLogprobs"],p);let m=u(e,["logprobs"]);m!=null&&d(r,["logprobs"],m);let v=u(e,["presencePenalty"]);v!=null&&d(r,["presencePenalty"],v);let I=u(e,["frequencyPenalty"]);I!=null&&d(r,["frequencyPenalty"],I);let b=u(e,["seed"]);b!=null&&d(r,["seed"],b);let A=u(e,["responseMimeType"]);A!=null&&d(r,["responseMimeType"],A);let N=u(e,["responseSchema"]);N!=null&&d(r,["responseSchema"],Q_(N));let O=u(e,["responseJsonSchema"]);if(O!=null&&d(r,["responseJsonSchema"],O),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let L=u(e,["safetySettings"]);if(n!==void 0&&L!=null){let M=L;Array.isArray(M)&&(M=M.map(T=>n$(T))),d(n,["safetySettings"],M)}let G=u(e,["tools"]);if(n!==void 0&&G!=null){let M=Vs(G);Array.isArray(M)&&(M=M.map(T=>i$(Ls(T)))),d(n,["tools"],M)}let Z=u(e,["toolConfig"]);if(n!==void 0&&Z!=null&&d(n,["toolConfig"],r$(Z)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let Y=u(e,["cachedContent"]);n!==void 0&&Y!=null&&d(n,["cachedContent"],xr(t,Y));let w=u(e,["responseModalities"]);w!=null&&d(r,["responseModalities"],w);let C=u(e,["mediaResolution"]);C!=null&&d(r,["mediaResolution"],C);let E=u(e,["speechConfig"]);if(E!=null&&d(r,["speechConfig"],Y_(E)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let S=u(e,["thinkingConfig"]);S!=null&&d(r,["thinkingConfig"],S);let D=u(e,["imageConfig"]);return D!=null&&d(r,["imageConfig"],jH(D)),r}function HH(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>TH(c))),d(e,["candidates"],l)}let i=u(t,["modelVersion"]);i!=null&&d(e,["modelVersion"],i);let o=u(t,["promptFeedback"]);o!=null&&d(e,["promptFeedback"],o);let s=u(t,["responseId"]);s!=null&&d(e,["responseId"],s);let a=u(t,["usageMetadata"]);return a!=null&&d(e,["usageMetadata"],a),e}function $H(t,e){let n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],Us(t,r)),n}function GH(t,e){let n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],Us(t,r)),n}function qH(t){let e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function zH(t){let e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function jH(t){let e={},n=u(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);let r=u(t,["imageSize"]);if(r!=null&&d(e,["imageSize"],r),u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function WH(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["request","model"],Se(t,r));let i=u(e,["contents"]);if(i!=null){let a=vn(i);Array.isArray(a)&&(a=a.map(l=>IM(l))),d(n,["request","contents"],a)}let o=u(e,["metadata"]);o!=null&&d(n,["metadata"],o);let s=u(e,["config"]);return s!=null&&d(n,["request","generationConfig"],BH(t,s,u(n,["request"],{}))),n}function KH(t){let e={},n=u(t,["response"]);n!=null&&d(e,["response"],HH(n));let r=u(t,["error"]);return r!=null&&d(e,["error"],r),e}function JH(t,e){let n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let i=u(t,["pageToken"]);if(e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),u(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function QH(t,e){let n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let i=u(t,["pageToken"]);e!==void 0&&i!=null&&d(e,["_query","pageToken"],i);let o=u(t,["filter"]);return e!==void 0&&o!=null&&d(e,["_query","filter"],o),n}function YH(t){let e={},n=u(t,["config"]);return n!=null&&JH(n,e),e}function ZH(t){let e={},n=u(t,["config"]);return n!=null&&QH(n,e),e}function XH(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let i=u(t,["operations"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>jf(s))),d(e,["batchJobs"],o)}return e}function e$(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let i=u(t,["batchPredictionJobs"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>C_(s))),d(e,["batchJobs"],o)}return e}function t$(t){let e={},n=u(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);let r=u(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);let i=u(t,["executableCode"]);i!=null&&d(e,["executableCode"],i);let o=u(t,["fileData"]);o!=null&&d(e,["fileData"],LH(o));let s=u(t,["functionCall"]);s!=null&&d(e,["functionCall"],VH(s));let a=u(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);let l=u(t,["inlineData"]);l!=null&&d(e,["inlineData"],EH(l));let c=u(t,["text"]);c!=null&&d(e,["text"],c);let h=u(t,["thought"]);h!=null&&d(e,["thought"],h);let p=u(t,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);let m=u(t,["videoMetadata"]);return m!=null&&d(e,["videoMetadata"],m),e}function n$(t){let e={},n=u(t,["category"]);if(n!=null&&d(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let r=u(t,["threshold"]);return r!=null&&d(e,["threshold"],r),e}function r$(t){let e={},n=u(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],UH(n));let r=u(t,["retrievalConfig"]);return r!=null&&d(e,["retrievalConfig"],r),e}function i$(t){let e={},n=u(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),d(e,["functionDeclarations"],h)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=u(t,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);let i=u(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);let o=u(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);let s=u(t,["codeExecution"]);if(s!=null&&d(e,["codeExecution"],s),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let a=u(t,["googleMaps"]);a!=null&&d(e,["googleMaps"],qH(a));let l=u(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],zH(l));let c=u(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}var _i=(function(t){return t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents",t})(_i||{}),Nr=class{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,o;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!r||Object.keys(r).length===0?s={config:{}}:typeof r=="object"?s=Object.assign({},r):s=r,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(i=s.config)===null||i===void 0?void 0:i.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var I_=class extends Fn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Nr(_i.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){let n=jb(this.apiClient,e),r=n._url,i=q("{model}:batchGenerateContent",r),a=n.batch.inputConfig.requests,l=a.requests,c=[];for(let h of l){let p=Object.assign({},h);if(p.systemInstruction){let m=p.systemInstruction;delete p.systemInstruction;let v=p.request;v.systemInstruction=m,p.request=v}c.push(p)}return a.requests=c,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){let r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){let o=this.getGcsUri(e),s=this.getBigqueryUri(e);if(o)o.endsWith(".jsonl")?r.dest=`${o.slice(0,-6)}/dest`:r.dest=`${o}_dest_${i}`;else if(s)r.dest=`${s}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=AH(this.apiClient,e);return a=q("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>C_(h))}else{let c=jb(this.apiClient,e);return a=q("{model}:batchGenerateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>jf(h))}}async createEmbeddingsInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=MH(this.apiClient,e);return o=q("{model}:asyncBatchEmbedContent",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>jf(l))}}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=GH(this.apiClient,e);return a=q("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>C_(h))}else{let c=$H(this.apiClient,e);return a=q("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>jf(h))}}async cancel(e){var n,r,i,o;let s="",a={};if(this.apiClient.isVertexAI()){let l=IH(this.apiClient,e);s=q("batchPredictionJobs/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{let l=CH(this.apiClient,e);s=q("batches/{name}:cancel",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=ZH(e);return a=q("batchPredictionJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=e$(h),m=new ih;return Object.assign(m,p),m})}else{let c=YH(e);return a=q("batches",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=XH(h),m=new ih;return Object.assign(m,p),m})}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=NH(this.apiClient,e);return a=q("batchPredictionJobs/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>PH(h))}else{let c=RH(this.apiClient,e);return a=q("batches/{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>xH(h))}}};function o$(t){let e={},n=u(t,["data"]);if(n!=null&&d(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function Wb(t){let e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>b$(o))),d(e,["parts"],i)}let r=u(t,["role"]);return r!=null&&d(e,["role"],r),e}function s$(t,e){let n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);let i=u(t,["expireTime"]);e!==void 0&&i!=null&&d(e,["expireTime"],i);let o=u(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);let s=u(t,["contents"]);if(e!==void 0&&s!=null){let h=vn(s);Array.isArray(h)&&(h=h.map(p=>Wb(p))),d(e,["contents"],h)}let a=u(t,["systemInstruction"]);e!==void 0&&a!=null&&d(e,["systemInstruction"],Wb(At(a)));let l=u(t,["tools"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(p=>R$(p))),d(e,["tools"],h)}let c=u(t,["toolConfig"]);if(e!==void 0&&c!=null&&d(e,["toolConfig"],M$(c)),u(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function a$(t,e){let n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);let i=u(t,["expireTime"]);e!==void 0&&i!=null&&d(e,["expireTime"],i);let o=u(t,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);let s=u(t,["contents"]);if(e!==void 0&&s!=null){let p=vn(s);Array.isArray(p)&&(p=p.map(m=>m)),d(e,["contents"],p)}let a=u(t,["systemInstruction"]);e!==void 0&&a!=null&&d(e,["systemInstruction"],At(a));let l=u(t,["tools"]);if(e!==void 0&&l!=null){let p=l;Array.isArray(p)&&(p=p.map(m=>N$(m))),d(e,["tools"],p)}let c=u(t,["toolConfig"]);e!==void 0&&c!=null&&d(e,["toolConfig"],c);let h=u(t,["kmsKeyName"]);return e!==void 0&&h!=null&&d(e,["encryption_spec","kmsKeyName"],h),n}function l$(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["model"],cM(t,r));let i=u(e,["config"]);return i!=null&&s$(i,n),n}function u$(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["model"],cM(t,r));let i=u(e,["config"]);return i!=null&&a$(i,n),n}function c$(t,e){let n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],xr(t,r)),n}function d$(t,e){let n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],xr(t,r)),n}function f$(t){let e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function h$(t){let e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function p$(t){let e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);let r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function m$(t){let e={},n=u(t,["id"]);n!=null&&d(e,["id"],n);let r=u(t,["args"]);r!=null&&d(e,["args"],r);let i=u(t,["name"]);if(i!=null&&d(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function g$(t){let e={},n=u(t,["mode"]);n!=null&&d(e,["mode"],n);let r=u(t,["allowedFunctionNames"]);if(r!=null&&d(e,["allowedFunctionNames"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function y$(t){let e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=u(t,["description"]);n!=null&&d(e,["description"],n);let r=u(t,["name"]);r!=null&&d(e,["name"],r);let i=u(t,["parameters"]);i!=null&&d(e,["parameters"],i);let o=u(t,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);let s=u(t,["response"]);s!=null&&d(e,["response"],s);let a=u(t,["responseJsonSchema"]);return a!=null&&d(e,["responseJsonSchema"],a),e}function v$(t,e){let n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],xr(t,r)),n}function _$(t,e){let n={},r=u(e,["name"]);return r!=null&&d(n,["_url","name"],xr(t,r)),n}function E$(t){let e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function C$(t){let e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function I$(t,e){let n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let i=u(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function T$(t,e){let n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let i=u(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function w$(t){let e={},n=u(t,["config"]);return n!=null&&I$(n,e),e}function D$(t){let e={},n=u(t,["config"]);return n!=null&&T$(n,e),e}function S$(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let i=u(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["cachedContents"],o)}return e}function A$(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let i=u(t,["cachedContents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["cachedContents"],o)}return e}function b$(t){let e={},n=u(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);let r=u(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);let i=u(t,["executableCode"]);i!=null&&d(e,["executableCode"],i);let o=u(t,["fileData"]);o!=null&&d(e,["fileData"],p$(o));let s=u(t,["functionCall"]);s!=null&&d(e,["functionCall"],m$(s));let a=u(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);let l=u(t,["inlineData"]);l!=null&&d(e,["inlineData"],o$(l));let c=u(t,["text"]);c!=null&&d(e,["text"],c);let h=u(t,["thought"]);h!=null&&d(e,["thought"],h);let p=u(t,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);let m=u(t,["videoMetadata"]);return m!=null&&d(e,["videoMetadata"],m),e}function M$(t){let e={},n=u(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],g$(n));let r=u(t,["retrievalConfig"]);return r!=null&&d(e,["retrievalConfig"],r),e}function R$(t){let e={},n=u(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),d(e,["functionDeclarations"],h)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=u(t,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);let i=u(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);let o=u(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);let s=u(t,["codeExecution"]);if(s!=null&&d(e,["codeExecution"],s),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let a=u(t,["googleMaps"]);a!=null&&d(e,["googleMaps"],E$(a));let l=u(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],C$(l));let c=u(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}function N$(t){let e={},n=u(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>y$(m))),d(e,["functionDeclarations"],p)}let r=u(t,["retrieval"]);r!=null&&d(e,["retrieval"],r);let i=u(t,["googleSearchRetrieval"]);i!=null&&d(e,["googleSearchRetrieval"],i);let o=u(t,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let s=u(t,["codeExecution"]);s!=null&&d(e,["codeExecution"],s);let a=u(t,["enterpriseWebSearch"]);a!=null&&d(e,["enterpriseWebSearch"],a);let l=u(t,["googleMaps"]);l!=null&&d(e,["googleMaps"],l);let c=u(t,["googleSearch"]);c!=null&&d(e,["googleSearch"],c);let h=u(t,["urlContext"]);return h!=null&&d(e,["urlContext"],h),e}function x$(t,e){let n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);let i=u(t,["expireTime"]);return e!==void 0&&i!=null&&d(e,["expireTime"],i),n}function P$(t,e){let n={},r=u(t,["ttl"]);e!==void 0&&r!=null&&d(e,["ttl"],r);let i=u(t,["expireTime"]);return e!==void 0&&i!=null&&d(e,["expireTime"],i),n}function k$(t,e){let n={},r=u(e,["name"]);r!=null&&d(n,["_url","name"],xr(t,r));let i=u(e,["config"]);return i!=null&&x$(i,n),n}function F$(t,e){let n={},r=u(e,["name"]);r!=null&&d(n,["_url","name"],xr(t,r));let i=u(e,["config"]);return i!=null&&P$(i,n),n}var T_=class extends Fn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Nr(_i.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=u$(this.apiClient,e);return a=q("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{let c=l$(this.apiClient,e);return a=q("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=_$(this.apiClient,e);return a=q("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{let c=v$(this.apiClient,e);return a=q("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=d$(this.apiClient,e);return a=q("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=h$(h),m=new nh;return Object.assign(m,p),m})}else{let c=c$(this.apiClient,e);return a=q("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=f$(h),m=new nh;return Object.assign(m,p),m})}}async update(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=F$(this.apiClient,e);return a=q("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>h)}else{let c=k$(this.apiClient,e);return a=q("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>h)}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=D$(e);return a=q("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=A$(h),m=new rh;return Object.assign(m,p),m})}else{let c=w$(e);return a=q("cachedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=S$(h),m=new rh;return Object.assign(m,p),m})}}};function Kb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function $e(t){return this instanceof $e?(this.v=t,this):new $e(t)}function Fs(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(v){return function(I){return Promise.resolve(I).then(v,p)}}function a(v,I){r[v]&&(i[v]=function(b){return new Promise(function(A,N){o.push([v,b,A,N])>1||l(v,b)})},I&&(i[v]=I(i[v])))}function l(v,I){try{c(r[v](I))}catch(b){m(o[0][3],b)}}function c(v){v.value instanceof $e?Promise.resolve(v.value.v).then(h,p):m(o[0][2],v)}function h(v){l("next",v)}function p(v){l("throw",v)}function m(v,I){v(I),o.shift(),o.length&&l(o[0][0],o[0][1])}}function du(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Kb=="function"?Kb(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}function O$(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;let n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:TM(n)}function TM(t){if(t.parts===void 0||t.parts.length===0)return!1;for(let e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function L$(t){if(t.length!==0){for(let e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Jb(t){if(t===void 0||t.length===0)return[];let e=[],n=t.length,r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{let i=[],o=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),o&&!TM(t[r])&&(o=!1),r++;o?e.push(...i):e.pop()}return e}var w_=class{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new D_(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},D_=class{constructor(e,n,r,i={},o=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=o,this.sendPromise=Promise.resolve(),L$(o)}async sendMessage(e){var n;await this.sendPromise;let r=At(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var o,s,a;let l=await i,c=(s=(o=l.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,h=l.automaticFunctionCallingHistory,p=this.getHistory(!0).length,m=[];h!=null&&(m=(a=h.slice(p))!==null&&a!==void 0?a:[]);let v=c?[c]:[];this.recordHistory(r,v,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;let r=At(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});let o=await i;return this.processStreamResponse(o,r)}getHistory(e=!1){let n=e?Jb(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var r,i;return Fs(this,arguments,function*(){var s,a,l,c;let h=[];try{for(var p=!0,m=du(e),v;v=yield $e(m.next()),s=v.done,!s;p=!0){c=v.value,p=!1;let I=c;if(O$(I)){let b=(i=(r=I.candidates)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.content;b!==void 0&&h.push(b)}yield yield $e(I)}}catch(I){a={error:I}}finally{try{!p&&!s&&(l=m.return)&&(yield $e(l.call(m)))}finally{if(a)throw a.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(o=>o.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...Jb(r)):this.history.push(e),this.history.push(...i)}};var sh=class t extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,t.prototype)}};function V$(t){let e={},n=u(t,["file"]);return n!=null&&d(e,["file"],n),e}function U$(t){let e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function B$(t){let e={},n=u(t,["name"]);return n!=null&&d(e,["_url","file"],gM(n)),e}function H$(t){let e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function $$(t){let e={},n=u(t,["name"]);return n!=null&&d(e,["_url","file"],gM(n)),e}function G$(t,e){let n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let i=u(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function q$(t){let e={},n=u(t,["config"]);return n!=null&&G$(n,e),e}function z$(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let i=u(t,["files"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["files"],o)}return e}var S_=class extends Fn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Nr(_i.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=q$(e);return o=q("files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{let c=z$(l),h=new p_;return Object.assign(h,c),h})}}async createInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=V$(e);return o=q("upload/v1beta/files",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=U$(l),h=new m_;return Object.assign(h,c),h})}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=$$(e);return o=q("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=B$(e);return o=q("files/{file}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{let c=H$(l),h=new g_;return Object.assign(h,c),h})}}};function Wf(t){let e={},n=u(t,["data"]);if(n!=null&&d(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function j$(t){let e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>l3(o))),d(e,["parts"],i)}let r=u(t,["role"]);return r!=null&&d(e,["role"],r),e}function W$(t){let e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);let r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function K$(t){let e={},n=u(t,["id"]);n!=null&&d(e,["id"],n);let r=u(t,["args"]);r!=null&&d(e,["args"],r);let i=u(t,["name"]);if(i!=null&&d(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function J$(t){let e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=u(t,["description"]);n!=null&&d(e,["description"],n);let r=u(t,["name"]);r!=null&&d(e,["name"],r);let i=u(t,["parameters"]);i!=null&&d(e,["parameters"],i);let o=u(t,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);let s=u(t,["response"]);s!=null&&d(e,["response"],s);let a=u(t,["responseJsonSchema"]);return a!=null&&d(e,["responseJsonSchema"],a),e}function Q$(t){let e={},n=u(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);let r=u(t,["responseJsonSchema"]);r!=null&&d(e,["responseJsonSchema"],r);let i=u(t,["audioTimestamp"]);i!=null&&d(e,["audioTimestamp"],i);let o=u(t,["candidateCount"]);o!=null&&d(e,["candidateCount"],o);let s=u(t,["enableAffectiveDialog"]);s!=null&&d(e,["enableAffectiveDialog"],s);let a=u(t,["frequencyPenalty"]);a!=null&&d(e,["frequencyPenalty"],a);let l=u(t,["logprobs"]);l!=null&&d(e,["logprobs"],l);let c=u(t,["maxOutputTokens"]);c!=null&&d(e,["maxOutputTokens"],c);let h=u(t,["mediaResolution"]);h!=null&&d(e,["mediaResolution"],h);let p=u(t,["presencePenalty"]);p!=null&&d(e,["presencePenalty"],p);let m=u(t,["responseLogprobs"]);m!=null&&d(e,["responseLogprobs"],m);let v=u(t,["responseMimeType"]);v!=null&&d(e,["responseMimeType"],v);let I=u(t,["responseModalities"]);I!=null&&d(e,["responseModalities"],I);let b=u(t,["responseSchema"]);b!=null&&d(e,["responseSchema"],b);let A=u(t,["routingConfig"]);A!=null&&d(e,["routingConfig"],A);let N=u(t,["seed"]);N!=null&&d(e,["seed"],N);let O=u(t,["speechConfig"]);O!=null&&d(e,["speechConfig"],wM(O));let L=u(t,["stopSequences"]);L!=null&&d(e,["stopSequences"],L);let G=u(t,["temperature"]);G!=null&&d(e,["temperature"],G);let Z=u(t,["thinkingConfig"]);Z!=null&&d(e,["thinkingConfig"],Z);let Y=u(t,["topK"]);Y!=null&&d(e,["topK"],Y);let w=u(t,["topP"]);if(w!=null&&d(e,["topP"],w),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Y$(t){let e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function Z$(t){let e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function X$(t,e){let n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);let i=u(t,["responseModalities"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","responseModalities"],i);let o=u(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);let s=u(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);let a=u(t,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);let l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","maxOutputTokens"],l);let c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);let h=u(t,["seed"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","seed"],h);let p=u(t,["speechConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","speechConfig"],Z_(p));let m=u(t,["thinkingConfig"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","thinkingConfig"],m);let v=u(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],v);let I=u(t,["systemInstruction"]);e!==void 0&&I!=null&&d(e,["setup","systemInstruction"],j$(At(I)));let b=u(t,["tools"]);if(e!==void 0&&b!=null){let Y=Vs(b);Array.isArray(Y)&&(Y=Y.map(w=>c3(Ls(w)))),d(e,["setup","tools"],Y)}let A=u(t,["sessionResumption"]);e!==void 0&&A!=null&&d(e,["setup","sessionResumption"],u3(A));let N=u(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&d(e,["setup","inputAudioTranscription"],N);let O=u(t,["outputAudioTranscription"]);e!==void 0&&O!=null&&d(e,["setup","outputAudioTranscription"],O);let L=u(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&d(e,["setup","realtimeInputConfig"],L);let G=u(t,["contextWindowCompression"]);e!==void 0&&G!=null&&d(e,["setup","contextWindowCompression"],G);let Z=u(t,["proactivity"]);return e!==void 0&&Z!=null&&d(e,["setup","proactivity"],Z),n}function e3(t,e){let n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],Q$(r));let i=u(t,["responseModalities"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","responseModalities"],i);let o=u(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);let s=u(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);let a=u(t,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);let l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","maxOutputTokens"],l);let c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);let h=u(t,["seed"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","seed"],h);let p=u(t,["speechConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","speechConfig"],wM(Z_(p)));let m=u(t,["thinkingConfig"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","thinkingConfig"],m);let v=u(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],v);let I=u(t,["systemInstruction"]);e!==void 0&&I!=null&&d(e,["setup","systemInstruction"],At(I));let b=u(t,["tools"]);if(e!==void 0&&b!=null){let Y=Vs(b);Array.isArray(Y)&&(Y=Y.map(w=>d3(Ls(w)))),d(e,["setup","tools"],Y)}let A=u(t,["sessionResumption"]);e!==void 0&&A!=null&&d(e,["setup","sessionResumption"],A);let N=u(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&d(e,["setup","inputAudioTranscription"],N);let O=u(t,["outputAudioTranscription"]);e!==void 0&&O!=null&&d(e,["setup","outputAudioTranscription"],O);let L=u(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&d(e,["setup","realtimeInputConfig"],L);let G=u(t,["contextWindowCompression"]);e!==void 0&&G!=null&&d(e,["setup","contextWindowCompression"],G);let Z=u(t,["proactivity"]);return e!==void 0&&Z!=null&&d(e,["setup","proactivity"],Z),n}function t3(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["setup","model"],Se(t,r));let i=u(e,["config"]);return i!=null&&d(n,["config"],X$(i,n)),n}function n3(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["setup","model"],Se(t,r));let i=u(e,["config"]);return i!=null&&d(n,["config"],e3(i,n)),n}function r3(t){let e={},n=u(t,["musicGenerationConfig"]);return n!=null&&d(e,["musicGenerationConfig"],n),e}function i3(t){let e={},n=u(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),d(e,["weightedPrompts"],r)}return e}function o3(t){let e={},n=u(t,["media"]);if(n!=null){let c=dM(n);Array.isArray(c)&&(c=c.map(h=>Wf(h))),d(e,["mediaChunks"],c)}let r=u(t,["audio"]);r!=null&&d(e,["audio"],Wf(hM(r)));let i=u(t,["audioStreamEnd"]);i!=null&&d(e,["audioStreamEnd"],i);let o=u(t,["video"]);o!=null&&d(e,["video"],Wf(fM(o)));let s=u(t,["text"]);s!=null&&d(e,["text"],s);let a=u(t,["activityStart"]);a!=null&&d(e,["activityStart"],a);let l=u(t,["activityEnd"]);return l!=null&&d(e,["activityEnd"],l),e}function s3(t){let e={},n=u(t,["media"]);if(n!=null){let c=dM(n);Array.isArray(c)&&(c=c.map(h=>h)),d(e,["mediaChunks"],c)}let r=u(t,["audio"]);r!=null&&d(e,["audio"],hM(r));let i=u(t,["audioStreamEnd"]);i!=null&&d(e,["audioStreamEnd"],i);let o=u(t,["video"]);o!=null&&d(e,["video"],fM(o));let s=u(t,["text"]);s!=null&&d(e,["text"],s);let a=u(t,["activityStart"]);a!=null&&d(e,["activityStart"],a);let l=u(t,["activityEnd"]);return l!=null&&d(e,["activityEnd"],l),e}function a3(t){let e={},n=u(t,["setupComplete"]);n!=null&&d(e,["setupComplete"],n);let r=u(t,["serverContent"]);r!=null&&d(e,["serverContent"],r);let i=u(t,["toolCall"]);i!=null&&d(e,["toolCall"],i);let o=u(t,["toolCallCancellation"]);o!=null&&d(e,["toolCallCancellation"],o);let s=u(t,["usageMetadata"]);s!=null&&d(e,["usageMetadata"],f3(s));let a=u(t,["goAway"]);a!=null&&d(e,["goAway"],a);let l=u(t,["sessionResumptionUpdate"]);return l!=null&&d(e,["sessionResumptionUpdate"],l),e}function l3(t){let e={},n=u(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);let r=u(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);let i=u(t,["executableCode"]);i!=null&&d(e,["executableCode"],i);let o=u(t,["fileData"]);o!=null&&d(e,["fileData"],W$(o));let s=u(t,["functionCall"]);s!=null&&d(e,["functionCall"],K$(s));let a=u(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);let l=u(t,["inlineData"]);l!=null&&d(e,["inlineData"],Wf(l));let c=u(t,["text"]);c!=null&&d(e,["text"],c);let h=u(t,["thought"]);h!=null&&d(e,["thought"],h);let p=u(t,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);let m=u(t,["videoMetadata"]);return m!=null&&d(e,["videoMetadata"],m),e}function u3(t){let e={},n=u(t,["handle"]);if(n!=null&&d(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function wM(t){let e={},n=u(t,["languageCode"]);n!=null&&d(e,["languageCode"],n);let r=u(t,["voiceConfig"]);if(r!=null&&d(e,["voiceConfig"],r),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function c3(t){let e={},n=u(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),d(e,["functionDeclarations"],h)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=u(t,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);let i=u(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);let o=u(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);let s=u(t,["codeExecution"]);if(s!=null&&d(e,["codeExecution"],s),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let a=u(t,["googleMaps"]);a!=null&&d(e,["googleMaps"],Y$(a));let l=u(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],Z$(l));let c=u(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}function d3(t){let e={},n=u(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>J$(m))),d(e,["functionDeclarations"],p)}let r=u(t,["retrieval"]);r!=null&&d(e,["retrieval"],r);let i=u(t,["googleSearchRetrieval"]);i!=null&&d(e,["googleSearchRetrieval"],i);let o=u(t,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let s=u(t,["codeExecution"]);s!=null&&d(e,["codeExecution"],s);let a=u(t,["enterpriseWebSearch"]);a!=null&&d(e,["enterpriseWebSearch"],a);let l=u(t,["googleMaps"]);l!=null&&d(e,["googleMaps"],l);let c=u(t,["googleSearch"]);c!=null&&d(e,["googleSearch"],c);let h=u(t,["urlContext"]);return h!=null&&d(e,["urlContext"],h),e}function f3(t){let e={},n=u(t,["promptTokenCount"]);n!=null&&d(e,["promptTokenCount"],n);let r=u(t,["cachedContentTokenCount"]);r!=null&&d(e,["cachedContentTokenCount"],r);let i=u(t,["candidatesTokenCount"]);i!=null&&d(e,["responseTokenCount"],i);let o=u(t,["toolUsePromptTokenCount"]);o!=null&&d(e,["toolUsePromptTokenCount"],o);let s=u(t,["thoughtsTokenCount"]);s!=null&&d(e,["thoughtsTokenCount"],s);let a=u(t,["totalTokenCount"]);a!=null&&d(e,["totalTokenCount"],a);let l=u(t,["promptTokensDetails"]);if(l!=null){let v=l;Array.isArray(v)&&(v=v.map(I=>I)),d(e,["promptTokensDetails"],v)}let c=u(t,["cacheTokensDetails"]);if(c!=null){let v=c;Array.isArray(v)&&(v=v.map(I=>I)),d(e,["cacheTokensDetails"],v)}let h=u(t,["candidatesTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(I=>I)),d(e,["responseTokensDetails"],v)}let p=u(t,["toolUsePromptTokensDetails"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(I=>I)),d(e,["toolUsePromptTokensDetails"],v)}let m=u(t,["trafficType"]);return m!=null&&d(e,["trafficType"],m),e}function h3(t){let e={},n=u(t,["data"]);if(n!=null&&d(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function p3(t){let e={},n=u(t,["content"]);n!=null&&d(e,["content"],n);let r=u(t,["citationMetadata"]);r!=null&&d(e,["citationMetadata"],m3(r));let i=u(t,["tokenCount"]);i!=null&&d(e,["tokenCount"],i);let o=u(t,["finishReason"]);o!=null&&d(e,["finishReason"],o);let s=u(t,["avgLogprobs"]);s!=null&&d(e,["avgLogprobs"],s);let a=u(t,["groundingMetadata"]);a!=null&&d(e,["groundingMetadata"],a);let l=u(t,["index"]);l!=null&&d(e,["index"],l);let c=u(t,["logprobsResult"]);c!=null&&d(e,["logprobsResult"],c);let h=u(t,["safetyRatings"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(v=>v)),d(e,["safetyRatings"],m)}let p=u(t,["urlContextMetadata"]);return p!=null&&d(e,["urlContextMetadata"],p),e}function m3(t){let e={},n=u(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),d(e,["citations"],r)}return e}function g3(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],Se(t,r));let i=u(e,["contents"]);if(i!=null){let o=vn(i);Array.isArray(o)&&(o=o.map(s=>s)),d(n,["contents"],o)}return n}function y3(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),d(e,["tokensInfo"],i)}return e}function v3(t){let e={},n=u(t,["values"]);n!=null&&d(e,["values"],n);let r=u(t,["statistics"]);return r!=null&&d(e,["statistics"],_3(r)),e}function _3(t){let e={},n=u(t,["truncated"]);n!=null&&d(e,["truncated"],n);let r=u(t,["token_count"]);return r!=null&&d(e,["tokenCount"],r),e}function uh(t){let e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>b4(o))),d(e,["parts"],i)}let r=u(t,["role"]);return r!=null&&d(e,["role"],r),e}function E3(t){let e={},n=u(t,["controlType"]);n!=null&&d(e,["controlType"],n);let r=u(t,["enableControlImageComputation"]);return r!=null&&d(e,["computeControl"],r),e}function C3(t){let e={};if(u(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(u(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(u(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function I3(t,e){let n={},r=u(t,["systemInstruction"]);e!==void 0&&r!=null&&d(e,["systemInstruction"],At(r));let i=u(t,["tools"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(a=>MM(a))),d(e,["tools"],s)}let o=u(t,["generationConfig"]);return e!==void 0&&o!=null&&d(e,["generationConfig"],h4(o)),n}function T3(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],Se(t,r));let i=u(e,["contents"]);if(i!=null){let s=vn(i);Array.isArray(s)&&(s=s.map(a=>uh(a))),d(n,["contents"],s)}let o=u(e,["config"]);return o!=null&&C3(o),n}function w3(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],Se(t,r));let i=u(e,["contents"]);if(i!=null){let s=vn(i);Array.isArray(s)&&(s=s.map(a=>a)),d(n,["contents"],s)}let o=u(e,["config"]);return o!=null&&I3(o,n),n}function D3(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["totalTokens"]);r!=null&&d(e,["totalTokens"],r);let i=u(t,["cachedContentTokenCount"]);return i!=null&&d(e,["cachedContentTokenCount"],i),e}function S3(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["totalTokens"]);return r!=null&&d(e,["totalTokens"],r),e}function A3(t,e){let n={},r=u(e,["model"]);return r!=null&&d(n,["_url","name"],Se(t,r)),n}function b3(t,e){let n={},r=u(e,["model"]);return r!=null&&d(n,["_url","name"],Se(t,r)),n}function M3(t){let e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function R3(t){let e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}function N3(t,e){let n={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);let i=u(t,["negativePrompt"]);e!==void 0&&i!=null&&d(e,["parameters","negativePrompt"],i);let o=u(t,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);let s=u(t,["aspectRatio"]);e!==void 0&&s!=null&&d(e,["parameters","aspectRatio"],s);let a=u(t,["guidanceScale"]);e!==void 0&&a!=null&&d(e,["parameters","guidanceScale"],a);let l=u(t,["seed"]);e!==void 0&&l!=null&&d(e,["parameters","seed"],l);let c=u(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&d(e,["parameters","safetySetting"],c);let h=u(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);let p=u(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&d(e,["parameters","includeSafetyAttributes"],p);let m=u(t,["includeRaiReason"]);e!==void 0&&m!=null&&d(e,["parameters","includeRaiReason"],m);let v=u(t,["language"]);e!==void 0&&v!=null&&d(e,["parameters","language"],v);let I=u(t,["outputMimeType"]);e!==void 0&&I!=null&&d(e,["parameters","outputOptions","mimeType"],I);let b=u(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&d(e,["parameters","outputOptions","compressionQuality"],b);let A=u(t,["addWatermark"]);e!==void 0&&A!=null&&d(e,["parameters","addWatermark"],A);let N=u(t,["labels"]);e!==void 0&&N!=null&&d(e,["labels"],N);let O=u(t,["editMode"]);e!==void 0&&O!=null&&d(e,["parameters","editMode"],O);let L=u(t,["baseSteps"]);return e!==void 0&&L!=null&&d(e,["parameters","editConfig","baseSteps"],L),n}function x3(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],Se(t,r));let i=u(e,["prompt"]);i!=null&&d(n,["instances[0]","prompt"],i);let o=u(e,["referenceImages"]);if(o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>k4(l))),d(n,["instances[0]","referenceImages"],a)}let s=u(e,["config"]);return s!=null&&N3(s,n),n}function P3(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>ch(o))),d(e,["generatedImages"],i)}return e}function k3(t,e){let n={},r=u(t,["taskType"]);e!==void 0&&r!=null&&d(e,["requests[]","taskType"],r);let i=u(t,["title"]);e!==void 0&&i!=null&&d(e,["requests[]","title"],i);let o=u(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&d(e,["requests[]","outputDimensionality"],o),u(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(u(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function F3(t,e){let n={},r=u(t,["taskType"]);e!==void 0&&r!=null&&d(e,["instances[]","task_type"],r);let i=u(t,["title"]);e!==void 0&&i!=null&&d(e,["instances[]","title"],i);let o=u(t,["outputDimensionality"]);e!==void 0&&o!=null&&d(e,["parameters","outputDimensionality"],o);let s=u(t,["mimeType"]);e!==void 0&&s!=null&&d(e,["instances[]","mimeType"],s);let a=u(t,["autoTruncate"]);return e!==void 0&&a!=null&&d(e,["parameters","autoTruncate"],a),n}function O3(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],Se(t,r));let i=u(e,["contents"]);if(i!=null){let a=J_(t,i);Array.isArray(a)&&(a=a.map(l=>l)),d(n,["requests[]","content"],a)}let o=u(e,["config"]);o!=null&&k3(o,n);let s=u(e,["model"]);return s!==void 0&&d(n,["requests[]","model"],Se(t,s)),n}function L3(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],Se(t,r));let i=u(e,["contents"]);if(i!=null){let s=J_(t,i);Array.isArray(s)&&(s=s.map(a=>a)),d(n,["instances[]","content"],s)}let o=u(e,["config"]);return o!=null&&F3(o,n),n}function V3(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["embeddings"],o)}let i=u(t,["metadata"]);return i!=null&&d(e,["metadata"],i),e}function U3(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["predictions[]","embeddings"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>v3(s))),d(e,["embeddings"],o)}let i=u(t,["metadata"]);return i!=null&&d(e,["metadata"],i),e}function B3(t){let e={},n=u(t,["endpoint"]);n!=null&&d(e,["name"],n);let r=u(t,["deployedModelId"]);return r!=null&&d(e,["deployedModelId"],r),e}function H3(t){let e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);let r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function $3(t){let e={},n=u(t,["id"]);n!=null&&d(e,["id"],n);let r=u(t,["args"]);r!=null&&d(e,["args"],r);let i=u(t,["name"]);if(i!=null&&d(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function G3(t){let e={},n=u(t,["mode"]);n!=null&&d(e,["mode"],n);let r=u(t,["allowedFunctionNames"]);if(r!=null&&d(e,["allowedFunctionNames"],r),u(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function q3(t){let e={};if(u(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=u(t,["description"]);n!=null&&d(e,["description"],n);let r=u(t,["name"]);r!=null&&d(e,["name"],r);let i=u(t,["parameters"]);i!=null&&d(e,["parameters"],i);let o=u(t,["parametersJsonSchema"]);o!=null&&d(e,["parametersJsonSchema"],o);let s=u(t,["response"]);s!=null&&d(e,["response"],s);let a=u(t,["responseJsonSchema"]);return a!=null&&d(e,["responseJsonSchema"],a),e}function z3(t,e,n){let r={},i=u(e,["systemInstruction"]);n!==void 0&&i!=null&&d(n,["systemInstruction"],uh(At(i)));let o=u(e,["temperature"]);o!=null&&d(r,["temperature"],o);let s=u(e,["topP"]);s!=null&&d(r,["topP"],s);let a=u(e,["topK"]);a!=null&&d(r,["topK"],a);let l=u(e,["candidateCount"]);l!=null&&d(r,["candidateCount"],l);let c=u(e,["maxOutputTokens"]);c!=null&&d(r,["maxOutputTokens"],c);let h=u(e,["stopSequences"]);h!=null&&d(r,["stopSequences"],h);let p=u(e,["responseLogprobs"]);p!=null&&d(r,["responseLogprobs"],p);let m=u(e,["logprobs"]);m!=null&&d(r,["logprobs"],m);let v=u(e,["presencePenalty"]);v!=null&&d(r,["presencePenalty"],v);let I=u(e,["frequencyPenalty"]);I!=null&&d(r,["frequencyPenalty"],I);let b=u(e,["seed"]);b!=null&&d(r,["seed"],b);let A=u(e,["responseMimeType"]);A!=null&&d(r,["responseMimeType"],A);let N=u(e,["responseSchema"]);N!=null&&d(r,["responseSchema"],Q_(N));let O=u(e,["responseJsonSchema"]);if(O!=null&&d(r,["responseJsonSchema"],O),u(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(u(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let L=u(e,["safetySettings"]);if(n!==void 0&&L!=null){let M=L;Array.isArray(M)&&(M=M.map(T=>F4(T))),d(n,["safetySettings"],M)}let G=u(e,["tools"]);if(n!==void 0&&G!=null){let M=Vs(G);Array.isArray(M)&&(M=M.map(T=>$4(Ls(T)))),d(n,["tools"],M)}let Z=u(e,["toolConfig"]);if(n!==void 0&&Z!=null&&d(n,["toolConfig"],H4(Z)),u(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let Y=u(e,["cachedContent"]);n!==void 0&&Y!=null&&d(n,["cachedContent"],xr(t,Y));let w=u(e,["responseModalities"]);w!=null&&d(r,["responseModalities"],w);let C=u(e,["mediaResolution"]);C!=null&&d(r,["mediaResolution"],C);let E=u(e,["speechConfig"]);if(E!=null&&d(r,["speechConfig"],Y_(E)),u(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let S=u(e,["thinkingConfig"]);S!=null&&d(r,["thinkingConfig"],S);let D=u(e,["imageConfig"]);return D!=null&&d(r,["imageConfig"],v4(D)),r}function j3(t,e,n){let r={},i=u(e,["systemInstruction"]);n!==void 0&&i!=null&&d(n,["systemInstruction"],At(i));let o=u(e,["temperature"]);o!=null&&d(r,["temperature"],o);let s=u(e,["topP"]);s!=null&&d(r,["topP"],s);let a=u(e,["topK"]);a!=null&&d(r,["topK"],a);let l=u(e,["candidateCount"]);l!=null&&d(r,["candidateCount"],l);let c=u(e,["maxOutputTokens"]);c!=null&&d(r,["maxOutputTokens"],c);let h=u(e,["stopSequences"]);h!=null&&d(r,["stopSequences"],h);let p=u(e,["responseLogprobs"]);p!=null&&d(r,["responseLogprobs"],p);let m=u(e,["logprobs"]);m!=null&&d(r,["logprobs"],m);let v=u(e,["presencePenalty"]);v!=null&&d(r,["presencePenalty"],v);let I=u(e,["frequencyPenalty"]);I!=null&&d(r,["frequencyPenalty"],I);let b=u(e,["seed"]);b!=null&&d(r,["seed"],b);let A=u(e,["responseMimeType"]);A!=null&&d(r,["responseMimeType"],A);let N=u(e,["responseSchema"]);N!=null&&d(r,["responseSchema"],Q_(N));let O=u(e,["responseJsonSchema"]);O!=null&&d(r,["responseJsonSchema"],O);let L=u(e,["routingConfig"]);L!=null&&d(r,["routingConfig"],L);let G=u(e,["modelSelectionConfig"]);G!=null&&d(r,["modelConfig"],G);let Z=u(e,["safetySettings"]);if(n!==void 0&&Z!=null){let Cn=Z;Array.isArray(Cn)&&(Cn=Cn.map(ya=>ya)),d(n,["safetySettings"],Cn)}let Y=u(e,["tools"]);if(n!==void 0&&Y!=null){let Cn=Vs(Y);Array.isArray(Cn)&&(Cn=Cn.map(ya=>MM(Ls(ya)))),d(n,["tools"],Cn)}let w=u(e,["toolConfig"]);n!==void 0&&w!=null&&d(n,["toolConfig"],w);let C=u(e,["labels"]);n!==void 0&&C!=null&&d(n,["labels"],C);let E=u(e,["cachedContent"]);n!==void 0&&E!=null&&d(n,["cachedContent"],xr(t,E));let S=u(e,["responseModalities"]);S!=null&&d(r,["responseModalities"],S);let D=u(e,["mediaResolution"]);D!=null&&d(r,["mediaResolution"],D);let M=u(e,["speechConfig"]);M!=null&&d(r,["speechConfig"],bM(Y_(M)));let T=u(e,["audioTimestamp"]);T!=null&&d(r,["audioTimestamp"],T);let yt=u(e,["thinkingConfig"]);yt!=null&&d(r,["thinkingConfig"],yt);let En=u(e,["imageConfig"]);return En!=null&&d(r,["imageConfig"],_4(En)),r}function Qb(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],Se(t,r));let i=u(e,["contents"]);if(i!=null){let s=vn(i);Array.isArray(s)&&(s=s.map(a=>uh(a))),d(n,["contents"],s)}let o=u(e,["config"]);return o!=null&&d(n,["generationConfig"],z3(t,o,n)),n}function Yb(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],Se(t,r));let i=u(e,["contents"]);if(i!=null){let s=vn(i);Array.isArray(s)&&(s=s.map(a=>a)),d(n,["contents"],s)}let o=u(e,["config"]);return o!=null&&d(n,["generationConfig"],j3(t,o,n)),n}function Zb(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["candidates"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>p3(c))),d(e,["candidates"],l)}let i=u(t,["modelVersion"]);i!=null&&d(e,["modelVersion"],i);let o=u(t,["promptFeedback"]);o!=null&&d(e,["promptFeedback"],o);let s=u(t,["responseId"]);s!=null&&d(e,["responseId"],s);let a=u(t,["usageMetadata"]);return a!=null&&d(e,["usageMetadata"],a),e}function Xb(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["candidates"]);if(r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>h)),d(e,["candidates"],c)}let i=u(t,["createTime"]);i!=null&&d(e,["createTime"],i);let o=u(t,["modelVersion"]);o!=null&&d(e,["modelVersion"],o);let s=u(t,["promptFeedback"]);s!=null&&d(e,["promptFeedback"],s);let a=u(t,["responseId"]);a!=null&&d(e,["responseId"],a);let l=u(t,["usageMetadata"]);return l!=null&&d(e,["usageMetadata"],l),e}function W3(t,e){let n={};if(u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let r=u(t,["numberOfImages"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);let i=u(t,["aspectRatio"]);e!==void 0&&i!=null&&d(e,["parameters","aspectRatio"],i);let o=u(t,["guidanceScale"]);if(e!==void 0&&o!=null&&d(e,["parameters","guidanceScale"],o),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=u(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&d(e,["parameters","safetySetting"],s);let a=u(t,["personGeneration"]);e!==void 0&&a!=null&&d(e,["parameters","personGeneration"],a);let l=u(t,["includeSafetyAttributes"]);e!==void 0&&l!=null&&d(e,["parameters","includeSafetyAttributes"],l);let c=u(t,["includeRaiReason"]);e!==void 0&&c!=null&&d(e,["parameters","includeRaiReason"],c);let h=u(t,["language"]);e!==void 0&&h!=null&&d(e,["parameters","language"],h);let p=u(t,["outputMimeType"]);e!==void 0&&p!=null&&d(e,["parameters","outputOptions","mimeType"],p);let m=u(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&d(e,["parameters","outputOptions","compressionQuality"],m),u(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let v=u(t,["imageSize"]);if(e!==void 0&&v!=null&&d(e,["parameters","sampleImageSize"],v),u(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function K3(t,e){let n={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);let i=u(t,["negativePrompt"]);e!==void 0&&i!=null&&d(e,["parameters","negativePrompt"],i);let o=u(t,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);let s=u(t,["aspectRatio"]);e!==void 0&&s!=null&&d(e,["parameters","aspectRatio"],s);let a=u(t,["guidanceScale"]);e!==void 0&&a!=null&&d(e,["parameters","guidanceScale"],a);let l=u(t,["seed"]);e!==void 0&&l!=null&&d(e,["parameters","seed"],l);let c=u(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&d(e,["parameters","safetySetting"],c);let h=u(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);let p=u(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&d(e,["parameters","includeSafetyAttributes"],p);let m=u(t,["includeRaiReason"]);e!==void 0&&m!=null&&d(e,["parameters","includeRaiReason"],m);let v=u(t,["language"]);e!==void 0&&v!=null&&d(e,["parameters","language"],v);let I=u(t,["outputMimeType"]);e!==void 0&&I!=null&&d(e,["parameters","outputOptions","mimeType"],I);let b=u(t,["outputCompressionQuality"]);e!==void 0&&b!=null&&d(e,["parameters","outputOptions","compressionQuality"],b);let A=u(t,["addWatermark"]);e!==void 0&&A!=null&&d(e,["parameters","addWatermark"],A);let N=u(t,["labels"]);e!==void 0&&N!=null&&d(e,["labels"],N);let O=u(t,["imageSize"]);e!==void 0&&O!=null&&d(e,["parameters","sampleImageSize"],O);let L=u(t,["enhancePrompt"]);return e!==void 0&&L!=null&&d(e,["parameters","enhancePrompt"],L),n}function J3(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],Se(t,r));let i=u(e,["prompt"]);i!=null&&d(n,["instances[0]","prompt"],i);let o=u(e,["config"]);return o!=null&&W3(o,n),n}function Q3(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],Se(t,r));let i=u(e,["prompt"]);i!=null&&d(n,["instances[0]","prompt"],i);let o=u(e,["config"]);return o!=null&&K3(o,n),n}function Y3(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>u4(s))),d(e,["generatedImages"],o)}let i=u(t,["positivePromptSafetyAttributes"]);return i!=null&&d(e,["positivePromptSafetyAttributes"],SM(i)),e}function Z3(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["predictions"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>ch(s))),d(e,["generatedImages"],o)}let i=u(t,["positivePromptSafetyAttributes"]);return i!=null&&d(e,["positivePromptSafetyAttributes"],AM(i)),e}function X3(t,e){let n={},r=u(t,["numberOfVideos"]);if(e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r),u(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(u(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let i=u(t,["durationSeconds"]);if(e!==void 0&&i!=null&&d(e,["parameters","durationSeconds"],i),u(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let o=u(t,["aspectRatio"]);e!==void 0&&o!=null&&d(e,["parameters","aspectRatio"],o);let s=u(t,["resolution"]);e!==void 0&&s!=null&&d(e,["parameters","resolution"],s);let a=u(t,["personGeneration"]);if(e!==void 0&&a!=null&&d(e,["parameters","personGeneration"],a),u(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let l=u(t,["negativePrompt"]);e!==void 0&&l!=null&&d(e,["parameters","negativePrompt"],l);let c=u(t,["enhancePrompt"]);if(e!==void 0&&c!=null&&d(e,["parameters","enhancePrompt"],c),u(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let h=u(t,["lastFrame"]);e!==void 0&&h!=null&&d(e,["instances[0]","lastFrame"],dh(h));let p=u(t,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(v=>tG(v))),d(e,["instances[0]","referenceImages"],m)}if(u(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(u(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function e4(t,e){let n={},r=u(t,["numberOfVideos"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);let i=u(t,["outputGcsUri"]);e!==void 0&&i!=null&&d(e,["parameters","storageUri"],i);let o=u(t,["fps"]);e!==void 0&&o!=null&&d(e,["parameters","fps"],o);let s=u(t,["durationSeconds"]);e!==void 0&&s!=null&&d(e,["parameters","durationSeconds"],s);let a=u(t,["seed"]);e!==void 0&&a!=null&&d(e,["parameters","seed"],a);let l=u(t,["aspectRatio"]);e!==void 0&&l!=null&&d(e,["parameters","aspectRatio"],l);let c=u(t,["resolution"]);e!==void 0&&c!=null&&d(e,["parameters","resolution"],c);let h=u(t,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);let p=u(t,["pubsubTopic"]);e!==void 0&&p!=null&&d(e,["parameters","pubsubTopic"],p);let m=u(t,["negativePrompt"]);e!==void 0&&m!=null&&d(e,["parameters","negativePrompt"],m);let v=u(t,["enhancePrompt"]);e!==void 0&&v!=null&&d(e,["parameters","enhancePrompt"],v);let I=u(t,["generateAudio"]);e!==void 0&&I!=null&&d(e,["parameters","generateAudio"],I);let b=u(t,["lastFrame"]);e!==void 0&&b!=null&&d(e,["instances[0]","lastFrame"],On(b));let A=u(t,["referenceImages"]);if(e!==void 0&&A!=null){let L=A;Array.isArray(L)&&(L=L.map(G=>nG(G))),d(e,["instances[0]","referenceImages"],L)}let N=u(t,["mask"]);e!==void 0&&N!=null&&d(e,["instances[0]","mask"],eG(N));let O=u(t,["compressionQuality"]);return e!==void 0&&O!=null&&d(e,["parameters","compressionQuality"],O),n}function t4(t){let e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);let r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);let i=u(t,["done"]);i!=null&&d(e,["done"],i);let o=u(t,["error"]);o!=null&&d(e,["error"],o);let s=u(t,["response","generateVideoResponse"]);return s!=null&&d(e,["response"],o4(s)),e}function n4(t){let e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);let r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);let i=u(t,["done"]);i!=null&&d(e,["done"],i);let o=u(t,["error"]);o!=null&&d(e,["error"],o);let s=u(t,["response"]);return s!=null&&d(e,["response"],s4(s)),e}function r4(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],Se(t,r));let i=u(e,["prompt"]);i!=null&&d(n,["instances[0]","prompt"],i);let o=u(e,["image"]);o!=null&&d(n,["instances[0]","image"],dh(o));let s=u(e,["video"]);s!=null&&d(n,["instances[0]","video"],RM(s));let a=u(e,["source"]);a!=null&&a4(a,n);let l=u(e,["config"]);return l!=null&&X3(l,n),n}function i4(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],Se(t,r));let i=u(e,["prompt"]);i!=null&&d(n,["instances[0]","prompt"],i);let o=u(e,["image"]);o!=null&&d(n,["instances[0]","image"],On(o));let s=u(e,["video"]);s!=null&&d(n,["instances[0]","video"],NM(s));let a=u(e,["source"]);a!=null&&l4(a,n);let l=u(e,["config"]);return l!=null&&e4(l,n),n}function o4(t){let e={},n=u(t,["generatedSamples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>d4(s))),d(e,["generatedVideos"],o)}let r=u(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);let i=u(t,["raiMediaFilteredReasons"]);return i!=null&&d(e,["raiMediaFilteredReasons"],i),e}function s4(t){let e={},n=u(t,["videos"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(s=>f4(s))),d(e,["generatedVideos"],o)}let r=u(t,["raiMediaFilteredCount"]);r!=null&&d(e,["raiMediaFilteredCount"],r);let i=u(t,["raiMediaFilteredReasons"]);return i!=null&&d(e,["raiMediaFilteredReasons"],i),e}function a4(t,e){let n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);let i=u(t,["image"]);e!==void 0&&i!=null&&d(e,["instances[0]","image"],dh(i));let o=u(t,["video"]);return e!==void 0&&o!=null&&d(e,["instances[0]","video"],RM(o)),n}function l4(t,e){let n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);let i=u(t,["image"]);e!==void 0&&i!=null&&d(e,["instances[0]","image"],On(i));let o=u(t,["video"]);return e!==void 0&&o!=null&&d(e,["instances[0]","video"],NM(o)),n}function u4(t){let e={},n=u(t,["_self"]);n!=null&&d(e,["image"],E4(n));let r=u(t,["raiFilteredReason"]);r!=null&&d(e,["raiFilteredReason"],r);let i=u(t,["_self"]);return i!=null&&d(e,["safetyAttributes"],SM(i)),e}function ch(t){let e={},n=u(t,["_self"]);n!=null&&d(e,["image"],DM(n));let r=u(t,["raiFilteredReason"]);r!=null&&d(e,["raiFilteredReason"],r);let i=u(t,["_self"]);i!=null&&d(e,["safetyAttributes"],AM(i));let o=u(t,["prompt"]);return o!=null&&d(e,["enhancedPrompt"],o),e}function c4(t){let e={},n=u(t,["_self"]);n!=null&&d(e,["mask"],DM(n));let r=u(t,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),d(e,["labels"],i)}return e}function d4(t){let e={},n=u(t,["video"]);return n!=null&&d(e,["video"],Z4(n)),e}function f4(t){let e={},n=u(t,["_self"]);return n!=null&&d(e,["video"],X4(n)),e}function h4(t){let e={},n=u(t,["modelSelectionConfig"]);n!=null&&d(e,["modelConfig"],n);let r=u(t,["responseJsonSchema"]);r!=null&&d(e,["responseJsonSchema"],r);let i=u(t,["audioTimestamp"]);i!=null&&d(e,["audioTimestamp"],i);let o=u(t,["candidateCount"]);o!=null&&d(e,["candidateCount"],o);let s=u(t,["enableAffectiveDialog"]);s!=null&&d(e,["enableAffectiveDialog"],s);let a=u(t,["frequencyPenalty"]);a!=null&&d(e,["frequencyPenalty"],a);let l=u(t,["logprobs"]);l!=null&&d(e,["logprobs"],l);let c=u(t,["maxOutputTokens"]);c!=null&&d(e,["maxOutputTokens"],c);let h=u(t,["mediaResolution"]);h!=null&&d(e,["mediaResolution"],h);let p=u(t,["presencePenalty"]);p!=null&&d(e,["presencePenalty"],p);let m=u(t,["responseLogprobs"]);m!=null&&d(e,["responseLogprobs"],m);let v=u(t,["responseMimeType"]);v!=null&&d(e,["responseMimeType"],v);let I=u(t,["responseModalities"]);I!=null&&d(e,["responseModalities"],I);let b=u(t,["responseSchema"]);b!=null&&d(e,["responseSchema"],b);let A=u(t,["routingConfig"]);A!=null&&d(e,["routingConfig"],A);let N=u(t,["seed"]);N!=null&&d(e,["seed"],N);let O=u(t,["speechConfig"]);O!=null&&d(e,["speechConfig"],bM(O));let L=u(t,["stopSequences"]);L!=null&&d(e,["stopSequences"],L);let G=u(t,["temperature"]);G!=null&&d(e,["temperature"],G);let Z=u(t,["thinkingConfig"]);Z!=null&&d(e,["thinkingConfig"],Z);let Y=u(t,["topK"]);Y!=null&&d(e,["topK"],Y);let w=u(t,["topP"]);if(w!=null&&d(e,["topP"],w),u(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function p4(t,e){let n={},r=u(e,["model"]);return r!=null&&d(n,["_url","name"],Se(t,r)),n}function m4(t,e){let n={},r=u(e,["model"]);return r!=null&&d(n,["_url","name"],Se(t,r)),n}function g4(t){let e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function y4(t){let e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function v4(t){let e={},n=u(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);let r=u(t,["imageSize"]);if(r!=null&&d(e,["imageSize"],r),u(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(u(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function _4(t){let e={},n=u(t,["aspectRatio"]);n!=null&&d(e,["aspectRatio"],n);let r=u(t,["imageSize"]);r!=null&&d(e,["imageSize"],r);let i=u(t,["outputMimeType"]);i!=null&&d(e,["imageOutputOptions","mimeType"],i);let o=u(t,["outputCompressionQuality"]);return o!=null&&d(e,["imageOutputOptions","compressionQuality"],o),e}function E4(t){let e={},n=u(t,["bytesBase64Encoded"]);n!=null&&d(e,["imageBytes"],vi(n));let r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function DM(t){let e={},n=u(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);let r=u(t,["bytesBase64Encoded"]);r!=null&&d(e,["imageBytes"],vi(r));let i=u(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function dh(t){let e={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let n=u(t,["imageBytes"]);n!=null&&d(e,["bytesBase64Encoded"],vi(n));let r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function On(t){let e={},n=u(t,["gcsUri"]);n!=null&&d(e,["gcsUri"],n);let r=u(t,["imageBytes"]);r!=null&&d(e,["bytesBase64Encoded"],vi(r));let i=u(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function C4(t,e,n){let r={},i=u(e,["pageSize"]);n!==void 0&&i!=null&&d(n,["_query","pageSize"],i);let o=u(e,["pageToken"]);n!==void 0&&o!=null&&d(n,["_query","pageToken"],o);let s=u(e,["filter"]);n!==void 0&&s!=null&&d(n,["_query","filter"],s);let a=u(e,["queryBase"]);return n!==void 0&&a!=null&&d(n,["_url","models_url"],yM(t,a)),r}function I4(t,e,n){let r={},i=u(e,["pageSize"]);n!==void 0&&i!=null&&d(n,["_query","pageSize"],i);let o=u(e,["pageToken"]);n!==void 0&&o!=null&&d(n,["_query","pageToken"],o);let s=u(e,["filter"]);n!==void 0&&s!=null&&d(n,["_query","filter"],s);let a=u(e,["queryBase"]);return n!==void 0&&a!=null&&d(n,["_url","models_url"],yM(t,a)),r}function T4(t,e){let n={},r=u(e,["config"]);return r!=null&&C4(t,r,n),n}function w4(t,e){let n={},r=u(e,["config"]);return r!=null&&I4(t,r,n),n}function D4(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let i=u(t,["_self"]);if(i!=null){let o=vM(i);Array.isArray(o)&&(o=o.map(s=>A_(s))),d(e,["models"],o)}return e}function S4(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let i=u(t,["_self"]);if(i!=null){let o=vM(i);Array.isArray(o)&&(o=o.map(s=>b_(s))),d(e,["models"],o)}return e}function A4(t){let e={},n=u(t,["maskMode"]);n!=null&&d(e,["maskMode"],n);let r=u(t,["segmentationClasses"]);r!=null&&d(e,["maskClasses"],r);let i=u(t,["maskDilation"]);return i!=null&&d(e,["dilation"],i),e}function A_(t){let e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);let r=u(t,["displayName"]);r!=null&&d(e,["displayName"],r);let i=u(t,["description"]);i!=null&&d(e,["description"],i);let o=u(t,["version"]);o!=null&&d(e,["version"],o);let s=u(t,["_self"]);s!=null&&d(e,["tunedModelInfo"],G4(s));let a=u(t,["inputTokenLimit"]);a!=null&&d(e,["inputTokenLimit"],a);let l=u(t,["outputTokenLimit"]);l!=null&&d(e,["outputTokenLimit"],l);let c=u(t,["supportedGenerationMethods"]);c!=null&&d(e,["supportedActions"],c);let h=u(t,["temperature"]);h!=null&&d(e,["temperature"],h);let p=u(t,["maxTemperature"]);p!=null&&d(e,["maxTemperature"],p);let m=u(t,["topP"]);m!=null&&d(e,["topP"],m);let v=u(t,["topK"]);v!=null&&d(e,["topK"],v);let I=u(t,["thinking"]);return I!=null&&d(e,["thinking"],I),e}function b_(t){let e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);let r=u(t,["displayName"]);r!=null&&d(e,["displayName"],r);let i=u(t,["description"]);i!=null&&d(e,["description"],i);let o=u(t,["versionId"]);o!=null&&d(e,["version"],o);let s=u(t,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>B3(m))),d(e,["endpoints"],p)}let a=u(t,["labels"]);a!=null&&d(e,["labels"],a);let l=u(t,["_self"]);l!=null&&d(e,["tunedModelInfo"],q4(l));let c=u(t,["defaultCheckpointId"]);c!=null&&d(e,["defaultCheckpointId"],c);let h=u(t,["checkpoints"]);if(h!=null){let p=h;Array.isArray(p)&&(p=p.map(m=>m)),d(e,["checkpoints"],p)}return e}function b4(t){let e={},n=u(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);let r=u(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);let i=u(t,["executableCode"]);i!=null&&d(e,["executableCode"],i);let o=u(t,["fileData"]);o!=null&&d(e,["fileData"],H3(o));let s=u(t,["functionCall"]);s!=null&&d(e,["functionCall"],$3(s));let a=u(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);let l=u(t,["inlineData"]);l!=null&&d(e,["inlineData"],h3(l));let c=u(t,["text"]);c!=null&&d(e,["text"],c);let h=u(t,["thought"]);h!=null&&d(e,["thought"],h);let p=u(t,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);let m=u(t,["videoMetadata"]);return m!=null&&d(e,["videoMetadata"],m),e}function M4(t){let e={},n=u(t,["productImage"]);return n!=null&&d(e,["image"],On(n)),e}function R4(t,e){let n={},r=u(t,["numberOfImages"]);e!==void 0&&r!=null&&d(e,["parameters","sampleCount"],r);let i=u(t,["baseSteps"]);e!==void 0&&i!=null&&d(e,["parameters","baseSteps"],i);let o=u(t,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);let s=u(t,["seed"]);e!==void 0&&s!=null&&d(e,["parameters","seed"],s);let a=u(t,["safetyFilterLevel"]);e!==void 0&&a!=null&&d(e,["parameters","safetySetting"],a);let l=u(t,["personGeneration"]);e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l);let c=u(t,["addWatermark"]);e!==void 0&&c!=null&&d(e,["parameters","addWatermark"],c);let h=u(t,["outputMimeType"]);e!==void 0&&h!=null&&d(e,["parameters","outputOptions","mimeType"],h);let p=u(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&d(e,["parameters","outputOptions","compressionQuality"],p);let m=u(t,["enhancePrompt"]);e!==void 0&&m!=null&&d(e,["parameters","enhancePrompt"],m);let v=u(t,["labels"]);return e!==void 0&&v!=null&&d(e,["labels"],v),n}function N4(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],Se(t,r));let i=u(e,["source"]);i!=null&&P4(i,n);let o=u(e,["config"]);return o!=null&&R4(o,n),n}function x4(t){let e={},n=u(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>ch(i))),d(e,["generatedImages"],r)}return e}function P4(t,e){let n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);let i=u(t,["personImage"]);e!==void 0&&i!=null&&d(e,["instances[0]","personImage","image"],On(i));let o=u(t,["productImages"]);if(e!==void 0&&o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>M4(a))),d(e,["instances[0]","productImages"],s)}return n}function k4(t){let e={},n=u(t,["referenceImage"]);n!=null&&d(e,["referenceImage"],On(n));let r=u(t,["referenceId"]);r!=null&&d(e,["referenceId"],r);let i=u(t,["referenceType"]);i!=null&&d(e,["referenceType"],i);let o=u(t,["maskImageConfig"]);o!=null&&d(e,["maskImageConfig"],A4(o));let s=u(t,["controlImageConfig"]);s!=null&&d(e,["controlImageConfig"],E3(s));let a=u(t,["styleImageConfig"]);a!=null&&d(e,["styleImageConfig"],a);let l=u(t,["subjectImageConfig"]);return l!=null&&d(e,["subjectImageConfig"],l),e}function SM(t){let e={},n=u(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);let r=u(t,["safetyAttributes","scores"]);r!=null&&d(e,["scores"],r);let i=u(t,["contentType"]);return i!=null&&d(e,["contentType"],i),e}function AM(t){let e={},n=u(t,["safetyAttributes","categories"]);n!=null&&d(e,["categories"],n);let r=u(t,["safetyAttributes","scores"]);r!=null&&d(e,["scores"],r);let i=u(t,["contentType"]);return i!=null&&d(e,["contentType"],i),e}function F4(t){let e={},n=u(t,["category"]);if(n!=null&&d(e,["category"],n),u(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let r=u(t,["threshold"]);return r!=null&&d(e,["threshold"],r),e}function O4(t){let e={},n=u(t,["image"]);return n!=null&&d(e,["image"],On(n)),e}function L4(t,e){let n={},r=u(t,["mode"]);e!==void 0&&r!=null&&d(e,["parameters","mode"],r);let i=u(t,["maxPredictions"]);e!==void 0&&i!=null&&d(e,["parameters","maxPredictions"],i);let o=u(t,["confidenceThreshold"]);e!==void 0&&o!=null&&d(e,["parameters","confidenceThreshold"],o);let s=u(t,["maskDilation"]);e!==void 0&&s!=null&&d(e,["parameters","maskDilation"],s);let a=u(t,["binaryColorThreshold"]);e!==void 0&&a!=null&&d(e,["parameters","binaryColorThreshold"],a);let l=u(t,["labels"]);return e!==void 0&&l!=null&&d(e,["labels"],l),n}function V4(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],Se(t,r));let i=u(e,["source"]);i!=null&&B4(i,n);let o=u(e,["config"]);return o!=null&&L4(o,n),n}function U4(t){let e={},n=u(t,["predictions"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>c4(i))),d(e,["generatedMasks"],r)}return e}function B4(t,e){let n={},r=u(t,["prompt"]);e!==void 0&&r!=null&&d(e,["instances[0]","prompt"],r);let i=u(t,["image"]);e!==void 0&&i!=null&&d(e,["instances[0]","image"],On(i));let o=u(t,["scribbleImage"]);return e!==void 0&&o!=null&&d(e,["instances[0]","scribble"],O4(o)),n}function bM(t){let e={},n=u(t,["languageCode"]);n!=null&&d(e,["languageCode"],n);let r=u(t,["voiceConfig"]);if(r!=null&&d(e,["voiceConfig"],r),u(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function H4(t){let e={},n=u(t,["functionCallingConfig"]);n!=null&&d(e,["functionCallingConfig"],G3(n));let r=u(t,["retrievalConfig"]);return r!=null&&d(e,["retrievalConfig"],r),e}function $4(t){let e={},n=u(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),d(e,["functionDeclarations"],h)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=u(t,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);let i=u(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);let o=u(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);let s=u(t,["codeExecution"]);if(s!=null&&d(e,["codeExecution"],s),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let a=u(t,["googleMaps"]);a!=null&&d(e,["googleMaps"],g4(a));let l=u(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],y4(l));let c=u(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}function MM(t){let e={},n=u(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>q3(m))),d(e,["functionDeclarations"],p)}let r=u(t,["retrieval"]);r!=null&&d(e,["retrieval"],r);let i=u(t,["googleSearchRetrieval"]);i!=null&&d(e,["googleSearchRetrieval"],i);let o=u(t,["computerUse"]);if(o!=null&&d(e,["computerUse"],o),u(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let s=u(t,["codeExecution"]);s!=null&&d(e,["codeExecution"],s);let a=u(t,["enterpriseWebSearch"]);a!=null&&d(e,["enterpriseWebSearch"],a);let l=u(t,["googleMaps"]);l!=null&&d(e,["googleMaps"],l);let c=u(t,["googleSearch"]);c!=null&&d(e,["googleSearch"],c);let h=u(t,["urlContext"]);return h!=null&&d(e,["urlContext"],h),e}function G4(t){let e={},n=u(t,["baseModel"]);n!=null&&d(e,["baseModel"],n);let r=u(t,["createTime"]);r!=null&&d(e,["createTime"],r);let i=u(t,["updateTime"]);return i!=null&&d(e,["updateTime"],i),e}function q4(t){let e={},n=u(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&d(e,["baseModel"],n);let r=u(t,["createTime"]);r!=null&&d(e,["createTime"],r);let i=u(t,["updateTime"]);return i!=null&&d(e,["updateTime"],i),e}function z4(t,e){let n={},r=u(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);let i=u(t,["description"]);e!==void 0&&i!=null&&d(e,["description"],i);let o=u(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&d(e,["defaultCheckpointId"],o),n}function j4(t,e){let n={},r=u(t,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);let i=u(t,["description"]);e!==void 0&&i!=null&&d(e,["description"],i);let o=u(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&d(e,["defaultCheckpointId"],o),n}function W4(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["_url","name"],Se(t,r));let i=u(e,["config"]);return i!=null&&z4(i,n),n}function K4(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],Se(t,r));let i=u(e,["config"]);return i!=null&&j4(i,n),n}function J4(t,e){let n={},r=u(t,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);let i=u(t,["safetyFilterLevel"]);e!==void 0&&i!=null&&d(e,["parameters","safetySetting"],i);let o=u(t,["personGeneration"]);e!==void 0&&o!=null&&d(e,["parameters","personGeneration"],o);let s=u(t,["includeRaiReason"]);e!==void 0&&s!=null&&d(e,["parameters","includeRaiReason"],s);let a=u(t,["outputMimeType"]);e!==void 0&&a!=null&&d(e,["parameters","outputOptions","mimeType"],a);let l=u(t,["outputCompressionQuality"]);e!==void 0&&l!=null&&d(e,["parameters","outputOptions","compressionQuality"],l);let c=u(t,["enhanceInputImage"]);e!==void 0&&c!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],c);let h=u(t,["imagePreservationFactor"]);e!==void 0&&h!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],h);let p=u(t,["labels"]);e!==void 0&&p!=null&&d(e,["labels"],p);let m=u(t,["numberOfImages"]);e!==void 0&&m!=null&&d(e,["parameters","sampleCount"],m);let v=u(t,["mode"]);return e!==void 0&&v!=null&&d(e,["parameters","mode"],v),n}function Q4(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["_url","model"],Se(t,r));let i=u(e,["image"]);i!=null&&d(n,["instances[0]","image"],On(i));let o=u(e,["upscaleFactor"]);o!=null&&d(n,["parameters","upscaleConfig","upscaleFactor"],o);let s=u(e,["config"]);return s!=null&&J4(s,n),n}function Y4(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>ch(o))),d(e,["generatedImages"],i)}return e}function Z4(t){let e={},n=u(t,["uri"]);n!=null&&d(e,["uri"],n);let r=u(t,["encodedVideo"]);r!=null&&d(e,["videoBytes"],vi(r));let i=u(t,["encoding"]);return i!=null&&d(e,["mimeType"],i),e}function X4(t){let e={},n=u(t,["gcsUri"]);n!=null&&d(e,["uri"],n);let r=u(t,["bytesBase64Encoded"]);r!=null&&d(e,["videoBytes"],vi(r));let i=u(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function eG(t){let e={},n=u(t,["image"]);n!=null&&d(e,["_self"],On(n));let r=u(t,["maskMode"]);return r!=null&&d(e,["maskMode"],r),e}function tG(t){let e={},n=u(t,["image"]);n!=null&&d(e,["image"],dh(n));let r=u(t,["referenceType"]);return r!=null&&d(e,["referenceType"],r),e}function nG(t){let e={},n=u(t,["image"]);n!=null&&d(e,["image"],On(n));let r=u(t,["referenceType"]);return r!=null&&d(e,["referenceType"],r),e}function RM(t){let e={},n=u(t,["uri"]);n!=null&&d(e,["uri"],n);let r=u(t,["videoBytes"]);r!=null&&d(e,["encodedVideo"],vi(r));let i=u(t,["mimeType"]);return i!=null&&d(e,["encoding"],i),e}function NM(t){let e={},n=u(t,["uri"]);n!=null&&d(e,["gcsUri"],n);let r=u(t,["videoBytes"]);r!=null&&d(e,["bytesBase64Encoded"],vi(r));let i=u(t,["mimeType"]);return i!=null&&d(e,["mimeType"],i),e}function rG(t,e){let n={},r=u(t,["displayName"]);return e!==void 0&&r!=null&&d(e,["displayName"],r),n}function iG(t){let e={},n=u(t,["config"]);return n!=null&&rG(n,e),e}function oG(t,e){let n={},r=u(t,["force"]);return e!==void 0&&r!=null&&d(e,["_query","force"],r),n}function sG(t){let e={},n=u(t,["name"]);n!=null&&d(e,["_url","name"],n);let r=u(t,["config"]);return r!=null&&oG(r,e),e}function aG(t){let e={},n=u(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function lG(t,e){let n={},r=u(t,["customMetadata"]);if(e!==void 0&&r!=null){let o=r;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["customMetadata"],o)}let i=u(t,["chunkingConfig"]);return e!==void 0&&i!=null&&d(e,["chunkingConfig"],i),n}function uG(t){let e={},n=u(t,["name"]);n!=null&&d(e,["name"],n);let r=u(t,["metadata"]);r!=null&&d(e,["metadata"],r);let i=u(t,["done"]);i!=null&&d(e,["done"],i);let o=u(t,["error"]);o!=null&&d(e,["error"],o);let s=u(t,["response"]);return s!=null&&d(e,["response"],dG(s)),e}function cG(t){let e={},n=u(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);let r=u(t,["fileName"]);r!=null&&d(e,["fileName"],r);let i=u(t,["config"]);return i!=null&&lG(i,e),e}function dG(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["parent"]);r!=null&&d(e,["parent"],r);let i=u(t,["documentName"]);return i!=null&&d(e,["documentName"],i),e}function fG(t,e){let n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let i=u(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function hG(t){let e={},n=u(t,["config"]);return n!=null&&fG(n,e),e}function pG(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let i=u(t,["fileSearchStores"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["fileSearchStores"],o)}return e}function xM(t,e){let n={},r=u(t,["mimeType"]);e!==void 0&&r!=null&&d(e,["mimeType"],r);let i=u(t,["displayName"]);e!==void 0&&i!=null&&d(e,["displayName"],i);let o=u(t,["customMetadata"]);if(e!==void 0&&o!=null){let a=o;Array.isArray(a)&&(a=a.map(l=>l)),d(e,["customMetadata"],a)}let s=u(t,["chunkingConfig"]);return e!==void 0&&s!=null&&d(e,["chunkingConfig"],s),n}function mG(t){let e={},n=u(t,["fileSearchStoreName"]);n!=null&&d(e,["_url","file_search_store_name"],n);let r=u(t,["config"]);return r!=null&&xM(r,e),e}function gG(t){let e={},n=u(t,["sdkHttpResponse"]);return n!=null&&d(e,["sdkHttpResponse"],n),e}var yG="Content-Type",vG="X-Server-Timeout",_G="User-Agent",M_="x-goog-api-client",EG="1.31.0",CG=`google-genai-sdk/${EG}`,IG="v1beta1",TG="v1beta",eM=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/,R_=class{constructor(e){var n,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});let i={};this.clientOptions.vertexai?(i.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:IG,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:TG,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){let i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(let[s,a]of Object.entries(e.queryParams))i.searchParams.append(s,String(a));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.unaryApiCall(i,o,e.httpMethod)}patchHttpOptions(e,n){let r=JSON.parse(JSON.stringify(e));for(let[i,o]of Object.entries(n))typeof o=="object"?r[i]=Object.assign(Object.assign({},r[i]),o):o!==void 0&&(r[i]=o);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,n,i.toString(),e.abortSignal),this.streamApiCall(i,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){let o=new AbortController,s=o.signal;if(n.timeout&&n?.timeout>0){let a=setTimeout(()=>o.abort(),n.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{o.abort()}),e.signal=s}return n&&n.extraBody!==null&&wG(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await tM(i),new fu(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await tM(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){var n;return Fs(this,arguments,function*(){let i=(n=e?.body)===null||n===void 0?void 0:n.getReader(),o=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let s="";for(;;){let{done:a,value:l}=yield $e(i.read());if(a){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let c=o.decode(l,{stream:!0});try{let p=JSON.parse(c);if("error"in p){let m=JSON.parse(JSON.stringify(p.error)),v=m.status,I=m.code,b=`got status: ${v}. ${JSON.stringify(p)}`;if(I>=400&&I<600)throw new sh({message:b,status:I})}}catch(p){if(p.name==="ApiError")throw p}s+=c;let h=s.match(eM);for(;h;){let p=h[1];try{let m=new Response(p,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield $e(new fu(m)),s=s.slice(h[0].length),h=s.match(eM)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{i.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){let e={},n=CG+" "+this.clientOptions.userAgentExtra;return e[_G]=n,e[M_]=n,e[yG]="application/json",e}async getHeadersInternal(e,n){let r=new Headers;if(e&&e.headers){for(let[i,o]of Object.entries(e.headers))r.append(i,o);e.timeout&&e.timeout>0&&r.append(vG,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;let i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);let o=this.clientOptions.uploader,s=await o.stat(e);i.sizeBytes=String(s.size);let a=(r=n?.mimeType)!==null&&r!==void 0?r:s.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=a;let l={file:i},c=this.getFileName(e),h=q("upload/v1beta/files",l._url),p=await this.fetchUploadUrl(h,i.sizeBytes,i.mimeType,c,l,n?.httpOptions);return o.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,r){var i;let o=this.clientOptions.uploader,s=await o.stat(n),a=String(s.size),l=(i=r?.mimeType)!==null&&i!==void 0?i:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let c=`upload/v1beta/${e}:uploadToFileSearchStore`,h=this.getFileName(n),p={};r!=null&&xM(r,p);let m=await this.fetchUploadUrl(c,a,l,h,p,r?.httpOptions);return o.uploadToFileSearchStore(n,m,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,o,s){var a;let l={};s?l=s:l={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};let c=await this.request({path:e,body:JSON.stringify(o),httpMethod:"POST",httpOptions:l});if(!c||!c?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let h=(a=c?.headers)===null||a===void 0?void 0:a["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}};async function tM(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){let n=t.status,r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};let i=JSON.stringify(r);throw n>=400&&n<600?new sh({message:i,status:n}):new Error(i)}}function wG(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{let o=JSON.parse(t.body);if(typeof o=="object"&&o!==null&&!Array.isArray(o))n=o;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(o,s){let a=Object.assign({},o);for(let l in s)if(Object.prototype.hasOwnProperty.call(s,l)){let c=s[l],h=a[l];c&&typeof c=="object"&&!Array.isArray(c)&&h&&typeof h=="object"&&!Array.isArray(h)?a[l]=r(h,c):(h&&c&&typeof h!=typeof c&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${l}". Original type: ${typeof h}, New type: ${typeof c}. Overwriting.`),a[l]=c)}return a}let i=r(n,e);t.body=JSON.stringify(i)}var DG="mcp_used/unknown",SG=!1;function PM(t){for(let e of t)if(AG(e)||typeof e=="object"&&"inputSchema"in e)return!0;return SG}function kM(t){var e;let n=(e=t[M_])!==null&&e!==void 0?e:"";t[M_]=(n+` ${DG}`).trimStart()}function AG(t){return t!==null&&typeof t=="object"&&t instanceof N_}function bG(t,e=100){return Fs(this,arguments,function*(){let r,i=0;for(;i<e;){let o=yield $e(t.listTools({cursor:r}));for(let s of o.tools)yield yield $e(s),i++;if(!o.nextCursor)break;r=o.nextCursor}})}var N_=class t{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new t(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;let o={},s=[];for(let h of this.mcpClients)try{for(var a=!0,l=(n=void 0,du(bG(h))),c;c=await l.next(),e=c.done,!e;a=!0){i=c.value,a=!1;let p=i;s.push(p);let m=p.name;if(o[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);o[m]=h}}catch(p){n={error:p}}finally{try{!a&&!e&&(r=l.return)&&await r.call(l)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=o}async tool(){return await this.initialize(),fH(this.mcpTools,this.config)}async callTool(e){await this.initialize();let n=[];for(let r of e)if(r.name in this.functionNameToMcpClient){let i=this.functionNameToMcpClient[r.name],o;this.config.timeout&&(o={timeout:this.config.timeout});let s=await i.callTool({name:r.name,arguments:r.args},void 0,o);n.push({functionResponse:{name:r.name,response:s.isError?{error:s}:s}})}return n}};async function MG(t,e,n){let r=new v_,i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}var x_=class{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let i=this.apiClient.getWebsocketBaseUrl(),o=this.apiClient.getApiVersion(),s=NG(this.apiClient.getDefaultHeaders()),a=this.apiClient.getApiKey(),l=`${i}/ws/google.ai.generativelanguage.${o}.GenerativeService.BidiGenerateMusic?key=${a}`,c=()=>{},h=new Promise(L=>{c=L}),p=e.callbacks,m=function(){c({})},v=this.apiClient,I={onopen:m,onmessage:L=>{MG(v,p.onmessage,L)},onerror:(n=p?.onerror)!==null&&n!==void 0?n:function(L){},onclose:(r=p?.onclose)!==null&&r!==void 0?r:function(L){}},b=this.webSocketFactory.create(l,RG(s),I);b.connect(),await h;let O={setup:{model:Se(this.apiClient,e.model)}};return b.send(JSON.stringify(O)),new P_(b,this.apiClient)}},P_=class{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let n=i3(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let n=r3(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){let n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(cu.PLAY)}pause(){this.sendPlaybackControl(cu.PAUSE)}stop(){this.sendPlaybackControl(cu.STOP)}resetContext(){this.sendPlaybackControl(cu.RESET_CONTEXT)}close(){this.conn.close()}};function RG(t){let e={};return t.forEach((n,r)=>{e[r]=n}),e}function NG(t){let e=new Headers;for(let[n,r]of Object.entries(t))e.append(n,r);return e}var xG="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function PG(t,e,n){let r=new y_,i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;let o=JSON.parse(i);if(t.isVertexAI()){let s=a3(o);Object.assign(r,s)}else Object.assign(r,o);e(r)}var k_=class{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new x_(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,o,s,a;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let l=this.apiClient.getWebsocketBaseUrl(),c=this.apiClient.getApiVersion(),h,p=this.apiClient.getHeaders();e.config&&e.config.tools&&PM(e.config.tools)&&kM(p);let m=OG(p);if(this.apiClient.isVertexAI())h=`${l}/ws/google.cloud.aiplatform.${c}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m,h);else{let E=this.apiClient.getApiKey(),S="BidiGenerateContent",D="key";E?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),c!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),S="BidiGenerateContentConstrained",D="access_token"),h=`${l}/ws/google.ai.generativelanguage.${c}.GenerativeService.${S}?${D}=${E}`}let v=()=>{},I=new Promise(E=>{v=E}),b=e.callbacks,A=function(){var E;(E=b?.onopen)===null||E===void 0||E.call(b),v({})},N=this.apiClient,O={onopen:A,onmessage:E=>{PG(N,b.onmessage,E)},onerror:(n=b?.onerror)!==null&&n!==void 0?n:function(E){},onclose:(r=b?.onclose)!==null&&r!==void 0?r:function(E){}},L=this.webSocketFactory.create(h,FG(m),O);L.connect(),await I;let G=Se(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&G.startsWith("publishers/")){let E=this.apiClient.getProject(),S=this.apiClient.getLocation();G=`projects/${E}/locations/${S}/`+G}let Z={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[i_.AUDIO]}:e.config.responseModalities=[i_.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let Y=(a=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[],w=[];for(let E of Y)if(this.isCallableTool(E)){let S=E;w.push(await S.tool())}else w.push(E);w.length>0&&(e.config.tools=w);let C={model:G,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?Z=n3(this.apiClient,C):Z=t3(this.apiClient,C),delete Z.config,L.send(JSON.stringify(Z)),new F_(L,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},kG={turnComplete:!0},F_=class{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=vn(n.turns),e.isVertexAI()||(r=r.map(i=>uh(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(let o of r){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(xG)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},kG),e);let n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:s3(e)}:n={realtimeInput:o3(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}};function FG(t){let e={};return t.forEach((n,r)=>{e[r]=n}),e}function OG(t){let e=new Headers;for(let[n,r]of Object.entries(t))e.append(n,r);return e}var nM=10;function rM(t){var e,n,r;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(let s of(n=t?.tools)!==null&&n!==void 0?n:[])if(Os(s)){i=!0;break}if(!i)return!0;let o=(r=t?.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return o&&(o<0||!Number.isInteger(o))||o==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",o),!0):!1}function Os(t){return"callTool"in t&&typeof t.callTool=="function"}function LG(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>Os(i)))!==null&&r!==void 0?r:!1}function iM(t){var e;let n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(Os(r))return;let o=r;o.functionDeclarations&&o.functionDeclarations.length>0&&n.push(i)}),n}function oM(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}var O_=class extends Fn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var r,i,o,s,a;let l=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!LG(n)||rM(n.config))return await this.generateContentInternal(l);let c=iM(n);if(c.length>0){let b=c.map(A=>`tools[${A}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${b}.`)}let h,p,m=vn(l.contents),v=(o=(i=(r=l.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&o!==void 0?o:nM,I=0;for(;I<v&&(h=await this.generateContentInternal(l),!(!h.functionCalls||h.functionCalls.length===0));){let b=h.candidates[0].content,A=[];for(let N of(a=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&a!==void 0?a:[])if(Os(N)){let L=await N.callTool(h.functionCalls);A.push(...L)}I++,p={role:"user",parts:A},l.contents=vn(l.contents),l.contents.push(b),l.contents.push(p),oM(l.config)&&(m.push(b),m.push(p))}return oM(l.config)&&(h.automaticFunctionCallingHistory=m),h},this.generateContentStream=async n=>{var r,i,o,s,a;if(this.maybeMoveToResponseJsonSchem(n),rM(n.config)){let p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}let l=iM(n);if(l.length>0){let p=l.map(m=>`tools[${m}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let c=(o=(i=(r=n?.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||o===void 0?void 0:o.streamFunctionCallArguments,h=(a=(s=n?.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||a===void 0?void 0:a.disable;if(c&&!h)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let o,s=[];if(r?.generatedImages)for(let l of r.generatedImages)l&&l?.safetyAttributes&&((i=l?.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?o=l?.safetyAttributes:s.push(l);let a;return o?a={generatedImages:s,positivePromptSafetyAttributes:o,sdkHttpResponse:r.sdkHttpResponse}:a={generatedImages:s,sdkHttpResponse:r.sdkHttpResponse},a}),this.list=async n=>{var r;let s={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((r=s.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Nr(_i.PAGED_ITEM_MODELS,a=>this.listInternal(a),await this.listInternal(s),s)},this.editImage=async n=>{let r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));let i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,o,s,a,l;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(o=n.source)===null||o===void 0?void 0:o.video)===null||s===void 0)&&s.uri&&(!((l=(a=n.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;let o=(n=e.config)===null||n===void 0?void 0:n.tools;if(!o)return e;let s=await Promise.all(o.map(async l=>Os(l)?await l.tool():l)),a={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(a.config.tools=s,e.config&&e.config.tools&&PM(e.config.tools)){let l=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{},c=Object.assign({},l);Object.keys(c).length===0&&(c=this.apiClient.getDefaultHeaders()),kM(c),a.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:c})}return a}async initAfcToolsMap(e){var n,r,i;let o=new Map;for(let s of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(Os(s)){let a=s,l=await a.tool();for(let c of(i=l.functionDeclarations)!==null&&i!==void 0?i:[]){if(!c.name)throw new Error("Function declaration name is required.");if(o.has(c.name))throw new Error(`Duplicate tool declaration name: ${c.name}`);o.set(c.name,a)}}return o}async processAfcStream(e){var n,r,i;let o=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:nM,s=!1,a=0,l=await this.initAfcToolsMap(e);return(function(c,h,p){var m,v;return Fs(this,arguments,function*(){for(var I,b,A,N;a<o;){s&&(a++,s=!1);let Z=yield $e(c.processParamsMaybeAddMcpUsage(p)),Y=yield $e(c.generateContentStreamInternal(Z)),w=[],C=[];try{for(var O=!0,L=(b=void 0,du(Y)),G;G=yield $e(L.next()),I=G.done,!I;O=!0){N=G.value,O=!1;let E=N;if(yield yield $e(E),E.candidates&&(!((m=E.candidates[0])===null||m===void 0)&&m.content)){C.push(E.candidates[0].content);for(let S of(v=E.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(a<o&&S.functionCall){if(!S.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(S.functionCall.name)){let D=yield $e(h.get(S.functionCall.name).callTool([S.functionCall]));w.push(...D)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${S.functionCall.name}`)}}}}catch(E){b={error:E}}finally{try{!O&&!I&&(A=L.return)&&(yield $e(A.call(L)))}finally{if(b)throw b.error}}if(w.length>0){s=!0;let E=new Io;E.candidates=[{content:{role:"user",parts:w}}],yield yield $e(E);let S=[];S.push(...C),S.push({role:"user",parts:w});let D=vn(p.contents).concat(S);p.contents=D}else break}})})(this,l,e)}async generateContentInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=Yb(this.apiClient,e);return a=q("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=Xb(h),m=new Io;return Object.assign(m,p),m})}else{let c=Qb(this.apiClient,e);return a=q("{model}:generateContent",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=Zb(h),m=new Io;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=Yb(this.apiClient,e);return a=q("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),s.then(function(p){return Fs(this,arguments,function*(){var m,v,I,b;try{for(var A=!0,N=du(p),O;O=yield $e(N.next()),m=O.done,!m;A=!0){b=O.value,A=!1;let L=b,G=Xb(yield $e(L.json()));G.sdkHttpResponse={headers:L.headers};let Z=new Io;Object.assign(Z,G),yield yield $e(Z)}}catch(L){v={error:L}}finally{try{!A&&!m&&(I=N.return)&&(yield $e(I.call(N)))}finally{if(v)throw v.error}}})})}else{let c=Qb(this.apiClient,e);return a=q("{model}:streamGenerateContent?alt=sse",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.requestStream({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return Fs(this,arguments,function*(){var m,v,I,b;try{for(var A=!0,N=du(p),O;O=yield $e(N.next()),m=O.done,!m;A=!0){b=O.value,A=!1;let L=b,G=Zb(yield $e(L.json()));G.sdkHttpResponse={headers:L.headers};let Z=new Io;Object.assign(Z,G),yield yield $e(Z)}}catch(L){v={error:L}}finally{try{!A&&!m&&(I=N.return)&&(yield $e(I.call(N)))}finally{if(v)throw v.error}}})})}}async embedContent(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=L3(this.apiClient,e);return a=q("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=U3(h),m=new Kf;return Object.assign(m,p),m})}else{let c=O3(this.apiClient,e);return a=q("{model}:batchEmbedContents",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=V3(h),m=new Kf;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=Q3(this.apiClient,e);return a=q("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=Z3(h),m=new Jf;return Object.assign(m,p),m})}else{let c=J3(this.apiClient,e);return a=q("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=Y3(h),m=new Jf;return Object.assign(m,p),m})}}async editImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){let a=x3(this.apiClient,e);return o=q("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{let c=P3(l),h=new o_;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){let a=Q4(this.apiClient,e);return o=q("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{let c=Y4(l),h=new s_;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){let a=N4(this.apiClient,e);return o=q("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=x4(l),h=new a_;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){let a=V4(this.apiClient,e);return o=q("{model}:predict",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=U4(l),h=new l_;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=m4(this.apiClient,e);return a=q("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>b_(h))}else{let c=p4(this.apiClient,e);return a=q("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>A_(h))}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=w4(this.apiClient,e);return a=q("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=S4(h),m=new Qf;return Object.assign(m,p),m})}else{let c=T4(this.apiClient,e);return a=q("{models_url}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=D4(h),m=new Qf;return Object.assign(m,p),m})}}async update(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=K4(this.apiClient,e);return a=q("{model}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>b_(h))}else{let c=W4(this.apiClient,e);return a=q("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>A_(h))}}async delete(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=b3(this.apiClient,e);return a=q("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=R3(h),m=new Yf;return Object.assign(m,p),m})}else{let c=A3(this.apiClient,e);return a=q("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=M3(h),m=new Yf;return Object.assign(m,p),m})}}async countTokens(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=w3(this.apiClient,e);return a=q("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=S3(h),m=new Zf;return Object.assign(m,p),m})}else{let c=T3(this.apiClient,e);return a=q("{model}:countTokens",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=D3(h),m=new Zf;return Object.assign(m,p),m})}}async computeTokens(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){let a=g3(this.apiClient,e);return o=q("{model}:computeTokens",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>{let c=y3(l),h=new u_;return Object.assign(h,c),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=i4(this.apiClient,e);return a=q("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s.then(h=>{let p=n4(h),m=new Xf;return Object.assign(m,p),m})}else{let c=r4(this.apiClient,e);return a=q("{model}:predictLongRunning",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s.then(h=>{let p=t4(h),m=new Xf;return Object.assign(m,p),m})}}};var L_=class extends Fn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let i=n.name.split("/operations/")[0],o;r&&"httpOptions"in r&&(o=r.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){let n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let i=n.name.split("/operations/")[0],o;r&&"httpOptions"in r&&(o=r.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:o}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=XB(e);return a=q("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),s}else{let c=ZB(e);return a=q("{operationName}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json()),s}}async fetchPredictVideosOperationInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){let a=zB(e);return o=q("{resourceName}:fetchPredictOperation",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}};function VG(t){let e={},n=u(t,["data"]);if(n!=null&&d(e,["data"],n),u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function UG(t){let e={},n=u(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(o=>KG(o))),d(e,["parts"],i)}let r=u(t,["role"]);return r!=null&&d(e,["role"],r),e}function BG(t,e,n){let r={},i=u(e,["expireTime"]);n!==void 0&&i!=null&&d(n,["expireTime"],i);let o=u(e,["newSessionExpireTime"]);n!==void 0&&o!=null&&d(n,["newSessionExpireTime"],o);let s=u(e,["uses"]);n!==void 0&&s!=null&&d(n,["uses"],s);let a=u(e,["liveConnectConstraints"]);n!==void 0&&a!=null&&d(n,["bidiGenerateContentSetup"],WG(t,a));let l=u(e,["lockAdditionalFields"]);return n!==void 0&&l!=null&&d(n,["fieldMask"],l),r}function HG(t,e){let n={},r=u(e,["config"]);return r!=null&&d(n,["config"],BG(t,r,n)),n}function $G(t){let e={};if(u(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=u(t,["fileUri"]);n!=null&&d(e,["fileUri"],n);let r=u(t,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function GG(t){let e={},n=u(t,["id"]);n!=null&&d(e,["id"],n);let r=u(t,["args"]);r!=null&&d(e,["args"],r);let i=u(t,["name"]);if(i!=null&&d(e,["name"],i),u(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(u(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function qG(t){let e={};if(u(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=u(t,["enableWidget"]);return n!=null&&d(e,["enableWidget"],n),e}function zG(t){let e={};if(u(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(u(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=u(t,["timeRangeFilter"]);return n!=null&&d(e,["timeRangeFilter"],n),e}function jG(t,e){let n={},r=u(t,["generationConfig"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig"],r);let i=u(t,["responseModalities"]);e!==void 0&&i!=null&&d(e,["setup","generationConfig","responseModalities"],i);let o=u(t,["temperature"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig","temperature"],o);let s=u(t,["topP"]);e!==void 0&&s!=null&&d(e,["setup","generationConfig","topP"],s);let a=u(t,["topK"]);e!==void 0&&a!=null&&d(e,["setup","generationConfig","topK"],a);let l=u(t,["maxOutputTokens"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","maxOutputTokens"],l);let c=u(t,["mediaResolution"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","mediaResolution"],c);let h=u(t,["seed"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","seed"],h);let p=u(t,["speechConfig"]);e!==void 0&&p!=null&&d(e,["setup","generationConfig","speechConfig"],Z_(p));let m=u(t,["thinkingConfig"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","thinkingConfig"],m);let v=u(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],v);let I=u(t,["systemInstruction"]);e!==void 0&&I!=null&&d(e,["setup","systemInstruction"],UG(At(I)));let b=u(t,["tools"]);if(e!==void 0&&b!=null){let Y=Vs(b);Array.isArray(Y)&&(Y=Y.map(w=>QG(Ls(w)))),d(e,["setup","tools"],Y)}let A=u(t,["sessionResumption"]);e!==void 0&&A!=null&&d(e,["setup","sessionResumption"],JG(A));let N=u(t,["inputAudioTranscription"]);e!==void 0&&N!=null&&d(e,["setup","inputAudioTranscription"],N);let O=u(t,["outputAudioTranscription"]);e!==void 0&&O!=null&&d(e,["setup","outputAudioTranscription"],O);let L=u(t,["realtimeInputConfig"]);e!==void 0&&L!=null&&d(e,["setup","realtimeInputConfig"],L);let G=u(t,["contextWindowCompression"]);e!==void 0&&G!=null&&d(e,["setup","contextWindowCompression"],G);let Z=u(t,["proactivity"]);return e!==void 0&&Z!=null&&d(e,["setup","proactivity"],Z),n}function WG(t,e){let n={},r=u(e,["model"]);r!=null&&d(n,["setup","model"],Se(t,r));let i=u(e,["config"]);return i!=null&&d(n,["config"],jG(i,n)),n}function KG(t){let e={},n=u(t,["mediaResolution"]);n!=null&&d(e,["mediaResolution"],n);let r=u(t,["codeExecutionResult"]);r!=null&&d(e,["codeExecutionResult"],r);let i=u(t,["executableCode"]);i!=null&&d(e,["executableCode"],i);let o=u(t,["fileData"]);o!=null&&d(e,["fileData"],$G(o));let s=u(t,["functionCall"]);s!=null&&d(e,["functionCall"],GG(s));let a=u(t,["functionResponse"]);a!=null&&d(e,["functionResponse"],a);let l=u(t,["inlineData"]);l!=null&&d(e,["inlineData"],VG(l));let c=u(t,["text"]);c!=null&&d(e,["text"],c);let h=u(t,["thought"]);h!=null&&d(e,["thought"],h);let p=u(t,["thoughtSignature"]);p!=null&&d(e,["thoughtSignature"],p);let m=u(t,["videoMetadata"]);return m!=null&&d(e,["videoMetadata"],m),e}function JG(t){let e={},n=u(t,["handle"]);if(n!=null&&d(e,["handle"],n),u(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function QG(t){let e={},n=u(t,["functionDeclarations"]);if(n!=null){let h=n;Array.isArray(h)&&(h=h.map(p=>p)),d(e,["functionDeclarations"],h)}if(u(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let r=u(t,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);let i=u(t,["computerUse"]);i!=null&&d(e,["computerUse"],i);let o=u(t,["fileSearch"]);o!=null&&d(e,["fileSearch"],o);let s=u(t,["codeExecution"]);if(s!=null&&d(e,["codeExecution"],s),u(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let a=u(t,["googleMaps"]);a!=null&&d(e,["googleMaps"],qG(a));let l=u(t,["googleSearch"]);l!=null&&d(e,["googleSearch"],zG(l));let c=u(t,["urlContext"]);return c!=null&&d(e,["urlContext"],c),e}function YG(t){let e=[];for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){let i=Object.keys(r).map(o=>`${n}.${o}`);e.push(...i)}else e.push(n)}return e.join(",")}function ZG(t,e){let n=null,r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){let o=r.setup;typeof o=="object"&&o!==null?(t.bidiGenerateContentSetup=o,n=o):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;let i=t.fieldMask;if(n){let o=YG(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)o?t.fieldMask=o:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){let s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],a=[];i.length>0&&(a=i.map(c=>s.includes(c)?`generationConfig.${c}`:c));let l=[];o&&l.push(o),a.length>0&&l.push(...a),l.length>0?t.fieldMask=l.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}var V_=class extends Fn{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let a=HG(this.apiClient,e);o=q("auth_tokens",a._url),s=a._query,delete a.config,delete a._url,delete a._query;let l=ZG(a,e.config);return i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(c=>c.json()),i.then(c=>c)}}};function XG(t,e){let n={},r=u(t,["force"]);return e!==void 0&&r!=null&&d(e,["_query","force"],r),n}function eq(t){let e={},n=u(t,["name"]);n!=null&&d(e,["_url","name"],n);let r=u(t,["config"]);return r!=null&&XG(r,e),e}function tq(t){let e={},n=u(t,["name"]);return n!=null&&d(e,["_url","name"],n),e}function nq(t,e){let n={},r=u(t,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);let i=u(t,["pageToken"]);return e!==void 0&&i!=null&&d(e,["_query","pageToken"],i),n}function rq(t){let e={},n=u(t,["parent"]);n!=null&&d(e,["_url","parent"],n);let r=u(t,["config"]);return r!=null&&nq(r,e),e}function iq(t){let e={},n=u(t,["sdkHttpResponse"]);n!=null&&d(e,["sdkHttpResponse"],n);let r=u(t,["nextPageToken"]);r!=null&&d(e,["nextPageToken"],r);let i=u(t,["documents"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(s=>s)),d(e,["documents"],o)}return e}var U_=class extends Fn{constructor(e){super(),this.apiClient=e,this.list=async n=>new Nr(_i.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=tq(e);return o=q("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=eq(e);i=q("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=rq(e);return o=q("{parent}/documents",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=iq(l),h=new c_;return Object.assign(h,c),h})}}};var B_=class extends Fn{constructor(e,n=new U_(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Nr(_i.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=iG(e);return o=q("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async get(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=aG(e);return o=q("{name}",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>l)}}async delete(e){var n,r;let i="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=sG(e);i=q("{name}",s._url),o=s._query,delete s._url,delete s._query,await this.apiClient.request({path:i,queryParams:o,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=hG(e);return o=q("fileSearchStores",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=pG(l),h=new d_;return Object.assign(h,c),h})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=mG(e);return o=q("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=gG(l),h=new f_;return Object.assign(h,c),h})}}async importFile(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=cG(e);return o=q("{file_search_store_name}:importFile",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json()),i.then(l=>{let c=uG(l),h=new h_;return Object.assign(h,c),h})}}};function oq(t,e){let n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function sq(t,e){let n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function aq(t,e){let n={},r=u(t,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function lq(t,e){let n={},r=u(t,["sdkHttpResponse"]);return r!=null&&d(n,["sdkHttpResponse"],r),n}function uq(t,e,n){let r={};if(u(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let i=u(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&d(e,["displayName"],i),u(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let o=u(t,["epochCount"]);e!==void 0&&o!=null&&d(e,["tuningTask","hyperparameters","epochCount"],o);let s=u(t,["learningRateMultiplier"]);if(s!=null&&d(r,["tuningTask","hyperparameters","learningRateMultiplier"],s),u(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(u(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(u(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");let a=u(t,["batchSize"]);e!==void 0&&a!=null&&d(e,["tuningTask","hyperparameters","batchSize"],a);let l=u(t,["learningRate"]);if(e!==void 0&&l!=null&&d(e,["tuningTask","hyperparameters","learningRate"],l),u(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(u(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function cq(t,e,n){let r={},i=u(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){let v=u(t,["validationDataset"]);e!==void 0&&v!=null&&d(e,["supervisedTuningSpec"],sM(v))}else if(i==="PREFERENCE_TUNING"){let v=u(t,["validationDataset"]);e!==void 0&&v!=null&&d(e,["preferenceOptimizationSpec"],sM(v))}let o=u(t,["tunedModelDisplayName"]);e!==void 0&&o!=null&&d(e,["tunedModelDisplayName"],o);let s=u(t,["description"]);e!==void 0&&s!=null&&d(e,["description"],s);let a=u(n,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){let v=u(t,["epochCount"]);e!==void 0&&v!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],v)}else if(a==="PREFERENCE_TUNING"){let v=u(t,["epochCount"]);e!==void 0&&v!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],v)}let l=u(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){let v=u(t,["learningRateMultiplier"]);e!==void 0&&v!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],v)}else if(l==="PREFERENCE_TUNING"){let v=u(t,["learningRateMultiplier"]);e!==void 0&&v!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],v)}let c=u(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){let v=u(t,["exportLastCheckpointOnly"]);e!==void 0&&v!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],v)}else if(c==="PREFERENCE_TUNING"){let v=u(t,["exportLastCheckpointOnly"]);e!==void 0&&v!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],v)}let h=u(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){let v=u(t,["adapterSize"]);e!==void 0&&v!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],v)}else if(h==="PREFERENCE_TUNING"){let v=u(t,["adapterSize"]);e!==void 0&&v!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],v)}if(u(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(u(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");let p=u(t,["labels"]);e!==void 0&&p!=null&&d(e,["labels"],p);let m=u(t,["beta"]);return e!==void 0&&m!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],m),r}function dq(t,e){let n={},r=u(t,["baseModel"]);r!=null&&d(n,["baseModel"],r);let i=u(t,["preTunedModel"]);i!=null&&d(n,["preTunedModel"],i);let o=u(t,["trainingDataset"]);o!=null&&Iq(o);let s=u(t,["config"]);return s!=null&&uq(s,n),n}function fq(t,e){let n={},r=u(t,["baseModel"]);r!=null&&d(n,["baseModel"],r);let i=u(t,["preTunedModel"]);i!=null&&d(n,["preTunedModel"],i);let o=u(t,["trainingDataset"]);o!=null&&Tq(o,n,e);let s=u(t,["config"]);return s!=null&&cq(s,n,e),n}function hq(t,e){let n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function pq(t,e){let n={},r=u(t,["name"]);return r!=null&&d(n,["_url","name"],r),n}function mq(t,e,n){let r={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);let o=u(t,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);let s=u(t,["filter"]);return e!==void 0&&s!=null&&d(e,["_query","filter"],s),r}function gq(t,e,n){let r={},i=u(t,["pageSize"]);e!==void 0&&i!=null&&d(e,["_query","pageSize"],i);let o=u(t,["pageToken"]);e!==void 0&&o!=null&&d(e,["_query","pageToken"],o);let s=u(t,["filter"]);return e!==void 0&&s!=null&&d(e,["_query","filter"],s),r}function yq(t,e){let n={},r=u(t,["config"]);return r!=null&&mq(r,n),n}function vq(t,e){let n={},r=u(t,["config"]);return r!=null&&gq(r,n),n}function _q(t,e){let n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let i=u(t,["nextPageToken"]);i!=null&&d(n,["nextPageToken"],i);let o=u(t,["tunedModels"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>FM(a))),d(n,["tuningJobs"],s)}return n}function Eq(t,e){let n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let i=u(t,["nextPageToken"]);i!=null&&d(n,["nextPageToken"],i);let o=u(t,["tuningJobs"]);if(o!=null){let s=o;Array.isArray(s)&&(s=s.map(a=>H_(a))),d(n,["tuningJobs"],s)}return n}function Cq(t,e){let n={},r=u(t,["name"]);r!=null&&d(n,["model"],r);let i=u(t,["name"]);return i!=null&&d(n,["endpoint"],i),n}function Iq(t,e){let n={};if(u(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(u(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let r=u(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(o=>o)),d(n,["examples","examples"],i)}return n}function Tq(t,e,n){let r={},i=u(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){let s=u(t,["gcsUri"]);e!==void 0&&s!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){let s=u(t,["gcsUri"]);e!==void 0&&s!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let o=u(n,["config","method"]);if(o===void 0&&(o="SUPERVISED_FINE_TUNING"),o==="SUPERVISED_FINE_TUNING"){let s=u(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(o==="PREFERENCE_TUNING"){let s=u(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(u(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function FM(t,e){let n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let i=u(t,["name"]);i!=null&&d(n,["name"],i);let o=u(t,["state"]);o!=null&&d(n,["state"],mM(o));let s=u(t,["createTime"]);s!=null&&d(n,["createTime"],s);let a=u(t,["tuningTask","startTime"]);a!=null&&d(n,["startTime"],a);let l=u(t,["tuningTask","completeTime"]);l!=null&&d(n,["endTime"],l);let c=u(t,["updateTime"]);c!=null&&d(n,["updateTime"],c);let h=u(t,["description"]);h!=null&&d(n,["description"],h);let p=u(t,["baseModel"]);p!=null&&d(n,["baseModel"],p);let m=u(t,["_self"]);return m!=null&&d(n,["tunedModel"],Cq(m)),n}function H_(t,e){let n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let i=u(t,["name"]);i!=null&&d(n,["name"],i);let o=u(t,["state"]);o!=null&&d(n,["state"],mM(o));let s=u(t,["createTime"]);s!=null&&d(n,["createTime"],s);let a=u(t,["startTime"]);a!=null&&d(n,["startTime"],a);let l=u(t,["endTime"]);l!=null&&d(n,["endTime"],l);let c=u(t,["updateTime"]);c!=null&&d(n,["updateTime"],c);let h=u(t,["error"]);h!=null&&d(n,["error"],h);let p=u(t,["description"]);p!=null&&d(n,["description"],p);let m=u(t,["baseModel"]);m!=null&&d(n,["baseModel"],m);let v=u(t,["tunedModel"]);v!=null&&d(n,["tunedModel"],v);let I=u(t,["preTunedModel"]);I!=null&&d(n,["preTunedModel"],I);let b=u(t,["supervisedTuningSpec"]);b!=null&&d(n,["supervisedTuningSpec"],b);let A=u(t,["preferenceOptimizationSpec"]);A!=null&&d(n,["preferenceOptimizationSpec"],A);let N=u(t,["tuningDataStats"]);N!=null&&d(n,["tuningDataStats"],N);let O=u(t,["encryptionSpec"]);O!=null&&d(n,["encryptionSpec"],O);let L=u(t,["partnerModelTuningSpec"]);L!=null&&d(n,["partnerModelTuningSpec"],L);let G=u(t,["customBaseModel"]);G!=null&&d(n,["customBaseModel"],G);let Z=u(t,["experiment"]);Z!=null&&d(n,["experiment"],Z);let Y=u(t,["labels"]);Y!=null&&d(n,["labels"],Y);let w=u(t,["outputUri"]);w!=null&&d(n,["outputUri"],w);let C=u(t,["pipelineJob"]);C!=null&&d(n,["pipelineJob"],C);let E=u(t,["serviceAccount"]);E!=null&&d(n,["serviceAccount"],E);let S=u(t,["tunedModelDisplayName"]);S!=null&&d(n,["tunedModelDisplayName"],S);let D=u(t,["veoTuningSpec"]);return D!=null&&d(n,["veoTuningSpec"],D),n}function wq(t,e){let n={},r=u(t,["sdkHttpResponse"]);r!=null&&d(n,["sdkHttpResponse"],r);let i=u(t,["name"]);i!=null&&d(n,["name"],i);let o=u(t,["metadata"]);o!=null&&d(n,["metadata"],o);let s=u(t,["done"]);s!=null&&d(n,["done"],s);let a=u(t,["error"]);return a!=null&&d(n,["error"],a),n}function sM(t,e){let n={},r=u(t,["gcsUri"]);r!=null&&d(n,["validationDatasetUri"],r);let i=u(t,["vertexDatasetResource"]);return i!=null&&d(n,["validationDatasetUri"],i),n}var $_=class extends Fn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Nr(_i.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){let i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);let o=Object.assign(Object.assign({},n),{preTunedModel:i});return o.baseModel=void 0,await this.tuneInternal(o)}else{let i=Object.assign({},n);return await this.tuneInternal(i)}else{let i=Object.assign({},n),o=await this.tuneMldevInternal(i),s="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?s=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(s=o.name.split("/operations/")[0]),{name:s,state:uM.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=pq(e);return a=q("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>H_(h))}else{let c=hq(e);return a=q("{name}",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>FM(h))}}async listInternal(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=vq(e);return a=q("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=Eq(h),m=new eh;return Object.assign(m,p),m})}else{let c=yq(e);return a=q("tunedModels",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=_q(h),m=new eh;return Object.assign(m,p),m})}}async cancel(e){var n,r,i,o;let s,a="",l={};if(this.apiClient.isVertexAI()){let c=sq(e);return a=q("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=lq(h),m=new th;return Object.assign(m,p),m})}else{let c=oq(e);return a=q("{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(h=>h.json().then(p=>{let m=p;return m.sdkHttpResponse={headers:h.headers},m})),s.then(h=>{let p=aq(h),m=new th;return Object.assign(m,p),m})}}async tuneInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI()){let a=fq(e,e);return o=q("tuningJobs",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>H_(l))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let a=dq(e);return o=q("tunedModels",a._url),s=a._query,delete a._url,delete a._query,i=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(l=>l.json().then(c=>{let h=c;return h.sdkHttpResponse={headers:l.headers},h})),i.then(l=>wq(l))}}};var G_=class{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},Dq=1024*1024*8,Sq=3,Aq=1e3,bq=2,ah="x-goog-upload-status";async function Mq(t,e,n){var r;let i=await OM(t,e,n),o=await i?.json();if(((r=i?.headers)===null||r===void 0?void 0:r[ah])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return o.file}async function Rq(t,e,n){var r;let i=await OM(t,e,n),o=await i?.json();if(((r=i?.headers)===null||r===void 0?void 0:r[ah])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let s=lM(o),a=new __;return Object.assign(a,s),a}async function OM(t,e,n){var r,i;let o=0,s=0,a=new fu(new Response),l="upload";for(o=t.size;s<o;){let c=Math.min(Dq,o-s),h=t.slice(s,s+c);s+c>=o&&(l+=", finalize");let p=0,m=Aq;for(;p<Sq&&(a=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(s),"Content-Length":String(c)}}}),!(!((r=a?.headers)===null||r===void 0)&&r[ah]));)p++,await xq(m),m=m*bq;if(s+=c,((i=a?.headers)===null||i===void 0?void 0:i[ah])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return a}async function Nq(t){return{size:t.size,type:t.type}}function xq(t){return new Promise(e=>setTimeout(e,t))}var q_=class{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Mq(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Rq(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Nq(e)}};var z_=class{create(e,n,r){return new j_(e,n,r)}},j_=class{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var aM="x-goog-api-key",W_=class{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(aM)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(aM,this.apiKey)}}};var Pq="gl-node/",lh=class{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;let r=GB(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;let i=new W_(this.apiKey);this.apiClient=new R_({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Pq+"web",uploader:new q_,downloader:new G_}),this.models=new O_(this.apiClient),this.live=new k_(this.apiClient,i,new z_),this.batches=new I_(this.apiClient),this.chats=new w_(this.models,this.apiClient),this.caches=new T_(this.apiClient),this.files=new S_(this.apiClient),this.operations=new L_(this.apiClient),this.authTokens=new V_(this.apiClient),this.tunings=new $_(this.apiClient),this.fileSearchStores=new B_(this.apiClient)}};var fh=class t{googleGenAI=new lh({apiKey:this.decodeConfig("WVFieUthWixNdUBNYSBuai5uUytsLG1Lfl1oelR+UV5cdCxeQk93")});getSuggestionPrompt(e){let n=`
    Eres un generador profesional de prompts para crear paletas de colores.
    Tu tarea es producir un \xFAnico prompt breve, claro y visualmente descriptivo que sirva para que otra IA genere una paleta de colores.

    REGLAS:
    - Esto es lo que quiere el usuario de la paleta, t\xF3malo en cuenta: ${e}
    - Evita repetir escenarios, colores o emociones comunes.
    - S\xE9 lo m\xE1s original y creativo posible en cada prompt.
    - Genera prompts que sean muy diferentes entre s\xED.
    - No devuelvas explicaciones ni texto extra: SOLO el prompt final.
    - No incluyas c\xF3digos hexadecimales ni nombres t\xE9cnicos.
    - Describe sensaciones, ambientes, materiales, luz, emociones y estilos.
    - Usa lenguaje evocador y concreto.
    - Longitud m\xE1xima: 1\u20132 frases.

    FORMATO:
    [Prompt descriptivo]

    EJEMPLOS DE VARIEDAD:
    - \u201CAtardecer c\xE1lido en un pueblo costero mediterr\xE1neo, luz dorada sobre paredes blancas y detalles en azul profundo.\u201D
    - \u201CInterior minimalista japon\xE9s, tonos naturales de madera clara con sombras suaves y acentos negros.\u201D
    - \u201CBosque m\xEDstico cubierto de niebla, hojas mojadas reflejando la luz de la luna, atm\xF3sfera et\xE9rea y silenciosa.\u201D

    Genera un prompt ahora, tratando de que sea muy distinto a los ejemplos anteriores.
    `;return this.getAIMessage(n)}getInterpretation(e){let n=`
    Eres un experto en dise\xF1o e interpretaci\xF3n de paletas de color.

    Quiero que analices la siguiente paleta y generes una **interpretaci\xF3n textual clara y atractiva para un usuario final**.

    La interpretaci\xF3n debe:
    - Describir qu\xE9 sensaciones transmite la combinaci\xF3n de colores.
    - Mencionar para qu\xE9 contextos o usos visuales es adecuada (branding, web, marketing, interiorismo, etc.).
    - Tener un tono inspirador y profesional.
    - Tener una longitud de entre 2 y 4 frases.
    - No hagas listas ni encabezados: devuelve un \xFAnico texto fluido.

    DATOS DE LA PALETA:

    Color base:
    - Nombre: ${e.baseColor.name||"Sin nombre"}
    - Hex: ${e.baseColor.hex}
    - RGB: (${e.baseColor.r}, ${e.baseColor.g}, ${e.baseColor.b})

    Colores secundarios:
    ${e.colors.map((r,i)=>`
    ${i+1}. ${r.name||"Color sin nombre"} - ${r.hex} - RGB(${r.r}, ${r.g}, ${r.b})
    `).join("")}

    Esquema crom\xE1tico:
    - Tipo: ${e.scheme.type}
    - N\xFAmero de tonos: ${e.scheme.tones}

    Concepto asociado:
    - Contexto: ${e.concept.context}
    - Sugerencia: ${e.concept.suggestion}

    Devuelve \xFAnicamente el texto final de interpretaci\xF3n, sin explicaciones adicionales ni etiquetas.
    `;return this.getAIMessage(n)}getAIMessage(e){let n=this.googleGenAI.models.generateContent({model:"gemini-2.5-flash",contents:e});return Pe(n).pipe(ce(r=>r.text||""))}decodeConfig(e,n=24){return atob(e).split("").map(r=>String.fromCharCode(r.charCodeAt(0)^n)).join("")}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})},hh=class t{prompts=["A emplear en la creaci\xF3n de combinaciones vibrantes.","Inspirado en atm\xF3sferas de calma minimalista.","Dise\xF1ado para evocar sensaciones c\xE1lidas y acogedoras.","Pensado para estilos urbanos modernos.","Ideal para transmitir sofisticaci\xF3n y elegancia.","Con notas visuales frescas y naturales.","Para generar contrastes atrevidos y din\xE1micos.","Orientado a composiciones suaves y equilibradas.","Con una est\xE9tica contempor\xE1nea y limpia.","Enfocado en una expresi\xF3n art\xEDstica emocional.","Con influencia de paisajes mediterr\xE1neos.","Inspirado en la serenidad de la naturaleza.","Para comunicar energ\xEDa positiva.","Con un enfoque elegante y sobrio.","Pensado para ambientes relajantes.","Ideal para branding moderno.","Dise\xF1ado para transmitir confianza.","Con una vibra juvenil y din\xE1mica.","Perfecto para proyectos creativos.","Pensado para generar impacto visual.","Inspirado en la est\xE9tica escandinava.","Con una paleta fresca y ligera.","Para lograr ambientes arm\xF3nicos.","Con una intenci\xF3n expresiva clara.","Dise\xF1ado para destacar sin saturar.","Para composiciones visuales minimalistas.","Inspirado en tonos de temporada.","Enfocado en un balance crom\xE1tico preciso.","Con un estilo limpio y funcional.","Pensado para comunicar modernidad.","Para transmitir sensaciones optimistas.","Inspirado en paisajes urbanos nocturnos.","Con car\xE1cter sofisticado.","Pensado para espacios digitales.","Para composiciones visuales audaces.","Con un tono elegante pero accesible.","Inspirado en la est\xE9tica editorial.","Dise\xF1ado para causar buena primera impresi\xF3n.","Para transmitir profesionalismo.","Enfocado en claridad visual.","Ideal para destacar elementos clave.","Con una inspiraci\xF3n art\xEDstica contempor\xE1nea.","Para comunicar innovaci\xF3n.","Pensado para proyectos tecnol\xF3gicos.","Inspirado en la naturaleza salvaje.","Con contrastes refinados.","Para lograr una experiencia visual envolvente.","Dise\xF1ado para transmitir bienestar.","Con \xE9nfasis en tonos suaves.","Para crear ambientes reconfortantes.","Inspirado en galer\xEDas de arte modernas.","Dise\xF1ado para atraer la atenci\xF3n.","Con una narrativa visual definida.","Pensado para est\xE9tica premium.","Para transmitir exclusividad.","Con una paleta de tonos terrosos.","Inspirado en tonos oce\xE1nicos.","Pensado para relajaci\xF3n visual.","Para dise\xF1ar experiencias inmersivas.","Con un estilo limpio y ordenado.","Inspirado en la luz del amanecer.","Ideado para transmitir frescura.","Con un toque sutil de sofisticaci\xF3n.","Para propuestas visuales distintivas.","Dise\xF1ado para identidad de marca.","Enfocado en composiciones balanceadas.","Para crear atm\xF3sferas delicadas.","Inspirado en tonos pastel suaves.","Con una est\xE9tica accesible.","Para transmitir cercan\xEDa emocional.","Pensado para ambientes estimulantes.","Con una vibra creativa.","Inspirado en festivales de dise\xF1o.","Para generar sensaci\xF3n de movimiento.","Dise\xF1ado para destacar sin exagerar.","Con una intenci\xF3n visual clara.","Para fortalecer la identidad gr\xE1fica.","Inspirado en ilustraci\xF3n digital.","Con una paleta moderna.","Para comunicar originalidad."];getSuggestionPrompt(e){let n=this.prompts[Math.floor(Math.random()*this.prompts.length)];return re(n).pipe(wn(1e3)).pipe(sn(1))}getInterpretation(e){let n=this.prompts[Math.floor(Math.random()*this.prompts.length)];return re(n).pipe(wn(100)).pipe(sn(1))}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};var Wt=class{name;hex;r;g;b;constructor(e="",n="#FFFFFF",r=255,i=255,o=255){this.name=e,this.hex=n,this.r=r,this.g=i,this.b=o}syncColorFromHEX(){let e=this.hex?.replace("#","");e&&(this.r=parseInt(e.substring(0,2),16),this.g=parseInt(e.substring(2,4),16),this.b=parseInt(e.substring(4,6),16))}syncColorFromRGB(){let{r:e,g:n,b:r}=this;[e,n,r].some(i=>i<0||i>255||i==null)||(this.hex=("#"+[e,n,r].map(i=>i.toString(16).padStart(2,"0")).join("")).toUpperCase())}};var ph=class t{apiUrl="https://api.text2color.com";apiKey={"X-API-Key":this.decodeConfig("LCsuKih7Ky4vfCkqLCkvLCB+fisrLiogKykqICx5IS8=")};httpClient=k(gs);text2Color(e){let n=e.context;e.suggestion&&(n&&!n.endsWith(".")&&(n+="."),n+=` ${e.suggestion}`);let r=this.apiKey;return this.httpClient.get(this.apiUrl+`/color/${encodeURIComponent(n)}`,{headers:r}).pipe(ce(i=>this.toColor(i)))}toColor(e){return new Wt(e?.color_description,e?.hex_code,e?.rgb?.[0],e?.rgb?.[1],e?.rgb?.[2])}decodeConfig(e,n=24){return atob(e).split("").map(r=>String.fromCharCode(r.charCodeAt(0)^n)).join("")}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})},mh=class t{text2Color(e){return re(this.randomColor()).pipe(wn(1e3)).pipe(sn(1))}randomColor(){let e=this.randomChannel(),n=this.randomChannel(),r=this.randomChannel(),i=`#${this.toHex(e)}${this.toHex(n)}${this.toHex(r)}`,o=["Royal Orange","Ocean Blue","Emerald Green","Sunset Pink","Lavender Mist","Golden Yellow","Coral Red","Sky Teal","Deep Purple","Soft Gray"],s=o[Math.floor(Math.random()*o.length)];return new Wt(s,i,e,n,r)}randomChannel(){return Math.floor(Math.random()*256)}toHex(e){let n=e.toString(16);return n.length===1?"0"+n:n}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};var sr=class{type;tones;constructor(e="monochrome",n=1){this.type=e,this.tones=n}};var Ei=class{context;suggestion;constructor(e="",n=""){this.context=e,this.suggestion=n}};var Ln=class{id;baseColor;colors;scheme;concept;interpretation;constructor(e="",n=new Wt,r=[],i=new sr,o=new Ei,s=""){this.id=e,this.baseColor=n,this.colors=r,this.scheme=i,this.concept=o,this.interpretation=s}};var gh=class t{apiUrl="https://www.thecolorapi.com";httpClient=k(gs);getColorPalette(e,n,r){let i={hex:e.hex.replace("#",""),format:"json",mode:n.type,count:n.tones};return this.httpClient.get(this.apiUrl+"/scheme",{params:i}).pipe(ce(o=>this.toColorPalette(o,r)),sn(1))}toColorPalette(e,n){let i=this.toColor(e?.seed),o=e?.colors?.map(a=>this.toColor(a)),s=new sr(e?.mode,e?.count);return new Ln("1",i,o,s,n)}toColor(e){return new Wt(e?.name?.value,e?.hex?.value,e?.rgb?.r,e?.rgb?.g,e?.rgb?.b)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})},yh=class t{getColorPalette(e,n,r){let i=this.generatePalette(e,n,r);return re(i).pipe(wn(100),sn(1))}generatePalette(e,n,r){let i=[];for(let s=0;s<n.tones;s++)i.push(this.variationColor(e,s,n.tones));let o="mock-"+Math.floor(Math.random()*1e3);return new Ln(o,e,i,n,r)}variationColor(e,n,r){let i=(n-Math.floor(r/2))/r,o=this.clamp(e.r+Math.round(50*i+this.randomOffset()),0,255),s=this.clamp(e.g+Math.round(50*i+this.randomOffset()),0,255),a=this.clamp(e.b+Math.round(50*i+this.randomOffset()),0,255),l=`#${this.toHex(o)}${this.toHex(s)}${this.toHex(a)}`;return new Wt("",l,o,s,a)}randomOffset(){return Math.floor(Math.random()*21-10)}clamp(e,n,r){return Math.min(Math.max(e,n),r)}toHex(e){let n=e.toString(16);return n.length===1?"0"+n:n}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};function kq(t,e){t&1&&jt(0,"i",2)}function Fq(t,e){t&1&&jt(0,"i",3)}function Oq(t,e){if(t&1){let n=Py();Ue(0,"div",0)(1,"a",1),Bd("click",function(){zc(n);let i=Ct();return jc(i.edit())}),Dt(2,kq,1,0,"i",2)(3,Fq,1,0,"i",3),Be()()}if(t&2){let n=Ct();z(),Oe("mt-2",(n.step==null?null:n.step.isEditable())===!0)("cursor-default",!n.isActionable()),z(),St((n.step==null?null:n.step.isEditable())===!0?2:(n.step==null?null:n.step.isCompleted())===!0?3:-1)}}var vh=class t{step;loading=!1;editStep=new Je;edit(){this.isActionable()&&this.editStep.emit(this.step)}isActionable(){return this.step?.isEditable()===!0&&this.loading!==!0}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=xe({type:t,selectors:[["app-step-overlay"]],inputs:{step:"step",loading:"loading"},outputs:{editStep:"editStep"},decls:1,vars:1,consts:[[1,"overlay"],["type","button",3,"click"],[1,"bi","bi-pencil-square","fs-3","px-3","text-gray"],[1,"bi","bi-check","fs-1","px-2","text-success"]],template:function(n,r){n&1&&Dt(0,Oq,4,5,"div",0),n&2&&St((r.step==null?null:r.step.isEnabled())!==!0?0:-1)},encapsulation:2})};function Lq(t,e){t&1&&jt(0,"span",1)}function Vq(t,e){if(t&1&&jt(0,"i"),t&2){let n=Ct(2);uo(n.iconClass+" me-2")}}function Uq(t,e){if(t&1&&Dt(0,Lq,1,0,"span",1)(1,Vq,1,2,"i",2),t&2){let n=Ct();St(n.loading?0:1)}}function Bq(t,e){t&1&&jt(0,"span",3)}function Hq(t,e){if(t&1&&jt(0,"i"),t&2){let n=Ct(2);uo(n.iconClass+" ms-1")}}function $q(t,e){if(t&1&&Dt(0,Bq,1,0,"span",3)(1,Hq,1,2,"i",2),t&2){let n=Ct();St(n.loading?0:1)}}var _h=class t{label;btnClass="btn btn-primary";iconClass;iconPosition="start";loading=!1;disabled=!1;get isDisabled(){return this.loading||this.disabled}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=xe({type:t,selectors:[["btn-spinner"]],inputs:{label:"label",btnClass:"btnClass",iconClass:"iconClass",iconPosition:"iconPosition",loading:"loading",disabled:"disabled"},decls:5,vars:8,consts:[["type","button",3,"disabled"],["aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[3,"class"],["aria-hidden","true",1,"spinner-border","spinner-border-sm","ms-1"]],template:function(n,r){n&1&&(Ue(0,"button",0),Dt(1,Uq,2,1),Ue(2,"span"),B(3),Be(),Dt(4,$q,2,1),Be()),n&2&&(uo(r.btnClass),Oe("disabled",r.isDisabled),ui("disabled",r.isDisabled),z(),St(r.iconPosition==="start"?1:-1),z(2),Ze(r.label),z(),St(r.iconPosition==="end"?4:-1))},encapsulation:2})};function Gq(t,e){if(t&1&&(Ue(0,"div",1)(1,"span"),B(2,"Se ha producido un error:"),Be(),Ue(3,"pre",2)(4,"strong"),B(5),Be()()()),t&2){let n=Ct();uo(n.alertClass),z(5),Ze(n.getErrorMessage())}}var Bs=class t{error=null;alertClass="";getErrorMessage(){return this.error?typeof this.error=="string"?this.error:JSON.stringify(this.error,null,2):""}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=xe({type:t,selectors:[["app-error-alert"]],inputs:{error:"error",alertClass:"alertClass"},decls:1,vars:1,consts:[["role","alert",1,"alert","alert-danger","fade","show",3,"class"],["role","alert",1,"alert","alert-danger","fade","show"],[1,"mt-2","mb-0","pb-2"]],template:function(n,r){n&1&&Dt(0,Gq,6,3,"div",0),n&2&&St(r.error?0:-1)},encapsulation:2})};var wo=class{data;status;initiated;error;constructor(e,n="DISABLED",r=!1,i=void 0){this.data=e,this.status=n,this.initiated=r,this.error=i}isEnabled(){return this.is("ENABLED")}isEditable(){return this.is("EDITABLE")}isCompleted(){return this.is("COMPLETED")}is(e){return this.status===e}};var LM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},VM={};var Pr,X_;(function(){var t;function e(w,C){function E(){}E.prototype=C.prototype,w.F=C.prototype,w.prototype=new E,w.prototype.constructor=w,w.D=function(S,D,M){for(var T=Array(arguments.length-2),yt=2;yt<arguments.length;yt++)T[yt-2]=arguments[yt];return C.prototype[D].apply(S,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,C,E){E||(E=0);let S=Array(16);if(typeof C=="string")for(var D=0;D<16;++D)S[D]=C.charCodeAt(E++)|C.charCodeAt(E++)<<8|C.charCodeAt(E++)<<16|C.charCodeAt(E++)<<24;else for(D=0;D<16;++D)S[D]=C[E++]|C[E++]<<8|C[E++]<<16|C[E++]<<24;C=w.g[0],E=w.g[1],D=w.g[2];let M=w.g[3],T;T=C+(M^E&(D^M))+S[0]+3614090360&4294967295,C=E+(T<<7&4294967295|T>>>25),T=M+(D^C&(E^D))+S[1]+3905402710&4294967295,M=C+(T<<12&4294967295|T>>>20),T=D+(E^M&(C^E))+S[2]+606105819&4294967295,D=M+(T<<17&4294967295|T>>>15),T=E+(C^D&(M^C))+S[3]+3250441966&4294967295,E=D+(T<<22&4294967295|T>>>10),T=C+(M^E&(D^M))+S[4]+4118548399&4294967295,C=E+(T<<7&4294967295|T>>>25),T=M+(D^C&(E^D))+S[5]+1200080426&4294967295,M=C+(T<<12&4294967295|T>>>20),T=D+(E^M&(C^E))+S[6]+2821735955&4294967295,D=M+(T<<17&4294967295|T>>>15),T=E+(C^D&(M^C))+S[7]+4249261313&4294967295,E=D+(T<<22&4294967295|T>>>10),T=C+(M^E&(D^M))+S[8]+1770035416&4294967295,C=E+(T<<7&4294967295|T>>>25),T=M+(D^C&(E^D))+S[9]+2336552879&4294967295,M=C+(T<<12&4294967295|T>>>20),T=D+(E^M&(C^E))+S[10]+4294925233&4294967295,D=M+(T<<17&4294967295|T>>>15),T=E+(C^D&(M^C))+S[11]+2304563134&4294967295,E=D+(T<<22&4294967295|T>>>10),T=C+(M^E&(D^M))+S[12]+1804603682&4294967295,C=E+(T<<7&4294967295|T>>>25),T=M+(D^C&(E^D))+S[13]+4254626195&4294967295,M=C+(T<<12&4294967295|T>>>20),T=D+(E^M&(C^E))+S[14]+2792965006&4294967295,D=M+(T<<17&4294967295|T>>>15),T=E+(C^D&(M^C))+S[15]+1236535329&4294967295,E=D+(T<<22&4294967295|T>>>10),T=C+(D^M&(E^D))+S[1]+4129170786&4294967295,C=E+(T<<5&4294967295|T>>>27),T=M+(E^D&(C^E))+S[6]+3225465664&4294967295,M=C+(T<<9&4294967295|T>>>23),T=D+(C^E&(M^C))+S[11]+643717713&4294967295,D=M+(T<<14&4294967295|T>>>18),T=E+(M^C&(D^M))+S[0]+3921069994&4294967295,E=D+(T<<20&4294967295|T>>>12),T=C+(D^M&(E^D))+S[5]+3593408605&4294967295,C=E+(T<<5&4294967295|T>>>27),T=M+(E^D&(C^E))+S[10]+38016083&4294967295,M=C+(T<<9&4294967295|T>>>23),T=D+(C^E&(M^C))+S[15]+3634488961&4294967295,D=M+(T<<14&4294967295|T>>>18),T=E+(M^C&(D^M))+S[4]+3889429448&4294967295,E=D+(T<<20&4294967295|T>>>12),T=C+(D^M&(E^D))+S[9]+568446438&4294967295,C=E+(T<<5&4294967295|T>>>27),T=M+(E^D&(C^E))+S[14]+3275163606&4294967295,M=C+(T<<9&4294967295|T>>>23),T=D+(C^E&(M^C))+S[3]+4107603335&4294967295,D=M+(T<<14&4294967295|T>>>18),T=E+(M^C&(D^M))+S[8]+1163531501&4294967295,E=D+(T<<20&4294967295|T>>>12),T=C+(D^M&(E^D))+S[13]+2850285829&4294967295,C=E+(T<<5&4294967295|T>>>27),T=M+(E^D&(C^E))+S[2]+4243563512&4294967295,M=C+(T<<9&4294967295|T>>>23),T=D+(C^E&(M^C))+S[7]+1735328473&4294967295,D=M+(T<<14&4294967295|T>>>18),T=E+(M^C&(D^M))+S[12]+2368359562&4294967295,E=D+(T<<20&4294967295|T>>>12),T=C+(E^D^M)+S[5]+4294588738&4294967295,C=E+(T<<4&4294967295|T>>>28),T=M+(C^E^D)+S[8]+2272392833&4294967295,M=C+(T<<11&4294967295|T>>>21),T=D+(M^C^E)+S[11]+1839030562&4294967295,D=M+(T<<16&4294967295|T>>>16),T=E+(D^M^C)+S[14]+4259657740&4294967295,E=D+(T<<23&4294967295|T>>>9),T=C+(E^D^M)+S[1]+2763975236&4294967295,C=E+(T<<4&4294967295|T>>>28),T=M+(C^E^D)+S[4]+1272893353&4294967295,M=C+(T<<11&4294967295|T>>>21),T=D+(M^C^E)+S[7]+4139469664&4294967295,D=M+(T<<16&4294967295|T>>>16),T=E+(D^M^C)+S[10]+3200236656&4294967295,E=D+(T<<23&4294967295|T>>>9),T=C+(E^D^M)+S[13]+681279174&4294967295,C=E+(T<<4&4294967295|T>>>28),T=M+(C^E^D)+S[0]+3936430074&4294967295,M=C+(T<<11&4294967295|T>>>21),T=D+(M^C^E)+S[3]+3572445317&4294967295,D=M+(T<<16&4294967295|T>>>16),T=E+(D^M^C)+S[6]+76029189&4294967295,E=D+(T<<23&4294967295|T>>>9),T=C+(E^D^M)+S[9]+3654602809&4294967295,C=E+(T<<4&4294967295|T>>>28),T=M+(C^E^D)+S[12]+3873151461&4294967295,M=C+(T<<11&4294967295|T>>>21),T=D+(M^C^E)+S[15]+530742520&4294967295,D=M+(T<<16&4294967295|T>>>16),T=E+(D^M^C)+S[2]+3299628645&4294967295,E=D+(T<<23&4294967295|T>>>9),T=C+(D^(E|~M))+S[0]+4096336452&4294967295,C=E+(T<<6&4294967295|T>>>26),T=M+(E^(C|~D))+S[7]+1126891415&4294967295,M=C+(T<<10&4294967295|T>>>22),T=D+(C^(M|~E))+S[14]+2878612391&4294967295,D=M+(T<<15&4294967295|T>>>17),T=E+(M^(D|~C))+S[5]+4237533241&4294967295,E=D+(T<<21&4294967295|T>>>11),T=C+(D^(E|~M))+S[12]+1700485571&4294967295,C=E+(T<<6&4294967295|T>>>26),T=M+(E^(C|~D))+S[3]+2399980690&4294967295,M=C+(T<<10&4294967295|T>>>22),T=D+(C^(M|~E))+S[10]+4293915773&4294967295,D=M+(T<<15&4294967295|T>>>17),T=E+(M^(D|~C))+S[1]+2240044497&4294967295,E=D+(T<<21&4294967295|T>>>11),T=C+(D^(E|~M))+S[8]+1873313359&4294967295,C=E+(T<<6&4294967295|T>>>26),T=M+(E^(C|~D))+S[15]+4264355552&4294967295,M=C+(T<<10&4294967295|T>>>22),T=D+(C^(M|~E))+S[6]+2734768916&4294967295,D=M+(T<<15&4294967295|T>>>17),T=E+(M^(D|~C))+S[13]+1309151649&4294967295,E=D+(T<<21&4294967295|T>>>11),T=C+(D^(E|~M))+S[4]+4149444226&4294967295,C=E+(T<<6&4294967295|T>>>26),T=M+(E^(C|~D))+S[11]+3174756917&4294967295,M=C+(T<<10&4294967295|T>>>22),T=D+(C^(M|~E))+S[2]+718787259&4294967295,D=M+(T<<15&4294967295|T>>>17),T=E+(M^(D|~C))+S[9]+3951481745&4294967295,w.g[0]=w.g[0]+C&4294967295,w.g[1]=w.g[1]+(D+(T<<21&4294967295|T>>>11))&4294967295,w.g[2]=w.g[2]+D&4294967295,w.g[3]=w.g[3]+M&4294967295}r.prototype.v=function(w,C){C===void 0&&(C=w.length);let E=C-this.blockSize,S=this.C,D=this.h,M=0;for(;M<C;){if(D==0)for(;M<=E;)i(this,w,M),M+=this.blockSize;if(typeof w=="string"){for(;M<C;)if(S[D++]=w.charCodeAt(M++),D==this.blockSize){i(this,S),D=0;break}}else for(;M<C;)if(S[D++]=w[M++],D==this.blockSize){i(this,S),D=0;break}}this.h=D,this.o+=C},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var C=1;C<w.length-8;++C)w[C]=0;C=this.o*8;for(var E=w.length-8;E<w.length;++E)w[E]=C&255,C/=256;for(this.v(w),w=Array(16),C=0,E=0;E<4;++E)for(let S=0;S<32;S+=8)w[C++]=this.g[E]>>>S&255;return w};function o(w,C){var E=a;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=C(w)}function s(w,C){this.h=C;let E=[],S=!0;for(let D=w.length-1;D>=0;D--){let M=w[D]|0;S&&M==C||(E[D]=M,S=!1)}this.g=E}var a={};function l(w){return-128<=w&&w<128?o(w,function(C){return new s([C|0],C<0?-1:0)}):new s([w|0],w<0?-1:0)}function c(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return A(c(-w));let C=[],E=1;for(let S=0;w>=E;S++)C[S]=w/E|0,E*=4294967296;return new s(C,0)}function h(w,C){if(w.length==0)throw Error("number format error: empty string");if(C=C||10,C<2||36<C)throw Error("radix out of range: "+C);if(w.charAt(0)=="-")return A(h(w.substring(1),C));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=c(Math.pow(C,8)),S=p;for(let M=0;M<w.length;M+=8){var D=Math.min(8,w.length-M);let T=parseInt(w.substring(M,M+D),C);D<8?(D=c(Math.pow(C,D)),S=S.j(D).add(c(T))):(S=S.j(E),S=S.add(c(T)))}return S}var p=l(0),m=l(1),v=l(16777216);t=s.prototype,t.m=function(){if(b(this))return-A(this).m();let w=0,C=1;for(let E=0;E<this.g.length;E++){let S=this.i(E);w+=(S>=0?S:4294967296+S)*C,C*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(I(this))return"0";if(b(this))return"-"+A(this).toString(w);let C=c(Math.pow(w,6));var E=this;let S="";for(;;){let D=G(E,C).g;E=N(E,D.j(C));let M=((E.g.length>0?E.g[0]:E.h)>>>0).toString(w);if(E=D,I(E))return M+S;for(;M.length<6;)M="0"+M;S=M+S}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function I(w){if(w.h!=0)return!1;for(let C=0;C<w.g.length;C++)if(w.g[C]!=0)return!1;return!0}function b(w){return w.h==-1}t.l=function(w){return w=N(this,w),b(w)?-1:I(w)?0:1};function A(w){let C=w.g.length,E=[];for(let S=0;S<C;S++)E[S]=~w.g[S];return new s(E,~w.h).add(m)}t.abs=function(){return b(this)?A(this):this},t.add=function(w){let C=Math.max(this.g.length,w.g.length),E=[],S=0;for(let D=0;D<=C;D++){let M=S+(this.i(D)&65535)+(w.i(D)&65535),T=(M>>>16)+(this.i(D)>>>16)+(w.i(D)>>>16);S=T>>>16,M&=65535,T&=65535,E[D]=T<<16|M}return new s(E,E[E.length-1]&-2147483648?-1:0)};function N(w,C){return w.add(A(C))}t.j=function(w){if(I(this)||I(w))return p;if(b(this))return b(w)?A(this).j(A(w)):A(A(this).j(w));if(b(w))return A(this.j(A(w)));if(this.l(v)<0&&w.l(v)<0)return c(this.m()*w.m());let C=this.g.length+w.g.length,E=[];for(var S=0;S<2*C;S++)E[S]=0;for(S=0;S<this.g.length;S++)for(let D=0;D<w.g.length;D++){let M=this.i(S)>>>16,T=this.i(S)&65535,yt=w.i(D)>>>16,En=w.i(D)&65535;E[2*S+2*D]+=T*En,O(E,2*S+2*D),E[2*S+2*D+1]+=M*En,O(E,2*S+2*D+1),E[2*S+2*D+1]+=T*yt,O(E,2*S+2*D+1),E[2*S+2*D+2]+=M*yt,O(E,2*S+2*D+2)}for(w=0;w<C;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=C;w<2*C;w++)E[w]=0;return new s(E,0)};function O(w,C){for(;(w[C]&65535)!=w[C];)w[C+1]+=w[C]>>>16,w[C]&=65535,C++}function L(w,C){this.g=w,this.h=C}function G(w,C){if(I(C))throw Error("division by zero");if(I(w))return new L(p,p);if(b(w))return C=G(A(w),C),new L(A(C.g),A(C.h));if(b(C))return C=G(w,A(C)),new L(A(C.g),C.h);if(w.g.length>30){if(b(w)||b(C))throw Error("slowDivide_ only works with positive integers.");for(var E=m,S=C;S.l(w)<=0;)E=Z(E),S=Z(S);var D=Y(E,1),M=Y(S,1);for(S=Y(S,2),E=Y(E,2);!I(S);){var T=M.add(S);T.l(w)<=0&&(D=D.add(E),M=T),S=Y(S,1),E=Y(E,1)}return C=N(w,D.j(C)),new L(D,C)}for(D=p;w.l(C)>=0;){for(E=Math.max(1,Math.floor(w.m()/C.m())),S=Math.ceil(Math.log(E)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),M=c(E),T=M.j(C);b(T)||T.l(w)>0;)E-=S,M=c(E),T=M.j(C);I(M)&&(M=m),D=D.add(M),w=N(w,T)}return new L(D,w)}t.B=function(w){return G(this,w).h},t.and=function(w){let C=Math.max(this.g.length,w.g.length),E=[];for(let S=0;S<C;S++)E[S]=this.i(S)&w.i(S);return new s(E,this.h&w.h)},t.or=function(w){let C=Math.max(this.g.length,w.g.length),E=[];for(let S=0;S<C;S++)E[S]=this.i(S)|w.i(S);return new s(E,this.h|w.h)},t.xor=function(w){let C=Math.max(this.g.length,w.g.length),E=[];for(let S=0;S<C;S++)E[S]=this.i(S)^w.i(S);return new s(E,this.h^w.h)};function Z(w){let C=w.g.length+1,E=[];for(let S=0;S<C;S++)E[S]=w.i(S)<<1|w.i(S-1)>>>31;return new s(E,w.h)}function Y(w,C){let E=C>>5;C%=32;let S=w.g.length-E,D=[];for(let M=0;M<S;M++)D[M]=C>0?w.i(M+E)>>>C|w.i(M+E+1)<<32-C:w.i(M+E);return new s(D,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,X_=VM.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=c,s.fromString=h,Pr=VM.Integer=s}).apply(typeof LM<"u"?LM:typeof self<"u"?self:typeof window<"u"?window:{});var Eh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kr={};var eE,qq,Hs,tE,hu,Ch,nE,rE,iE;(function(){var t,e=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Eh=="object"&&Eh];for(var g=0;g<f.length;++g){var y=f[g];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(f,g){if(g)e:{var y=r;f=f.split(".");for(var _=0;_<f.length-1;_++){var R=f[_];if(!(R in y))break e;y=y[R]}f=f[f.length-1],_=y[f],g=g(_),g!=_&&g!=null&&e(y,f,{configurable:!0,writable:!0,value:g})}}i("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(f){return f||function(g){var y=[],_;for(_ in g)Object.prototype.hasOwnProperty.call(g,_)&&y.push([_,g[_]]);return y}});var o=o||{},s=this||self;function a(f){var g=typeof f;return g=="object"&&f!=null||g=="function"}function l(f,g,y){return f.call.apply(f.bind,arguments)}function c(f,g,y){return c=l,c.apply(null,arguments)}function h(f,g){var y=Array.prototype.slice.call(arguments,1);return function(){var _=y.slice();return _.push.apply(_,arguments),f.apply(this,_)}}function p(f,g){function y(){}y.prototype=g.prototype,f.Z=g.prototype,f.prototype=new y,f.prototype.constructor=f,f.Ob=function(_,R,x){for(var $=Array(arguments.length-2),de=2;de<arguments.length;de++)$[de-2]=arguments[de];return g.prototype[R].apply(_,$)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function v(f){let g=f.length;if(g>0){let y=Array(g);for(let _=0;_<g;_++)y[_]=f[_];return y}return[]}function I(f,g){for(let _=1;_<arguments.length;_++){let R=arguments[_];var y=typeof R;if(y=y!="object"?y:R?Array.isArray(R)?"array":y:"null",y=="array"||y=="object"&&typeof R.length=="number"){y=f.length||0;let x=R.length||0;f.length=y+x;for(let $=0;$<x;$++)f[y+$]=R[$]}else f.push(R)}}class b{constructor(g,y){this.i=g,this.j=y,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function A(f){s.setTimeout(()=>{throw f},0)}function N(){var f=w;let g=null;return f.g&&(g=f.g,f.g=f.g.next,f.g||(f.h=null),g.next=null),g}class O{constructor(){this.h=this.g=null}add(g,y){let _=L.get();_.set(g,y),this.h?this.h.next=_:this.g=_,this.h=_}}var L=new b(()=>new G,f=>f.reset());class G{constructor(){this.next=this.g=this.h=null}set(g,y){this.h=g,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let Z,Y=!1,w=new O,C=()=>{let f=Promise.resolve(void 0);Z=()=>{f.then(E)}};function E(){for(var f;f=N();){try{f.h.call(f.g)}catch(y){A(y)}var g=L;g.j(f),g.h<100&&(g.h++,f.next=g.g,g.g=f)}Y=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(f,g){this.type=f,this.g=this.target=g,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var f=!1,g=Object.defineProperty({},"passive",{get:function(){f=!0}});try{let y=()=>{};s.addEventListener("test",y,g),s.removeEventListener("test",y,g)}catch{}return f})();function T(f){return/^[\s\xa0]*$/.test(f)}function yt(f,g){D.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,g)}p(yt,D),yt.prototype.init=function(f,g){let y=this.type=f.type,_=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=g,g=f.relatedTarget,g||(y=="mouseover"?g=f.fromElement:y=="mouseout"&&(g=f.toElement)),this.relatedTarget=g,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&yt.Z.h.call(this)},yt.prototype.h=function(){yt.Z.h.call(this);let f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var En="closure_listenable_"+(Math.random()*1e6|0),Cn=0;function ya(f,g,y,_,R){this.listener=f,this.proxy=null,this.src=g,this.type=y,this.capture=!!_,this.ha=R,this.key=++Cn,this.da=this.fa=!1}function xu(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Pu(f,g,y){for(let _ in f)g.call(y,f[_],_,f)}function ox(f,g){for(let y in f)g.call(void 0,f[y],y,f)}function mI(f){let g={};for(let y in f)g[y]=f[y];return g}let gI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yI(f,g){let y,_;for(let R=1;R<arguments.length;R++){_=arguments[R];for(y in _)f[y]=_[y];for(let x=0;x<gI.length;x++)y=gI[x],Object.prototype.hasOwnProperty.call(_,y)&&(f[y]=_[y])}}function ku(f){this.src=f,this.g={},this.h=0}ku.prototype.add=function(f,g,y,_,R){let x=f.toString();f=this.g[x],f||(f=this.g[x]=[],this.h++);let $=wp(f,g,_,R);return $>-1?(g=f[$],y||(g.fa=!1)):(g=new ya(g,this.src,x,!!_,R),g.fa=y,f.push(g)),g};function Tp(f,g){let y=g.type;if(y in f.g){var _=f.g[y],R=Array.prototype.indexOf.call(_,g,void 0),x;(x=R>=0)&&Array.prototype.splice.call(_,R,1),x&&(xu(g),f.g[y].length==0&&(delete f.g[y],f.h--))}}function wp(f,g,y,_){for(let R=0;R<f.length;++R){let x=f[R];if(!x.da&&x.listener==g&&x.capture==!!y&&x.ha==_)return R}return-1}var Dp="closure_lm_"+(Math.random()*1e6|0),Sp={};function vI(f,g,y,_,R){if(_&&_.once)return EI(f,g,y,_,R);if(Array.isArray(g)){for(let x=0;x<g.length;x++)vI(f,g[x],y,_,R);return null}return y=Rp(y),f&&f[En]?f.J(g,y,a(_)?!!_.capture:!!_,R):_I(f,g,y,!1,_,R)}function _I(f,g,y,_,R,x){if(!g)throw Error("Invalid event type");let $=a(R)?!!R.capture:!!R,de=bp(f);if(de||(f[Dp]=de=new ku(f)),y=de.add(g,y,_,$,x),y.proxy)return y;if(_=sx(),y.proxy=_,_.src=f,_.listener=y,f.addEventListener)M||(R=$),R===void 0&&(R=!1),f.addEventListener(g.toString(),_,R);else if(f.attachEvent)f.attachEvent(II(g.toString()),_);else if(f.addListener&&f.removeListener)f.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return y}function sx(){function f(y){return g.call(f.src,f.listener,y)}let g=ax;return f}function EI(f,g,y,_,R){if(Array.isArray(g)){for(let x=0;x<g.length;x++)EI(f,g[x],y,_,R);return null}return y=Rp(y),f&&f[En]?f.K(g,y,a(_)?!!_.capture:!!_,R):_I(f,g,y,!0,_,R)}function CI(f,g,y,_,R){if(Array.isArray(g))for(var x=0;x<g.length;x++)CI(f,g[x],y,_,R);else _=a(_)?!!_.capture:!!_,y=Rp(y),f&&f[En]?(f=f.i,x=String(g).toString(),x in f.g&&(g=f.g[x],y=wp(g,y,_,R),y>-1&&(xu(g[y]),Array.prototype.splice.call(g,y,1),g.length==0&&(delete f.g[x],f.h--)))):f&&(f=bp(f))&&(g=f.g[g.toString()],f=-1,g&&(f=wp(g,y,_,R)),(y=f>-1?g[f]:null)&&Ap(y))}function Ap(f){if(typeof f!="number"&&f&&!f.da){var g=f.src;if(g&&g[En])Tp(g.i,f);else{var y=f.type,_=f.proxy;g.removeEventListener?g.removeEventListener(y,_,f.capture):g.detachEvent?g.detachEvent(II(y),_):g.addListener&&g.removeListener&&g.removeListener(_),(y=bp(g))?(Tp(y,f),y.h==0&&(y.src=null,g[Dp]=null)):xu(f)}}}function II(f){return f in Sp?Sp[f]:Sp[f]="on"+f}function ax(f,g){if(f.da)f=!0;else{g=new yt(g,this);let y=f.listener,_=f.ha||f.src;f.fa&&Ap(f),f=y.call(_,g)}return f}function bp(f){return f=f[Dp],f instanceof ku?f:null}var Mp="__closure_events_fn_"+(Math.random()*1e9>>>0);function Rp(f){return typeof f=="function"?f:(f[Mp]||(f[Mp]=function(g){return f.handleEvent(g)}),f[Mp])}function It(){S.call(this),this.i=new ku(this),this.M=this,this.G=null}p(It,S),It.prototype[En]=!0,It.prototype.removeEventListener=function(f,g,y,_){CI(this,f,g,y,_)};function Rt(f,g){var y,_=f.G;if(_)for(y=[];_;_=_.G)y.push(_);if(f=f.M,_=g.type||g,typeof g=="string")g=new D(g,f);else if(g instanceof D)g.target=g.target||f;else{var R=g;g=new D(_,f),yI(g,R)}R=!0;let x,$;if(y)for($=y.length-1;$>=0;$--)x=g.g=y[$],R=Fu(x,_,!0,g)&&R;if(x=g.g=f,R=Fu(x,_,!0,g)&&R,R=Fu(x,_,!1,g)&&R,y)for($=0;$<y.length;$++)x=g.g=y[$],R=Fu(x,_,!1,g)&&R}It.prototype.N=function(){if(It.Z.N.call(this),this.i){var f=this.i;for(let g in f.g){let y=f.g[g];for(let _=0;_<y.length;_++)xu(y[_]);delete f.g[g],f.h--}}this.G=null},It.prototype.J=function(f,g,y,_){return this.i.add(String(f),g,!1,y,_)},It.prototype.K=function(f,g,y,_){return this.i.add(String(f),g,!0,y,_)};function Fu(f,g,y,_){if(g=f.i.g[String(g)],!g)return!0;g=g.concat();let R=!0;for(let x=0;x<g.length;++x){let $=g[x];if($&&!$.da&&$.capture==y){let de=$.listener,at=$.ha||$.src;$.fa&&Tp(f.i,$),R=de.call(at,_)!==!1&&R}}return R&&!_.defaultPrevented}function lx(f,g){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=c(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:s.setTimeout(f,g||0)}function TI(f){f.g=lx(()=>{f.g=null,f.i&&(f.i=!1,TI(f))},f.l);let g=f.h;f.h=null,f.m.apply(null,g)}class ux extends S{constructor(g,y){super(),this.m=g,this.l=y,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:TI(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function va(f){S.call(this),this.h=f,this.g={}}p(va,S);var wI=[];function DI(f){Pu(f.g,function(g,y){this.g.hasOwnProperty(y)&&Ap(g)},f),f.g={}}va.prototype.N=function(){va.Z.N.call(this),DI(this)},va.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Np=s.JSON.stringify,cx=s.JSON.parse,dx=class{stringify(f){return s.JSON.stringify(f,void 0)}parse(f){return s.JSON.parse(f,void 0)}};function SI(){}function AI(){}var _a={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function xp(){D.call(this,"d")}p(xp,D);function Pp(){D.call(this,"c")}p(Pp,D);var Mi={},bI=null;function Ou(){return bI=bI||new It}Mi.Ia="serverreachability";function MI(f){D.call(this,Mi.Ia,f)}p(MI,D);function Ea(f){let g=Ou();Rt(g,new MI(g))}Mi.STAT_EVENT="statevent";function RI(f,g){D.call(this,Mi.STAT_EVENT,f),this.stat=g}p(RI,D);function Nt(f){let g=Ou();Rt(g,new RI(g,f))}Mi.Ja="timingevent";function NI(f,g){D.call(this,Mi.Ja,f),this.size=g}p(NI,D);function Ca(f,g){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){f()},g)}function Ia(){this.g=!0}Ia.prototype.ua=function(){this.g=!1};function fx(f,g,y,_,R,x){f.info(function(){if(f.g)if(x){var $="",de=x.split("&");for(let Ne=0;Ne<de.length;Ne++){var at=de[Ne].split("=");if(at.length>1){let ft=at[0];at=at[1];let $n=ft.split("_");$=$n.length>=2&&$n[1]=="type"?$+(ft+"="+at+"&"):$+(ft+"=redacted&")}}}else $=null;else $=x;return"XMLHTTP REQ ("+_+") [attempt "+R+"]: "+g+`
`+y+`
`+$})}function hx(f,g,y,_,R,x,$){f.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+R+"]: "+g+`
`+y+`
`+x+" "+$})}function Vo(f,g,y,_){f.info(function(){return"XMLHTTP TEXT ("+g+"): "+mx(f,y)+(_?" "+_:"")})}function px(f,g){f.info(function(){return"TIMEOUT: "+g})}Ia.prototype.info=function(){};function mx(f,g){if(!f.g)return g;if(!g)return null;try{let x=JSON.parse(g);if(x){for(f=0;f<x.length;f++)if(Array.isArray(x[f])){var y=x[f];if(!(y.length<2)){var _=y[1];if(Array.isArray(_)&&!(_.length<1)){var R=_[0];if(R!="noop"&&R!="stop"&&R!="close")for(let $=1;$<_.length;$++)_[$]=""}}}}return Np(x)}catch{return g}}var Lu={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},xI={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},PI;function kp(){}p(kp,SI),kp.prototype.g=function(){return new XMLHttpRequest},PI=new kp;function Ta(f){return encodeURIComponent(String(f))}function gx(f){var g=1;f=f.split(":");let y=[];for(;g>0&&f.length;)y.push(f.shift()),g--;return f.length&&y.push(f.join(":")),y}function Hr(f,g,y,_){this.j=f,this.i=g,this.l=y,this.S=_||1,this.V=new va(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new kI}function kI(){this.i=null,this.g="",this.h=!1}var FI={},Fp={};function Op(f,g,y){f.M=1,f.A=Uu(Hn(g)),f.u=y,f.R=!0,OI(f,null)}function OI(f,g){f.F=Date.now(),Vu(f),f.B=Hn(f.A);var y=f.B,_=f.S;Array.isArray(_)||(_=[String(_)]),JI(y.i,"t",_),f.C=0,y=f.j.L,f.h=new kI,f.g=hT(f.j,y?g:null,!f.u),f.P>0&&(f.O=new ux(c(f.Y,f,f.g),f.P)),g=f.V,y=f.g,_=f.ba;var R="readystatechange";Array.isArray(R)||(R&&(wI[0]=R.toString()),R=wI);for(let x=0;x<R.length;x++){let $=vI(y,R[x],_||g.handleEvent,!1,g.h||g);if(!$)break;g.g[$.key]=$}g=f.J?mI(f.J):{},f.u?(f.v||(f.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,g)):(f.v="GET",f.g.ea(f.B,f.v,null,g)),Ea(),fx(f.i,f.v,f.B,f.l,f.S,f.u)}Hr.prototype.ba=function(f){f=f.target;let g=this.O;g&&qr(f)==3?g.j():this.Y(f)},Hr.prototype.Y=function(f){try{if(f==this.g)e:{let de=qr(this.g),at=this.g.ya(),Ne=this.g.ca();if(!(de<3)&&(de!=3||this.g&&(this.h.h||this.g.la()||nT(this.g)))){this.K||de!=4||at==7||(at==8||Ne<=0?Ea(3):Ea(2)),Lp(this);var g=this.g.ca();this.X=g;var y=yx(this);if(this.o=g==200,hx(this.i,this.v,this.B,this.l,this.S,de,g),this.o){if(this.U&&!this.L){t:{if(this.g){var _,R=this.g;if((_=R.g?R.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(_)){var x=_;break t}}x=null}if(f=x)Vo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Vp(this,f);else{this.o=!1,this.m=3,Nt(12),Ri(this),wa(this);break e}}if(this.R){f=!0;let ft;for(;!this.K&&this.C<y.length;)if(ft=vx(this,y),ft==Fp){de==4&&(this.m=4,Nt(14),f=!1),Vo(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==FI){this.m=4,Nt(15),Vo(this.i,this.l,y,"[Invalid Chunk]"),f=!1;break}else Vo(this.i,this.l,ft,null),Vp(this,ft);if(LI(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),de!=4||y.length!=0||this.h.h||(this.m=1,Nt(16),f=!1),this.o=this.o&&f,!f)Vo(this.i,this.l,y,"[Invalid Chunked Response]"),Ri(this),wa(this);else if(y.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),zp($),$.P=!0,Nt(11))}}else Vo(this.i,this.l,y,null),Vp(this,y);de==4&&Ri(this),this.o&&!this.K&&(de==4?uT(this.j,this):(this.o=!1,Vu(this)))}else xx(this.g),g==400&&y.indexOf("Unknown SID")>0?(this.m=3,Nt(12)):(this.m=0,Nt(13)),Ri(this),wa(this)}}}catch{}finally{}};function yx(f){if(!LI(f))return f.g.la();let g=nT(f.g);if(g==="")return"";let y="",_=g.length,R=qr(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Ri(f),wa(f),"";f.h.i=new s.TextDecoder}for(let x=0;x<_;x++)f.h.h=!0,y+=f.h.i.decode(g[x],{stream:!(R&&x==_-1)});return g.length=0,f.h.g+=y,f.C=0,f.h.g}function LI(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function vx(f,g){var y=f.C,_=g.indexOf(`
`,y);return _==-1?Fp:(y=Number(g.substring(y,_)),isNaN(y)?FI:(_+=1,_+y>g.length?Fp:(g=g.slice(_,_+y),f.C=_+y,g)))}Hr.prototype.cancel=function(){this.K=!0,Ri(this)};function Vu(f){f.T=Date.now()+f.H,VI(f,f.H)}function VI(f,g){if(f.D!=null)throw Error("WatchDog timer not null");f.D=Ca(c(f.aa,f),g)}function Lp(f){f.D&&(s.clearTimeout(f.D),f.D=null)}Hr.prototype.aa=function(){this.D=null;let f=Date.now();f-this.T>=0?(px(this.i,this.B),this.M!=2&&(Ea(),Nt(17)),Ri(this),this.m=2,wa(this)):VI(this,this.T-f)};function wa(f){f.j.I==0||f.K||uT(f.j,f)}function Ri(f){Lp(f);var g=f.O;g&&typeof g.dispose=="function"&&g.dispose(),f.O=null,DI(f.V),f.g&&(g=f.g,f.g=null,g.abort(),g.dispose())}function Vp(f,g){try{var y=f.j;if(y.I!=0&&(y.g==f||Up(y.h,f))){if(!f.L&&Up(y.h,f)&&y.I==3){try{var _=y.Ba.g.parse(g)}catch{_=null}if(Array.isArray(_)&&_.length==3){var R=_;if(R[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<f.F)zu(y),Gu(y);else break e;qp(y),Nt(18)}}else y.xa=R[1],0<y.xa-y.K&&R[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=Ca(c(y.Va,y),6e3));HI(y.h)<=1&&y.ta&&(y.ta=void 0)}else xi(y,11)}else if((f.L||y.g==f)&&zu(y),!T(g))for(R=y.Ba.g.parse(g),g=0;g<R.length;g++){let Ne=R[g],ft=Ne[0];if(!(ft<=y.K))if(y.K=ft,Ne=Ne[1],y.I==2)if(Ne[0]=="c"){y.M=Ne[1],y.ba=Ne[2];let $n=Ne[3];$n!=null&&(y.ka=$n,y.j.info("VER="+y.ka));let Pi=Ne[4];Pi!=null&&(y.za=Pi,y.j.info("SVER="+y.za));let zr=Ne[5];zr!=null&&typeof zr=="number"&&zr>0&&(_=1.5*zr,y.O=_,y.j.info("backChannelRequestTimeoutMs_="+_)),_=y;let jr=f.g;if(jr){let Wu=jr.g?jr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wu){var x=_.h;x.g||Wu.indexOf("spdy")==-1&&Wu.indexOf("quic")==-1&&Wu.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(Bp(x,x.h),x.h=null))}if(_.G){let jp=jr.g?jr.g.getResponseHeader("X-HTTP-Session-Id"):null;jp&&(_.wa=jp,Le(_.J,_.G,jp))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-f.F,y.j.info("Handshake RTT: "+y.T+"ms")),_=y;var $=f;if(_.na=fT(_,_.L?_.ba:null,_.W),$.L){$I(_.h,$);var de=$,at=_.O;at&&(de.H=at),de.D&&(Lp(de),Vu(de)),_.g=$}else aT(_);y.i.length>0&&qu(y)}else Ne[0]!="stop"&&Ne[0]!="close"||xi(y,7);else y.I==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?xi(y,7):Gp(y):Ne[0]!="noop"&&y.l&&y.l.qa(Ne),y.A=0)}}Ea(4)}catch{}}var _x=class{constructor(f,g){this.g=f,this.map=g}};function UI(f){this.l=f||10,s.PerformanceNavigationTiming?(f=s.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function BI(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function HI(f){return f.h?1:f.g?f.g.size:0}function Up(f,g){return f.h?f.h==g:f.g?f.g.has(g):!1}function Bp(f,g){f.g?f.g.add(g):f.h=g}function $I(f,g){f.h&&f.h==g?f.h=null:f.g&&f.g.has(g)&&f.g.delete(g)}UI.prototype.cancel=function(){if(this.i=GI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let f of this.g.values())f.cancel();this.g.clear()}};function GI(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let g=f.i;for(let y of f.g.values())g=g.concat(y.G);return g}return v(f.i)}var qI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ex(f,g){if(f){f=f.split("&");for(let y=0;y<f.length;y++){let _=f[y].indexOf("="),R,x=null;_>=0?(R=f[y].substring(0,_),x=f[y].substring(_+1)):R=f[y],g(R,x?decodeURIComponent(x.replace(/\+/g," ")):"")}}}function $r(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;f instanceof $r?(this.l=f.l,Da(this,f.j),this.o=f.o,this.g=f.g,Sa(this,f.u),this.h=f.h,Hp(this,QI(f.i)),this.m=f.m):f&&(g=String(f).match(qI))?(this.l=!1,Da(this,g[1]||"",!0),this.o=Aa(g[2]||""),this.g=Aa(g[3]||"",!0),Sa(this,g[4]),this.h=Aa(g[5]||"",!0),Hp(this,g[6]||"",!0),this.m=Aa(g[7]||"")):(this.l=!1,this.i=new Ma(null,this.l))}$r.prototype.toString=function(){let f=[];var g=this.j;g&&f.push(ba(g,zI,!0),":");var y=this.g;return(y||g=="file")&&(f.push("//"),(g=this.o)&&f.push(ba(g,zI,!0),"@"),f.push(Ta(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&f.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&f.push("/"),f.push(ba(y,y.charAt(0)=="/"?Tx:Ix,!0))),(y=this.i.toString())&&f.push("?",y),(y=this.m)&&f.push("#",ba(y,Dx)),f.join("")},$r.prototype.resolve=function(f){let g=Hn(this),y=!!f.j;y?Da(g,f.j):y=!!f.o,y?g.o=f.o:y=!!f.g,y?g.g=f.g:y=f.u!=null;var _=f.h;if(y)Sa(g,f.u);else if(y=!!f.h){if(_.charAt(0)!="/")if(this.g&&!this.h)_="/"+_;else{var R=g.h.lastIndexOf("/");R!=-1&&(_=g.h.slice(0,R+1)+_)}if(R=_,R==".."||R==".")_="";else if(R.indexOf("./")!=-1||R.indexOf("/.")!=-1){_=R.lastIndexOf("/",0)==0,R=R.split("/");let x=[];for(let $=0;$<R.length;){let de=R[$++];de=="."?_&&$==R.length&&x.push(""):de==".."?((x.length>1||x.length==1&&x[0]!="")&&x.pop(),_&&$==R.length&&x.push("")):(x.push(de),_=!0)}_=x.join("/")}else _=R}return y?g.h=_:y=f.i.toString()!=="",y?Hp(g,QI(f.i)):y=!!f.m,y&&(g.m=f.m),g};function Hn(f){return new $r(f)}function Da(f,g,y){f.j=y?Aa(g,!0):g,f.j&&(f.j=f.j.replace(/:$/,""))}function Sa(f,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);f.u=g}else f.u=null}function Hp(f,g,y){g instanceof Ma?(f.i=g,Sx(f.i,f.l)):(y||(g=ba(g,wx)),f.i=new Ma(g,f.l))}function Le(f,g,y){f.i.set(g,y)}function Uu(f){return Le(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function Aa(f,g){return f?g?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function ba(f,g,y){return typeof f=="string"?(f=encodeURI(f).replace(g,Cx),y&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Cx(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var zI=/[#\/\?@]/g,Ix=/[#\?:]/g,Tx=/[#\?]/g,wx=/[#\?@]/g,Dx=/#/g;function Ma(f,g){this.h=this.g=null,this.i=f||null,this.j=!!g}function Ni(f){f.g||(f.g=new Map,f.h=0,f.i&&Ex(f.i,function(g,y){f.add(decodeURIComponent(g.replace(/\+/g," ")),y)}))}t=Ma.prototype,t.add=function(f,g){Ni(this),this.i=null,f=Uo(this,f);let y=this.g.get(f);return y||this.g.set(f,y=[]),y.push(g),this.h+=1,this};function jI(f,g){Ni(f),g=Uo(f,g),f.g.has(g)&&(f.i=null,f.h-=f.g.get(g).length,f.g.delete(g))}function WI(f,g){return Ni(f),g=Uo(f,g),f.g.has(g)}t.forEach=function(f,g){Ni(this),this.g.forEach(function(y,_){y.forEach(function(R){f.call(g,R,_,this)},this)},this)};function KI(f,g){Ni(f);let y=[];if(typeof g=="string")WI(f,g)&&(y=y.concat(f.g.get(Uo(f,g))));else for(f=Array.from(f.g.values()),g=0;g<f.length;g++)y=y.concat(f[g]);return y}t.set=function(f,g){return Ni(this),this.i=null,f=Uo(this,f),WI(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[g]),this.h+=1,this},t.get=function(f,g){return f?(f=KI(this,f),f.length>0?String(f[0]):g):g};function JI(f,g,y){jI(f,g),y.length>0&&(f.i=null,f.g.set(Uo(f,g),v(y)),f.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let f=[],g=Array.from(this.g.keys());for(let _=0;_<g.length;_++){var y=g[_];let R=Ta(y);y=KI(this,y);for(let x=0;x<y.length;x++){let $=R;y[x]!==""&&($+="="+Ta(y[x])),f.push($)}}return this.i=f.join("&")};function QI(f){let g=new Ma;return g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),g}function Uo(f,g){return g=String(g),f.j&&(g=g.toLowerCase()),g}function Sx(f,g){g&&!f.j&&(Ni(f),f.i=null,f.g.forEach(function(y,_){let R=_.toLowerCase();_!=R&&(jI(this,_),JI(this,R,y))},f)),f.j=g}function Ax(f,g){let y=new Ia;if(s.Image){let _=new Image;_.onload=h(Gr,y,"TestLoadImage: loaded",!0,g,_),_.onerror=h(Gr,y,"TestLoadImage: error",!1,g,_),_.onabort=h(Gr,y,"TestLoadImage: abort",!1,g,_),_.ontimeout=h(Gr,y,"TestLoadImage: timeout",!1,g,_),s.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=f}else g(!1)}function bx(f,g){let y=new Ia,_=new AbortController,R=setTimeout(()=>{_.abort(),Gr(y,"TestPingServer: timeout",!1,g)},1e4);fetch(f,{signal:_.signal}).then(x=>{clearTimeout(R),x.ok?Gr(y,"TestPingServer: ok",!0,g):Gr(y,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(R),Gr(y,"TestPingServer: error",!1,g)})}function Gr(f,g,y,_,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),_(y)}catch{}}function Mx(){this.g=new dx}function Bu(f){this.i=f.Sb||null,this.h=f.ab||!1}p(Bu,SI),Bu.prototype.g=function(){return new Hu(this.i,this.h)};function Hu(f,g){It.call(this),this.H=f,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Hu,It),t=Hu.prototype,t.open=function(f,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=g,this.readyState=1,Na(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(g.body=f),(this.H||s).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ra(this)),this.readyState=0},t.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Na(this)),this.g&&(this.readyState=3,Na(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;YI(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function YI(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}t.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var g=f.value?f.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!f.done}))&&(this.response=this.responseText+=g)}f.done?Ra(this):Na(this),this.readyState==3&&YI(this)}},t.Oa=function(f){this.g&&(this.response=this.responseText=f,Ra(this))},t.Na=function(f){this.g&&(this.response=f,Ra(this))},t.ga=function(){this.g&&Ra(this)};function Ra(f){f.readyState=4,f.l=null,f.j=null,f.B=null,Na(f)}t.setRequestHeader=function(f,g){this.A.append(f,g)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let f=[],g=this.h.entries();for(var y=g.next();!y.done;)y=y.value,f.push(y[0]+": "+y[1]),y=g.next();return f.join(`\r
`)};function Na(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Hu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ZI(f){let g="";return Pu(f,function(y,_){g+=_,g+=":",g+=y,g+=`\r
`}),g}function $p(f,g,y){e:{for(_ in y){var _=!1;break e}_=!0}_||(y=ZI(y),typeof f=="string"?y!=null&&Ta(y):Le(f,g,y))}function We(f){It.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(We,It);var Rx=/^https?$/i,Nx=["POST","PUT"];t=We.prototype,t.Fa=function(f){this.H=f},t.ea=function(f,g,y,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);g=g?g.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():PI.g(),this.g.onreadystatechange=m(c(this.Ca,this));try{this.B=!0,this.g.open(g,String(f),!0),this.B=!1}catch(x){XI(this,x);return}if(f=y||"",y=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var R in _)y.set(R,_[R]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let x of _.keys())y.set(x,_.get(x));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(y.keys()).find(x=>x.toLowerCase()=="content-type"),R=s.FormData&&f instanceof s.FormData,!(Array.prototype.indexOf.call(Nx,g,void 0)>=0)||_||R||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,$]of y)this.g.setRequestHeader(x,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(x){XI(this,x)}};function XI(f,g){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=g,f.o=5,eT(f),$u(f)}function eT(f){f.A||(f.A=!0,Rt(f,"complete"),Rt(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,Rt(this,"complete"),Rt(this,"abort"),$u(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$u(this,!0)),We.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?tT(this):this.Xa())},t.Xa=function(){tT(this)};function tT(f){if(f.h&&typeof o<"u"){if(f.v&&qr(f)==4)setTimeout(f.Ca.bind(f),0);else if(Rt(f,"readystatechange"),qr(f)==4){f.h=!1;try{let x=f.ca();e:switch(x){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var y;if(!(y=g)){var _;if(_=x===0){let $=String(f.D).match(qI)[1]||null;!$&&s.self&&s.self.location&&($=s.self.location.protocol.slice(0,-1)),_=!Rx.test($?$.toLowerCase():"")}y=_}if(y)Rt(f,"complete"),Rt(f,"success");else{f.o=6;try{var R=qr(f)>2?f.g.statusText:""}catch{R=""}f.l=R+" ["+f.ca()+"]",eT(f)}}finally{$u(f)}}}}function $u(f,g){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);let y=f.g;f.g=null,g||Rt(f,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function qr(f){return f.g?f.g.readyState:0}t.ca=function(){try{return qr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(f){if(this.g){var g=this.g.responseText;return f&&g.indexOf(f)==0&&(g=g.substring(f.length)),cx(g)}};function nT(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function xx(f){let g={};f=(f.g&&qr(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<f.length;_++){if(T(f[_]))continue;var y=gx(f[_]);let R=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();let x=g[R]||[];g[R]=x,x.push(y)}ox(g,function(_){return _.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function xa(f,g,y){return y&&y.internalChannelParams&&y.internalChannelParams[f]||g}function rT(f){this.za=0,this.i=[],this.j=new Ia,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=xa("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=xa("baseRetryDelayMs",5e3,f),this.Za=xa("retryDelaySeedMs",1e4,f),this.Ta=xa("forwardChannelMaxRetries",2,f),this.va=xa("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new UI(f&&f.concurrentRequestLimit),this.Ba=new Mx,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=rT.prototype,t.ka=8,t.I=1,t.connect=function(f,g,y,_){Nt(0),this.W=f,this.H=g||{},y&&_!==void 0&&(this.H.OSID=y,this.H.OAID=_),this.F=this.X,this.J=fT(this,null,this.W),qu(this)};function Gp(f){if(iT(f),f.I==3){var g=f.V++,y=Hn(f.J);if(Le(y,"SID",f.M),Le(y,"RID",g),Le(y,"TYPE","terminate"),Pa(f,y),g=new Hr(f,f.j,g),g.M=2,g.A=Uu(Hn(y)),y=!1,s.navigator&&s.navigator.sendBeacon)try{y=s.navigator.sendBeacon(g.A.toString(),"")}catch{}!y&&s.Image&&(new Image().src=g.A,y=!0),y||(g.g=hT(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Vu(g)}dT(f)}function Gu(f){f.g&&(zp(f),f.g.cancel(),f.g=null)}function iT(f){Gu(f),f.v&&(s.clearTimeout(f.v),f.v=null),zu(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&s.clearTimeout(f.m),f.m=null)}function qu(f){if(!BI(f.h)&&!f.m){f.m=!0;var g=f.Ea;Z||C(),Y||(Z(),Y=!0),w.add(g,f),f.D=0}}function Px(f,g){return HI(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=g.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=Ca(c(f.Ea,f,g),cT(f,f.D)),f.D++,!0)}t.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;let R=new Hr(this,this.j,f),x=this.o;if(this.U&&(x?(x=mI(x),yI(x,this.U)):x=this.U),this.u!==null||this.R||(R.J=x,x=null),this.S)e:{for(var g=0,y=0;y<this.i.length;y++){t:{var _=this.i[y];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(g+=_,g>4096){g=y;break e}if(g===4096||y===this.i.length-1){g=y+1;break e}}g=1e3}else g=1e3;g=sT(this,R,g),y=Hn(this.J),Le(y,"RID",f),Le(y,"CVER",22),this.G&&Le(y,"X-HTTP-Session-Id",this.G),Pa(this,y),x&&(this.R?g="headers="+Ta(ZI(x))+"&"+g:this.u&&$p(y,this.u,x)),Bp(this.h,R),this.Ra&&Le(y,"TYPE","init"),this.S?(Le(y,"$req",g),Le(y,"SID","null"),R.U=!0,Op(R,y,null)):Op(R,y,g),this.I=2}}else this.I==3&&(f?oT(this,f):this.i.length==0||BI(this.h)||oT(this))};function oT(f,g){var y;g?y=g.l:y=f.V++;let _=Hn(f.J);Le(_,"SID",f.M),Le(_,"RID",y),Le(_,"AID",f.K),Pa(f,_),f.u&&f.o&&$p(_,f.u,f.o),y=new Hr(f,f.j,y,f.D+1),f.u===null&&(y.J=f.o),g&&(f.i=g.G.concat(f.i)),g=sT(f,y,1e3),y.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),Bp(f.h,y),Op(y,_,g)}function Pa(f,g){f.H&&Pu(f.H,function(y,_){Le(g,_,y)}),f.l&&Pu({},function(y,_){Le(g,_,y)})}function sT(f,g,y){y=Math.min(f.i.length,y);let _=f.l?c(f.l.Ka,f.l,f):null;e:{var R=f.i;let de=-1;for(;;){let at=["count="+y];de==-1?y>0?(de=R[0].g,at.push("ofs="+de)):de=0:at.push("ofs="+de);let Ne=!0;for(let ft=0;ft<y;ft++){var x=R[ft].g;let $n=R[ft].map;if(x-=de,x<0)de=Math.max(0,R[ft].g-100),Ne=!1;else try{x="req"+x+"_"||"";try{var $=$n instanceof Map?$n:Object.entries($n);for(let[Pi,zr]of $){let jr=zr;a(zr)&&(jr=Np(zr)),at.push(x+Pi+"="+encodeURIComponent(jr))}}catch(Pi){throw at.push(x+"type="+encodeURIComponent("_badmap")),Pi}}catch{_&&_($n)}}if(Ne){$=at.join("&");break e}}$=void 0}return f=f.i.splice(0,y),g.G=f,$}function aT(f){if(!f.g&&!f.v){f.Y=1;var g=f.Da;Z||C(),Y||(Z(),Y=!0),w.add(g,f),f.A=0}}function qp(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=Ca(c(f.Da,f),cT(f,f.A)),f.A++,!0)}t.Da=function(){if(this.v=null,lT(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=Ca(c(this.Wa,this),f)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Nt(10),Gu(this),lT(this))};function zp(f){f.B!=null&&(s.clearTimeout(f.B),f.B=null)}function lT(f){f.g=new Hr(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var g=Hn(f.na);Le(g,"RID","rpc"),Le(g,"SID",f.M),Le(g,"AID",f.K),Le(g,"CI",f.F?"0":"1"),!f.F&&f.ia&&Le(g,"TO",f.ia),Le(g,"TYPE","xmlhttp"),Pa(f,g),f.u&&f.o&&$p(g,f.u,f.o),f.O&&(f.g.H=f.O);var y=f.g;f=f.ba,y.M=1,y.A=Uu(Hn(g)),y.u=null,y.R=!0,OI(y,f)}t.Va=function(){this.C!=null&&(this.C=null,Gu(this),qp(this),Nt(19))};function zu(f){f.C!=null&&(s.clearTimeout(f.C),f.C=null)}function uT(f,g){var y=null;if(f.g==g){zu(f),zp(f),f.g=null;var _=2}else if(Up(f.h,g))y=g.G,$I(f.h,g),_=1;else return;if(f.I!=0){if(g.o)if(_==1){y=g.u?g.u.length:0,g=Date.now()-g.F;var R=f.D;_=Ou(),Rt(_,new NI(_,y)),qu(f)}else aT(f);else if(R=g.m,R==3||R==0&&g.X>0||!(_==1&&Px(f,g)||_==2&&qp(f)))switch(y&&y.length>0&&(g=f.h,g.i=g.i.concat(y)),R){case 1:xi(f,5);break;case 4:xi(f,10);break;case 3:xi(f,6);break;default:xi(f,2)}}}function cT(f,g){let y=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(y*=2),y*g}function xi(f,g){if(f.j.info("Error code "+g),g==2){var y=c(f.bb,f),_=f.Ua;let R=!_;_=new $r(_||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Da(_,"https"),Uu(_),R?Ax(_.toString(),y):bx(_.toString(),y)}else Nt(2);f.I=0,f.l&&f.l.pa(g),dT(f),iT(f)}t.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Nt(2)):(this.j.info("Failed to ping google.com"),Nt(1))};function dT(f){if(f.I=0,f.ja=[],f.l){let g=GI(f.h);(g.length!=0||f.i.length!=0)&&(I(f.ja,g),I(f.ja,f.i),f.h.i.length=0,v(f.i),f.i.length=0),f.l.oa()}}function fT(f,g,y){var _=y instanceof $r?Hn(y):new $r(y);if(_.g!="")g&&(_.g=g+"."+_.g),Sa(_,_.u);else{var R=s.location;_=R.protocol,g=g?g+"."+R.hostname:R.hostname,R=+R.port;let x=new $r(null);_&&Da(x,_),g&&(x.g=g),R&&Sa(x,R),y&&(x.h=y),_=x}return y=f.G,g=f.wa,y&&g&&Le(_,y,g),Le(_,"VER",f.ka),Pa(f,_),_}function hT(f,g,y){if(g&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=f.Aa&&!f.ma?new We(new Bu({ab:y})):new We(f.ma),g.Fa(f.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function pT(){}t=pT.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ju(){}ju.prototype.g=function(f,g){return new Kt(f,g)};function Kt(f,g){It.call(this),this.g=new rT(g),this.l=f,this.h=g&&g.messageUrlParams||null,f=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(f?f["X-WebChannel-Content-Type"]=g.messageContentType:f={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(f?f["X-WebChannel-Client-Profile"]=g.sa:f={"X-WebChannel-Client-Profile":g.sa}),this.g.U=f,(f=g&&g.Qb)&&!T(f)&&(this.g.u=f),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!T(g)&&(this.g.G=g,f=this.h,f!==null&&g in f&&(f=this.h,g in f&&delete f[g])),this.j=new Bo(this)}p(Kt,It),Kt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Kt.prototype.close=function(){Gp(this.g)},Kt.prototype.o=function(f){var g=this.g;if(typeof f=="string"){var y={};y.__data__=f,f=y}else this.v&&(y={},y.__data__=Np(f),f=y);g.i.push(new _x(g.Ya++,f)),g.I==3&&qu(g)},Kt.prototype.N=function(){this.g.l=null,delete this.j,Gp(this.g),delete this.g,Kt.Z.N.call(this)};function mT(f){xp.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var g=f.__sm__;if(g){e:{for(let y in g){f=y;break e}f=void 0}(this.i=f)&&(f=this.i,g=g!==null&&f in g?g[f]:void 0),this.data=g}else this.data=f}p(mT,xp);function gT(){Pp.call(this),this.status=1}p(gT,Pp);function Bo(f){this.g=f}p(Bo,pT),Bo.prototype.ra=function(){Rt(this.g,"a")},Bo.prototype.qa=function(f){Rt(this.g,new mT(f))},Bo.prototype.pa=function(f){Rt(this.g,new gT)},Bo.prototype.oa=function(){Rt(this.g,"b")},ju.prototype.createWebChannel=ju.prototype.g,Kt.prototype.send=Kt.prototype.o,Kt.prototype.open=Kt.prototype.m,Kt.prototype.close=Kt.prototype.close,iE=kr.createWebChannelTransport=function(){return new ju},rE=kr.getStatEventTarget=function(){return Ou()},nE=kr.Event=Mi,Ch=kr.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Lu.NO_ERROR=0,Lu.TIMEOUT=8,Lu.HTTP_ERROR=6,hu=kr.ErrorCode=Lu,xI.COMPLETE="complete",tE=kr.EventType=xI,AI.EventType=_a,_a.OPEN="a",_a.CLOSE="b",_a.ERROR="c",_a.MESSAGE="d",It.prototype.listen=It.prototype.J,Hs=kr.WebChannel=AI,qq=kr.FetchXmlHttpFactory=Bu,We.prototype.listenOnce=We.prototype.K,We.prototype.getLastError=We.prototype.Ha,We.prototype.getLastErrorCode=We.prototype.ya,We.prototype.getStatus=We.prototype.ca,We.prototype.getResponseJson=We.prototype.La,We.prototype.getResponseText=We.prototype.la,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Fa,eE=kr.XhrIo=We}).apply(typeof Eh<"u"?Eh:typeof self<"u"?self:typeof window<"u"?window:{});var UM="@firebase/firestore",BM="4.9.2";var mt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};mt.UNAUTHENTICATED=new mt(null),mt.GOOGLE_CREDENTIALS=new mt("google-credentials-uid"),mt.FIRST_PARTY=new mt("first-party-uid"),mt.MOCK_USER=new mt("mock-user");var fa="12.3.0";var Ro=new _s("@firebase/firestore");function $s(){return Ro.logLevel}function W(t,...e){if(Ro.logLevel<=Ee.DEBUG){let n=e.map(GC);Ro.debug(`Firestore (${fa}): ${t}`,...n)}}function Fr(t,...e){if(Ro.logLevel<=Ee.ERROR){let n=e.map(GC);Ro.error(`Firestore (${fa}): ${t}`,...n)}}function Qs(t,...e){if(Ro.logLevel<=Ee.WARN){let n=e.map(GC);Ro.warn(`Firestore (${fa}): ${t}`,...n)}}function GC(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function ee(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,SR(t,r,n)}function SR(t,e,n){let r=`FIRESTORE (${fa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Fr(r),new Error(r)}function Re(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||SR(e,i,r)}function ae(t,e){return t}var V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},K=class extends Sr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Un=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var bh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},cE=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(mt.UNAUTHENTICATED))}shutdown(){}},dE=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},fE=class{constructor(e){this.t=e,this.currentUser=mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Re(this.o===void 0,42304);let r=this.i,i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve(),o=new Un;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Un,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let l=o;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Un)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Re(typeof r.accessToken=="string",31837,{l:r}),new bh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Re(e===null||typeof e=="string",2055,{h:e}),new mt(e)}},hE=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},pE=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new hE(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Mh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},mE=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mA(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Re(this.o===void 0,3512);let r=o=>{o.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,W("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Mh(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Re(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Mh(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function zq(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var _u=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=zq(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function ye(t,e){return t<e?-1:t>e?1:0}function gE(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let i=t.charAt(r),o=e.charAt(r);if(i!==o)return oE(i)===oE(o)?ye(i,o):oE(i)?1:-1}return ye(t.length,e.length)}var jq=55296,Wq=57343;function oE(t){let e=t.charCodeAt(0);return e>=jq&&e<=Wq}function Ys(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var HM="__name__",Rh=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ee(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ye(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):gE(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Pr.fromString(e.substring(4,e.length-2))}},je=class t extends Rh{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new K(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},Kq=/^[_a-zA-Z][_a-zA-Z0-9]*$/,nn=class t extends Rh{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return Kq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===HM}static keyField(){return new t([HM])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new K(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new K(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new K(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new K(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var X=class t{constructor(e){this.path=e}static fromPath(e){return new t(je.fromString(e))}static fromName(e){return new t(je.fromString(e).popFirst(5))}static empty(){return new t(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new je(e.slice()))}};function AR(t,e,n){if(!n)throw new K(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Jq(t,e,n,r){if(e===!0&&r===!0)throw new K(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function $M(t){if(!X.isDocumentKey(t))throw new K(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function GM(t){if(X.isDocumentKey(t))throw new K(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function bR(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function qC(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee(12329,{type:typeof t})}function Zs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=qC(t);throw new K(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function ot(t,e){let n={typeString:t};return e&&(n.value=e),n}function Mu(t,e){if(!bR(t))throw new K(V.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new K(V.INVALID_ARGUMENT,n);return!0}var qM=-62135596800,zM=1e6,st=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*zM);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<qM)throw new K(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/zM}_compareTo(e){return this.seconds===e.seconds?ye(this.nanoseconds,e.nanoseconds):ye(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Mu(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-qM;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};st._jsonSchemaVersion="firestore/timestamp/1.0",st._jsonSchema={type:ot("string",st._jsonSchemaVersion),seconds:ot("number"),nanoseconds:ot("number")};var ue=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new st(0,0))}static max(){return new t(new st(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Eu=-1,yE=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};yE.UNKNOWN_ID=-1;function Qq(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ue.fromTimestamp(r===1e9?new st(n+1,0):new st(n,r));return new No(i,X.empty(),e)}function Yq(t){return new No(t.readTime,t.key,Eu)}var No=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(ue.min(),X.empty(),Eu)}static max(){return new t(ue.max(),X.empty(),Eu)}};function Zq(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:ye(t.largestBatchId,e.largestBatchId))}var Xq="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vE=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function ha(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==Xq)throw t;W("LocalStore","Unexpectedly lost primary lease")}var U=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},l=>r(l))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let l=0;l<o;l++){let c=l;n(e[c]).next(h=>{s[c]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function e6(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function pa(t){return t.name==="IndexedDbTransactionError"}var zC=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ue&&this.ue(n),n}}t.ce=-1;return t})(),jC=-1;function up(t){return t==null}function Cu(t){return t===0&&1/t==-1/0}function t6(t){return typeof t=="number"&&Number.isInteger(t)&&!Cu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var MR="";function n6(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=jM(e)),e=r6(t.get(n),e);return jM(e)}function r6(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case MR:n+="";break;default:n+=o}}return n}function jM(t){return t+MR+""}var i6="remoteDocuments",RR="owner";var NR="mutationQueues";var xR="mutations";var PR="documentMutations",o6="remoteDocumentsV14";var kR="remoteDocumentGlobal";var FR="targets";var OR="targetDocuments";var LR="targetGlobal",VR="collectionParents";var UR="clientMetadata";var BR="bundles";var HR="namedQueries";var s6="indexConfiguration";var a6="indexState";var l6="indexEntries";var $R="documentOverlays";var u6="globals";var c6=[NR,xR,PR,i6,FR,RR,LR,OR,UR,kR,VR,BR,HR],yle=[...c6,$R],d6=[NR,xR,PR,o6,FR,RR,LR,OR,UR,kR,VR,BR,HR,$R],f6=d6,h6=[...f6,s6,a6,l6];var vle=[...h6,u6];function WM(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Oo(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function GR(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ke=class t{constructor(e,n){this.comparator=e,this.root=n||lr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,lr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,lr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new js(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new js(this.root,e,this.comparator,!1)}getReverseIterator(){return new js(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new js(this.root,e,this.comparator,!0)}},js=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},lr=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ee(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw ee(27949);return e+(this.isRed()?0:1)}};lr.EMPTY=null,lr.RED=!0,lr.BLACK=!1;lr.EMPTY=new class{constructor(){this.size=0}get key(){throw ee(57766)}get value(){throw ee(16141)}get color(){throw ee(16727)}get left(){throw ee(29726)}get right(){throw ee(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new lr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var gt=class t{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nh(this.data.getIterator())}getIteratorFrom(e){return new Nh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Nh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var ar=class t{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new t([])}unionWith(e){let n=new gt(nn.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ys(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var xh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Mt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new xh("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ye(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Mt.EMPTY_BYTE_STRING=new Mt("");var p6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(t){if(Re(!!t,39018),typeof t=="string"){let e=0,n=p6.exec(t);if(Re(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Lr(t){return typeof t=="string"?Mt.fromBase64String(t):Mt.fromUint8Array(t)}var qR="server_timestamp",zR="__type__",jR="__previous_value__",WR="__local_write_time__";function WC(t){return(t?.mapValue?.fields||{})[zR]?.stringValue===qR}function cp(t){let e=t.mapValue.fields[jR];return WC(e)?cp(e):e}function Iu(t){let e=Or(t.mapValue.fields[WR].timestampValue);return new st(e.seconds,e.nanos)}var _E=class{constructor(e,n,r,i,o,s,a,l,c,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c,this.isUsingEmulator=h}},Ph="(default)",kh=class t{constructor(e,n){this.projectId=e,this.database=n||Ph}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Ph}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var KC="__type__",KR="__max__",Ih={mapValue:{fields:{__type__:{stringValue:KR}}}},JC="__vector__",Xs="value";function Di(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?WC(t)?4:QR(t)?9007199254740991:JR(t)?10:11:ee(28295,{value:t})}function dr(t,e){if(t===e)return!0;let n=Di(t);if(n!==Di(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Iu(t).isEqual(Iu(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Or(i.timestampValue),a=Or(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return Lr(i.bytesValue).isEqual(Lr(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return Ge(i.geoPointValue.latitude)===Ge(o.geoPointValue.latitude)&&Ge(i.geoPointValue.longitude)===Ge(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return Ge(i.integerValue)===Ge(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=Ge(i.doubleValue),a=Ge(o.doubleValue);return s===a?Cu(s)===Cu(a):isNaN(s)&&isNaN(a)}return!1})(t,e);case 9:return Ys(t.arrayValue.values||[],e.arrayValue.values||[],dr);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(WM(s)!==WM(a))return!1;for(let l in s)if(s.hasOwnProperty(l)&&(a[l]===void 0||!dr(s[l],a[l])))return!1;return!0})(t,e);default:return ee(52216,{left:t})}}function Tu(t,e){return(t.values||[]).find(n=>dr(n,e))!==void 0}function ea(t,e){if(t===e)return 0;let n=Di(t),r=Di(e);if(n!==r)return ye(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ye(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let a=Ge(o.integerValue||o.doubleValue),l=Ge(s.integerValue||s.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(t,e);case 3:return KM(t.timestampValue,e.timestampValue);case 4:return KM(Iu(t),Iu(e));case 5:return gE(t.stringValue,e.stringValue);case 6:return(function(o,s){let a=Lr(o),l=Lr(s);return a.compareTo(l)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let a=o.split("/"),l=s.split("/");for(let c=0;c<a.length&&c<l.length;c++){let h=ye(a[c],l[c]);if(h!==0)return h}return ye(a.length,l.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let a=ye(Ge(o.latitude),Ge(s.latitude));return a!==0?a:ye(Ge(o.longitude),Ge(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return JM(t.arrayValue,e.arrayValue);case 10:return(function(o,s){let a=o.fields||{},l=s.fields||{},c=a[Xs]?.arrayValue,h=l[Xs]?.arrayValue,p=ye(c?.values?.length||0,h?.values?.length||0);return p!==0?p:JM(c,h)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Ih.mapValue&&s===Ih.mapValue)return 0;if(o===Ih.mapValue)return 1;if(s===Ih.mapValue)return-1;let a=o.fields||{},l=Object.keys(a),c=s.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){let m=gE(l[p],h[p]);if(m!==0)return m;let v=ea(a[l[p]],c[h[p]]);if(v!==0)return v}return ye(l.length,h.length)})(t.mapValue,e.mapValue);default:throw ee(23264,{he:n})}}function KM(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ye(t,e);let n=Or(t),r=Or(e),i=ye(n.seconds,r.seconds);return i!==0?i:ye(n.nanos,r.nanos)}function JM(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=ea(n[i],r[i]);if(o)return o}return ye(n.length,r.length)}function ta(t){return EE(t)}function EE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=Or(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return Lr(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return X.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=EE(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${EE(n.fields[s])}`;return i+"}"})(t.mapValue):ee(61005,{value:t})}function Dh(t){switch(Di(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=cp(t);return e?16+Dh(e):16;case 5:return 2*t.stringValue.length;case 6:return Lr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Dh(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Oo(r.fields,(o,s)=>{i+=o.length+Dh(s)}),i})(t.mapValue);default:throw ee(13486,{value:t})}}function CE(t){return!!t&&"integerValue"in t}function QC(t){return!!t&&"arrayValue"in t}function QM(t){return!!t&&"nullValue"in t}function YM(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Sh(t){return!!t&&"mapValue"in t}function JR(t){return(t?.mapValue?.fields||{})[KC]?.stringValue===JC}function mu(t){if(t.geoPointValue)return{geoPointValue:H({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:H({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Oo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=mu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=mu(t.arrayValue.values[n]);return e}return H({},t)}function QR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===KR}var Ele={mapValue:{fields:{[KC]:{stringValue:JC},[Xs]:{arrayValue:{}}}}};var Vn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Sh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=mu(n)}setAll(e){let n=nn.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){let l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=mu(s):i.push(a.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Sh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return dr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Sh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Oo(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(mu(this.value))}};function YR(t){let e=[];return Oo(t.fields,(n,r)=>{let i=new nn([n]);if(Sh(r)){let o=YR(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new ar(e)}var Bn=class t{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new t(e,0,ue.min(),ue.min(),ue.min(),Vn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,ue.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,ue.min(),ue.min(),Vn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,ue.min(),ue.min(),Vn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var na=class{constructor(e,n){this.position=e,this.inclusive=n}};function ZM(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=X.comparator(X.fromName(s.referenceValue),n.key):r=ea(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function XM(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!dr(t.position[n],e.position[n]))return!1;return!0}var ra=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function m6(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Fh=class{},dt=class t extends Fh{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new TE(e,n,r):n==="array-contains"?new SE(e,r):n==="in"?new AE(e,r):n==="not-in"?new bE(e,r):n==="array-contains-any"?new ME(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new wE(e,r):new DE(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ea(n,this.value)):n!==null&&Di(this.value)===Di(n)&&this.matchesComparison(ea(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},fr=class t extends Fh{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new t(e,n)}matches(e){return ZR(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function ZR(t){return t.op==="and"}function XR(t){return g6(t)&&ZR(t)}function g6(t){for(let e of t.filters)if(e instanceof fr)return!1;return!0}function IE(t){if(t instanceof dt)return t.field.canonicalString()+t.op.toString()+ta(t.value);if(XR(t))return t.filters.map(e=>IE(e)).join(",");{let e=t.filters.map(n=>IE(n)).join(",");return`${t.op}(${e})`}}function eN(t,e){return t instanceof dt?(function(r,i){return i instanceof dt&&r.op===i.op&&r.field.isEqual(i.field)&&dr(r.value,i.value)})(t,e):t instanceof fr?(function(r,i){return i instanceof fr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&eN(s,i.filters[a]),!0):!1})(t,e):void ee(19439)}function tN(t){return t instanceof dt?(function(n){return`${n.field.canonicalString()} ${n.op} ${ta(n.value)}`})(t):t instanceof fr?(function(n){return n.op.toString()+" {"+n.getFilters().map(tN).join(" ,")+"}"})(t):"Filter"}var TE=class extends dt{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){let n=X.comparator(e.key,this.key);return this.matchesComparison(n)}},wE=class extends dt{constructor(e,n){super(e,"in",n),this.keys=nN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},DE=class extends dt{constructor(e,n){super(e,"not-in",n),this.keys=nN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function nN(t,e){return(e.arrayValue?.values||[]).map(n=>X.fromName(n.referenceValue))}var SE=class extends dt{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return QC(n)&&Tu(n.arrayValue,this.value)}},AE=class extends dt{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Tu(this.value.arrayValue,n)}},bE=class extends dt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Tu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Tu(this.value.arrayValue,n)}},ME=class extends dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!QC(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Tu(this.value.arrayValue,r))}};var RE=class{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.Te=null}};function eR(t,e=null,n=[],r=[],i=null,o=null,s=null){return new RE(t,e,n,r,i,o,s)}function YC(t){let e=ae(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>IE(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),up(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ta(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ta(r)).join(",")),e.Te=n}return e.Te}function ZC(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!m6(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!eN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!XM(t.startAt,e.startAt)&&XM(t.endAt,e.endAt)}function NE(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ia=class{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function y6(t,e,n,r,i,o,s,a){return new ia(t,e,n,r,i,o,s,a)}function XC(t){return new ia(t)}function tR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function v6(t){return t.collectionGroup!==null}function gu(t){let e=ae(t);if(e.Ie===null){e.Ie=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new gt(nn.comparator);return s.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new ra(o,r))}),n.has(nn.keyField().canonicalString())||e.Ie.push(new ra(nn.keyField(),r))}return e.Ie}function ur(t){let e=ae(t);return e.Ee||(e.Ee=_6(e,gu(t))),e.Ee}function _6(t,e){if(t.limitType==="F")return eR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ra(i.field,o)});let n=t.endAt?new na(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new na(t.startAt.position,t.startAt.inclusive):null;return eR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function xE(t,e,n){return new ia(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function dp(t,e){return ZC(ur(t),ur(e))&&t.limitType===e.limitType}function rN(t){return`${YC(ur(t))}|lt:${t.limitType}`}function Gs(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>tN(i)).join(", ")}]`),up(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ta(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ta(i)).join(",")),`Target(${r})`})(ur(t))}; limitType=${t.limitType})`}function fp(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):X.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of gu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,a,l){let c=ZM(s,a,l);return s.inclusive?c<=0:c<0})(r.startAt,gu(r),i)||r.endAt&&!(function(s,a,l){let c=ZM(s,a,l);return s.inclusive?c>=0:c>0})(r.endAt,gu(r),i))})(t,e)}function E6(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function iN(t){return(e,n)=>{let r=!1;for(let i of gu(t)){let o=C6(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function C6(t,e,n){let r=t.field.isKeyField()?X.comparator(e.key,n.key):(function(o,s,a){let l=s.data.field(o),c=a.data.field(o);return l!==null&&c!==null?ea(l,c):ee(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee(19790,{direction:t.dir})}}var Vr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Oo(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return GR(this.inner)}size(){return this.innerSize}};var I6=new Ke(X.comparator);function Ur(){return I6}var oN=new Ke(X.comparator);function pu(...t){let e=oN;for(let n of t)e=e.insert(n.key,n);return e}function sN(t){let e=oN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Do(){return yu()}function aN(){return yu()}function yu(){return new Vr(t=>t.toString(),(t,e)=>t.isEqual(e))}var T6=new Ke(X.comparator),w6=new gt(X.comparator);function ve(...t){let e=w6;for(let n of t)e=e.add(n);return e}var D6=new gt(ye);function S6(){return D6}function eI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Cu(e)?"-0":e}}function lN(t){return{integerValue:""+t}}function A6(t,e){return t6(e)?lN(e):eI(t,e)}var oa=class{constructor(){this._=void 0}};function b6(t,e,n){return t instanceof sa?(function(i,o){let s={fields:{[zR]:{stringValue:qR},[WR]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&WC(o)&&(o=cp(o)),o&&(s.fields[jR]=o),{mapValue:s}})(n,e):t instanceof xo?cN(t,e):t instanceof Po?dN(t,e):(function(i,o){let s=uN(i,o),a=nR(s)+nR(i.Ae);return CE(s)&&CE(i.Ae)?lN(a):eI(i.serializer,a)})(t,e)}function M6(t,e,n){return t instanceof xo?cN(t,e):t instanceof Po?dN(t,e):n}function uN(t,e){return t instanceof aa?(function(r){return CE(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var sa=class extends oa{},xo=class extends oa{constructor(e){super(),this.elements=e}};function cN(t,e){let n=fN(e);for(let r of t.elements)n.some(i=>dr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Po=class extends oa{constructor(e){super(),this.elements=e}};function dN(t,e){let n=fN(e);for(let r of t.elements)n=n.filter(i=>!dr(i,r));return{arrayValue:{values:n}}}var aa=class extends oa{constructor(e,n){super(),this.serializer=e,this.Ae=n}};function nR(t){return Ge(t.integerValue||t.doubleValue)}function fN(t){return QC(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function R6(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof xo&&i instanceof xo||r instanceof Po&&i instanceof Po?Ys(r.elements,i.elements,dr):r instanceof aa&&i instanceof aa?dr(r.Ae,i.Ae):r instanceof sa&&i instanceof sa})(t.transform,e.transform)}var PE=class{constructor(e,n){this.version=e,this.transformResults=n}},bo=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ah(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var la=class{};function hN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Oh(t.key,bo.none()):new ko(t.key,t.data,bo.none());{let n=t.data,r=Vn.empty(),i=new gt(nn.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Br(t.key,r,new ar(i.toArray()),bo.none())}}function N6(t,e,n){t instanceof ko?(function(i,o,s){let a=i.value.clone(),l=iR(i.fieldTransforms,o,s.transformResults);a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()})(t,e,n):t instanceof Br?(function(i,o,s){if(!Ah(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=iR(i.fieldTransforms,o,s.transformResults),l=o.data;l.setAll(pN(i)),l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function vu(t,e,n,r){return t instanceof ko?(function(o,s,a,l){if(!Ah(o.precondition,s))return a;let c=o.value.clone(),h=oR(o.fieldTransforms,l,s);return c.setAll(h),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null})(t,e,n,r):t instanceof Br?(function(o,s,a,l){if(!Ah(o.precondition,s))return a;let c=oR(o.fieldTransforms,l,s),h=s.data;return h.setAll(pN(o)),h.setAll(c),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,a){return Ah(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a})(t,e,n)}function x6(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=uN(r.transform,i||null);o!=null&&(n===null&&(n=Vn.empty()),n.set(r.field,o))}return n||null}function rR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ys(r,i,(o,s)=>R6(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var ko=class extends la{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},Br=class extends la{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function pN(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function iR(t,e,n){let r=new Map;Re(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,M6(s,a,n[i]))}return r}function oR(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,b6(o,s,e))}return r}var Oh=class extends la{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},kE=class extends la{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var FE=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&N6(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=vu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=vu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=aN();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;let l=hN(s,a);l!==null&&r.set(i.key,l),s.isValidDocument()||s.convertToNoDocument(ue.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ve())}isEqual(e){return this.batchId===e.batchId&&Ys(this.mutations,e.mutations,(n,r)=>rR(n,r))&&Ys(this.baseMutations,e.baseMutations,(n,r)=>rR(n,r))}},OE=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Re(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return T6})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var LE=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var VE=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var rt,Ce;function P6(t){switch(t){case V.OK:return ee(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return ee(15467,{code:t})}}function mN(t){if(t===void 0)return Fr("GRPC error has no .code"),V.UNKNOWN;switch(t){case rt.OK:return V.OK;case rt.CANCELLED:return V.CANCELLED;case rt.UNKNOWN:return V.UNKNOWN;case rt.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case rt.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case rt.INTERNAL:return V.INTERNAL;case rt.UNAVAILABLE:return V.UNAVAILABLE;case rt.UNAUTHENTICATED:return V.UNAUTHENTICATED;case rt.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case rt.NOT_FOUND:return V.NOT_FOUND;case rt.ALREADY_EXISTS:return V.ALREADY_EXISTS;case rt.PERMISSION_DENIED:return V.PERMISSION_DENIED;case rt.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case rt.ABORTED:return V.ABORTED;case rt.OUT_OF_RANGE:return V.OUT_OF_RANGE;case rt.UNIMPLEMENTED:return V.UNIMPLEMENTED;case rt.DATA_LOSS:return V.DATA_LOSS;default:return ee(39323,{code:t})}}(Ce=rt||(rt={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";var k6=null;function F6(){return new TextEncoder}var O6=new Pr([4294967295,4294967295],0);function sR(t){let e=F6().encode(t),n=new X_;return n.update(e),new Uint8Array(n.digest())}function aR(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Pr([n,r],0),new Pr([i,o],0)]}var UE=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new So(`Invalid padding: ${n}`);if(r<0)throw new So(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new So(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new So(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Pr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(Pr.fromNumber(r)));return i.compare(O6)===1&&(i=new Pr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let n=sR(e),[r,i]=aR(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.ge===0)return;let n=sR(e),[r,i]=aR(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},So=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Lh=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(ue.min(),i,new Ke(ye),Ur(),ve())}},wu=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ve(),ve(),ve())}};var Ws=class{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}},Vh=class{constructor(e,n){this.targetId=e,this.Ce=n}},Uh=class{constructor(e,n,r=Mt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Bh=class{constructor(){this.ve=0,this.Fe=lR(),this.Me=Mt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ve(),n=ve(),r=ve();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ee(38017,{changeType:o})}}),new wu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=lR()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Re(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},BE=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ur(),this.Je=Th(),this.He=Th(),this.Ye=new Ke(ye)}Ze(e){for(let n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(let n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ee(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){let n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){let o=i.target;if(NE(o))if(r===0){let s=new X(o.path);this.et(n,s,Bn.newNoDocument(s,ue.min()))}else Re(r===1,20013,{expectedCount:r});else{let s=this._t(n);if(s!==r){let a=this.ut(e),l=a?this.ct(a,e,s):1;if(l!==0){this.it(n);let c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}k6?.lt((function(h,p,m,v,I){let b={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},A=p.unchangedNames;return A&&(b.bloomFilter={applied:I===0,hashCount:A?.hashCount??0,bitmapLength:A?.bits?.bitmap?.length??0,padding:A?.bits?.padding??0,mightContain:N=>v?.mightContain(N)??!1}),b})(s,e.Ce,this.Ge.ht(),a,l))}}}}ut(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,a;try{s=Lr(r).toUint8Array()}catch(l){if(l instanceof xh)return Qs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new UE(s,i,o)}catch(l){return Qs(l instanceof So?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){let r=this.Ge.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Ge.ht(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.et(n,o,null),i++)}),i}Tt(e){let n=new Map;this.ze.forEach((o,s)=>{let a=this.ot(s);if(a){if(o.current&&NE(a.target)){let l=new X(a.target.path);this.It(l).has(s)||this.Et(s,l)||this.et(s,l,Bn.newNoDocument(l,e))}o.Be&&(n.set(s,o.ke()),o.qe())}});let r=ve();this.He.forEach((o,s)=>{let a=!0;s.forEachWhile(l=>{let c=this.ot(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Lh(e,n,this.Ye,this.je,r);return this.je=Ur(),this.Je=Th(),this.He=Th(),this.Ye=new Ke(ye),i}Xe(e,n){if(!this.rt(e))return;let r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){let n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new Bh,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new gt(ye),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new gt(ye),this.Je=this.Je.insert(e,n)),n}rt(e){let n=this.ot(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Bh),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}};function Th(){return new Ke(X.comparator)}function lR(){return new Ke(X.comparator)}var L6={asc:"ASCENDING",desc:"DESCENDING"},V6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},U6={and:"AND",or:"OR"},HE=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function $E(t,e){return t.useProto3Json||up(e)?e:{value:e}}function Hh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gN(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function B6(t,e){return Hh(t,e.toTimestamp())}function cr(t){return Re(!!t,49232),ue.fromTimestamp((function(n){let r=Or(n);return new st(r.seconds,r.nanos)})(t))}function tI(t,e){return GE(t,e).canonicalString()}function GE(t,e){let n=(function(i){return new je(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function yN(t){let e=je.fromString(t);return Re(IN(e),10190,{key:e.toString()}),e}function qE(t,e){return tI(t.databaseId,e.path)}function sE(t,e){let n=yN(e);if(n.get(1)!==t.databaseId.projectId)throw new K(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(_N(n))}function vN(t,e){return tI(t.databaseId,e)}function H6(t){let e=yN(t);return e.length===4?je.emptyPath():_N(e)}function zE(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _N(t){return Re(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function uR(t,e,n){return{name:qE(t,e),fields:n.value.mapValue.fields}}function $6(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ee(39313,{state:c})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(c,h){return c.useProto3Json?(Re(h===void 0||typeof h=="string",58123),Mt.fromBase64String(h||"")):(Re(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Mt.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&(function(c){let h=c.code===void 0?V.UNKNOWN:mN(c.code);return new K(h,c.message||"")})(s);n=new Uh(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=sE(t,r.document.name),o=cr(r.document.updateTime),s=r.document.createTime?cr(r.document.createTime):ue.min(),a=new Vn({mapValue:{fields:r.document.fields}}),l=Bn.newFoundDocument(i,o,s,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Ws(c,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=sE(t,r.document),o=r.readTime?cr(r.readTime):ue.min(),s=Bn.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Ws([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=sE(t,r.document),o=r.removedTargetIds||[];n=new Ws([],o,i,null)}else{if(!("filter"in e))return ee(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new VE(i,o),a=r.targetId;n=new Vh(a,s)}}return n}function G6(t,e){let n;if(e instanceof ko)n={update:uR(t,e.key,e.value)};else if(e instanceof Oh)n={delete:qE(t,e.key)};else if(e instanceof Br)n={update:uR(t,e.key,e.data),updateMask:Z6(e.fieldMask)};else{if(!(e instanceof kE))return ee(16599,{Vt:e.type});n={verify:qE(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let a=s.transform;if(a instanceof sa)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof xo)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Po)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof aa)return{fieldPath:s.field.canonicalString(),increment:a.Ae};throw ee(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:B6(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ee(27497)})(t,e.precondition)),n}function q6(t,e){return t&&t.length>0?(Re(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?cr(i.updateTime):cr(o);return s.isEqual(ue.min())&&(s=cr(o)),new PE(s,i.transformResults||[])})(n,e))):[]}function z6(t,e){return{documents:[vN(t,e.path)]}}function j6(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=vN(t,i);let o=(function(c){if(c.length!==0)return CN(fr.create(c,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(c){if(c.length!==0)return c.map(h=>(function(m){return{field:qs(m.field),direction:J6(m.dir)}})(h))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let a=$E(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=(function(c){return{before:c.inclusive,values:c.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(c){return{before:!c.inclusive,values:c.position}})(e.endAt)),{ft:n,parent:i}}function W6(t){let e=H6(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Re(r===1,65062);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];n.where&&(o=(function(p){let m=EN(p);return m instanceof fr&&XR(m)?m.getFilters():[m]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(m=>(function(I){return new ra(zs(I.field),(function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(m))})(n.orderBy));let a=null;n.limit&&(a=(function(p){let m;return m=typeof p=="object"?p.value:p,up(m)?null:m})(n.limit));let l=null;n.startAt&&(l=(function(p){let m=!!p.before,v=p.values||[];return new na(v,m)})(n.startAt));let c=null;return n.endAt&&(c=(function(p){let m=!p.before,v=p.values||[];return new na(v,m)})(n.endAt)),y6(e,i,s,o,a,"F",l,c)}function K6(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function EN(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=zs(n.unaryFilter.field);return dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=zs(n.unaryFilter.field);return dt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=zs(n.unaryFilter.field);return dt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=zs(n.unaryFilter.field);return dt.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ee(61313);default:return ee(60726)}})(t):t.fieldFilter!==void 0?(function(n){return dt.create(zs(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ee(58110);default:return ee(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return fr.create(n.compositeFilter.filters.map(r=>EN(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ee(1026)}})(n.compositeFilter.op))})(t):ee(30097,{filter:t})}function J6(t){return L6[t]}function Q6(t){return V6[t]}function Y6(t){return U6[t]}function qs(t){return{fieldPath:t.canonicalString()}}function zs(t){return nn.fromServerFormat(t.fieldPath)}function CN(t){return t instanceof dt?(function(n){if(n.op==="=="){if(YM(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NAN"}};if(QM(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(YM(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NOT_NAN"}};if(QM(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qs(n.field),op:Q6(n.op),value:n.value}}})(t):t instanceof fr?(function(n){let r=n.getFilters().map(i=>CN(i));return r.length===1?r[0]:{compositeFilter:{op:Y6(n.op),filters:r}}})(t):ee(54877,{filter:t})}function Z6(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function IN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Du=class t{constructor(e,n,r,i,o=ue.min(),s=ue.min(),a=Mt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var jE=class{constructor(e){this.yt=e}};function X6(t){let e=W6({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xE(e,e.limit,"L"):e}var $h=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(Ge(e.integerValue));else if("doubleValue"in e){let r=Ge(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),Cu(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=Or(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(Lr(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?QR(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):JR(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):ee(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){let r=e.fields||{};this.Ft(n,55);for(let i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){let r=e.fields||{};this.Ft(n,53);let i=Xs,o=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(Ge(o)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){let r=e.values||[];this.Ft(n,50);for(let i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),X.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};$h.Kt=new $h;var WE=class{constructor(){this.Cn=new KE}addToCollectionParentIndex(e,n){return this.Cn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(No.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(No.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}},KE=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new gt(je.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new gt(je.comparator)).toArray()}};var Cle=new Uint8Array(0);var cR={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TN=41943040,_n=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};_n.DEFAULT_COLLECTION_PERCENTILE=10,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_n.DEFAULT=new _n(TN,_n.DEFAULT_COLLECTION_PERCENTILE,_n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_n.DISABLED=new _n(-1,0,0);var Su=class t{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new t(0)}static cr(){return new t(-1)}};var dR="LruGarbageCollector",e5=1048576;function fR([t,e],[n,r]){let i=ye(t,n);return i===0?ye(e,r):i}var JE=class{constructor(e){this.Ir=e,this.buffer=new gt(fR),this.Er=0}dr(){return++this.Er}Ar(e){let n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();fR(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},QE=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){W(dR,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){pa(n)?W(dR,"Ignoring IndexedDB error during garbage collection: ",n):await ha(n)}await this.Vr(3e5)})}},YE=class{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(zC.ce);let r=new JE(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(W("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(cR)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),cR):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,a,l,c,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(c=Date.now(),$s()<=Ee.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(c-l)+`ms
Total Duration: ${c-h}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function t5(t,e){return new YE(t,e)}var ZE=class{constructor(){this.changes=new Vr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Bn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var XE=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var eC=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&vu(r.mutation,i,ar.empty(),st.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ve()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ve()){let i=Do();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=pu();return o.forEach((a,l)=>{s=s.insert(a,l.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=Do();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ve()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=Ur(),s=yu(),a=(function(){return yu()})();return n.forEach((l,c)=>{let h=r.get(c.key);i.has(c.key)&&(h===void 0||h.mutation instanceof Br)?o=o.insert(c.key,c):h!==void 0?(s.set(c.key,h.mutation.getFieldMask()),vu(h.mutation,c,h.mutation.getFieldMask(),st.now())):s.set(c.key,ar.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((c,h)=>s.set(c,h)),n.forEach((c,h)=>a.set(c,new XE(h,s.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){let r=yu(),i=new Ke((s,a)=>s-a),o=ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let a of s)a.keys().forEach(l=>{let c=n.get(l);if(c===null)return;let h=r.get(l)||ar.empty();h=a.applyToLocalView(c,h),r.set(l,h);let p=(i.get(a.batchId)||ve()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),c=l.key,h=l.value,p=aN();h.forEach(m=>{if(!o.has(m)){let v=hN(n.get(m),r.get(m));v!==null&&p.set(m,v),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,p))}return U.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return X.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):v6(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):U.resolve(Do()),a=Eu,l=o;return s.next(c=>U.forEach(c,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{l=l.insert(h,m)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,l,c,ve())).next(h=>({batchId:a,changes:sN(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let i=pu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=pu();return this.indexManager.getCollectionParents(e,o).next(a=>U.forEach(a,l=>{let c=(function(p,m){return new ia(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((l,c)=>{let h=c.getKey();s.get(h)===null&&(s=s.insert(h,Bn.newInvalidDocument(h)))});let a=pu();return s.forEach((l,c)=>{let h=o.get(l);h!==void 0&&vu(h.mutation,c,ar.empty(),st.now()),fp(n,c)&&(a=a.insert(l,c))}),a})}};var tC=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return U.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:cr(i.createTime)}})(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:X6(i.bundledQuery),readTime:cr(i.readTime)}})(n)),U.resolve()}};var nC=class{constructor(){this.overlays=new Ke(X.comparator),this.qr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){let r=Do();return U.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),U.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){let i=Do(),o=n.length+1,s=new X(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return U.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new Ke((c,h)=>c-h),s=this.overlays.getIterator();for(;s.hasNext();){let c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=o.get(c.largestBatchId);h===null&&(h=Do(),o=o.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}let a=Do(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return U.resolve(a)}St(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new LE(n,r));let o=this.qr.get(n);o===void 0&&(o=ve(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}};var rC=class{constructor(){this.sessionToken=Mt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}};var Au=class{constructor(){this.Qr=new gt(it.$r),this.Ur=new gt(it.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){let r=new it(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new it(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){let n=new X(new je([])),r=new it(n,e),i=new it(n,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let n=new X(new je([])),r=new it(n,e),i=new it(n,e+1),o=ve();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new it(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},it=class{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return X.comparator(e.key,n.key)||ye(e.Yr,n.Yr)}static Kr(e,n){return ye(e.Yr,n.Yr)||X.comparator(e.key,n.key)}};var iC=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new gt(it.$r)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new FE(o,n,r,i);this.mutationQueue.push(s);for(let a of i)this.Zr=this.Zr.add(new it(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(s)}lookupMutationBatch(e,n){return U.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.ei(r),o=i<0?0:i;return U.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?jC:this.tr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new it(n,0),i=new it(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let a=this.Xr(s.Yr);o.push(a)}),U.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new gt(ye);return n.forEach(i=>{let o=new it(i,0),s=new it(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],a=>{r=r.add(a.Yr)})}),U.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;X.isDocumentKey(o)||(o=o.child(""));let s=new it(new X(o),0),a=new gt(ye);return this.Zr.forEachWhile(l=>{let c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.Yr)),!0)},s),U.resolve(this.ti(a))}ti(e){let n=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Re(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return U.forEach(n.mutations,i=>{let o=new it(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){let r=new it(n,0),i=this.Zr.firstAfterOrEqual(r);return U.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var oC=class{constructor(e){this.ri=e,this.docs=(function(){return new Ke(X.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Bn.newInvalidDocument(n))}getEntries(e,n){let r=Ur();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Bn.newInvalidDocument(i))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=Ur(),s=n.path,a=new X(s.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:c,value:{document:h}}=l.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||Zq(Yq(h),r)<=0||(i.has(h.key)||fp(n,h))&&(o=o.insert(h.key,h.mutableCopy()))}return U.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ee(9500)}ii(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new sC(this)}getSize(e){return U.resolve(this.size)}},sC=class extends ZE{constructor(e){super(),this.Nr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}};var aC=class{constructor(e){this.persistence=e,this.si=new Vr(n=>YC(n),ZC),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.oi=0,this._i=new Au,this.targetCount=0,this.ai=Su.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),U.resolve()}Pr(e){this.si.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ai=new Su(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Pr(n),U.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.si.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),U.waitFor(o).next(()=>i)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){let r=this.si.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),U.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),U.resolve()}getMatchingKeysForTargetId(e,n){let r=this._i.Hr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this._i.containsKey(n))}};var Gh=class{constructor(e,n){this.ui={},this.overlays={},this.ci=new zC(0),this.li=!1,this.li=!0,this.hi=new rC,this.referenceDelegate=e(this),this.Pi=new aC(this),this.indexManager=new WE,this.remoteDocumentCache=(function(i){return new oC(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new jE(n),this.Ii=new tC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new iC(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);let i=new lC(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return U.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}},lC=class extends vE{constructor(e){super(),this.currentSequenceNumber=e}},uC=class t{constructor(e){this.persistence=e,this.Ri=new Au,this.Vi=null}static mi(e){return new t(e)}get fi(){if(this.Vi)return this.Vi;throw ee(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.fi,r=>{let i=X.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,ue.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}},qh=class t{constructor(e,n){this.persistence=e,this.pi=new Vr(r=>n6(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=t5(this,n)}static mi(e,n){return new t(e,n)}Ei(){}di(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){let n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return U.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?U.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,n).next(a=>{a||(r++,o.removeEntry(s,ue.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),U.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Dh(e.data.value)),n}br(e,n,r){return U.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.pi.get(n);return U.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var cC=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ve(),i=ve();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var dC=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var fC=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return eA()?8:e6(X0())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ys(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new dC;return this.Ss(e,n,s).next(a=>{if(o.result=a,this.Vs)return this.bs(e,n,s,a.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?($s()<=Ee.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Gs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),U.resolve()):($s()<=Ee.DEBUG&&W("QueryEngine","Query:",Gs(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?($s()<=Ee.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Gs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ur(n))):U.resolve())}ys(e,n){if(tR(n))return U.resolve(null);let r=ur(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=xE(n,null,"F"),r=ur(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ve(...o);return this.ps.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{let c=this.Ds(n,a);return this.Cs(n,c,s,l.readTime)?this.ys(e,xE(n,null,"F")):this.vs(e,c,n,l)}))})))}ws(e,n,r,i){return tR(n)||i.isEqual(ue.min())?U.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(n,o);return this.Cs(n,s,r,i)?U.resolve(null):($s()<=Ee.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Gs(n)),this.vs(e,s,n,Qq(i,Eu)).next(a=>a))})}Ds(e,n){let r=new gt(iN(e));return n.forEach((i,o)=>{fp(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return $s()<=Ee.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Gs(n)),this.ps.getDocumentsMatchingQuery(e,n,No.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var nI="LocalStore",n5=3e8,hC=class{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ke(ye),this.xs=new Vr(o=>YC(o),ZC),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}};function r5(t,e,n,r){return new hC(t,e,n,r)}async function wN(t,e){let n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],l=ve();for(let c of i){s.push(c.batchId);for(let h of c.mutations)l=l.add(h.key)}for(let c of o){a.push(c.batchId);for(let h of c.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ls:c,removedBatchIds:s,addedBatchIds:a}))})})}function i5(t,e){let n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,c,h){let p=c.batch,m=p.keys(),v=U.resolve();return m.forEach(I=>{v=v.next(()=>h.getEntry(l,I)).next(b=>{let A=c.docVersions.get(I);Re(A!==null,48541),b.version.compareTo(A)<0&&(p.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),h.addEntry(b)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(l,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(a){let l=ve();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function DN(t){let e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function o5(t,e){let n=ae(t),r=e.snapshotVersion,i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Pi.removeMatchingKeys(o,h.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(o,h.addedDocuments,p)));let v=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Mt.EMPTY_BYTE_STRING,ue.min()).withLastLimboFreeSnapshotVersion(ue.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),(function(b,A,N){return b.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=n5?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0})(m,v,h)&&a.push(n.Pi.updateTargetData(o,v))});let l=Ur(),c=ve();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push(s5(o,s,e.documentUpdates).next(h=>{l=h.ks,c=h.qs})),!r.isEqual(ue.min())){let h=n.Pi.getLastRemoteSnapshotVersion(o).next(p=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return U.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,l,c)).next(()=>l)}).then(o=>(n.Ms=i,o))}function s5(t,e,n){let r=ve(),i=ve();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=Ur();return n.forEach((a,l)=>{let c=o.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(ue.min())?(e.removeEntry(a,l.readTime),s=s.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),s=s.insert(a,l)):W(nI,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{ks:s,qs:i}})}function a5(t,e){let n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=jC),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function l5(t,e){let n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,U.resolve(i)):n.Pi.allocateTargetId(r).next(s=>(i=new Du(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function pC(t,e,n){let r=ae(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!pa(s))throw s;W(nI,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function hR(t,e,n){let r=ae(t),i=ue.min(),o=ve();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(l,c,h){let p=ae(l),m=p.xs.get(h);return m!==void 0?U.resolve(p.Ms.get(m)):p.Pi.getTargetData(c,h)})(r,s,ur(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,a.targetId).next(l=>{o=l})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:ue.min(),n?o:ve())).next(a=>(u5(r,E6(e),a),{documents:a,Qs:o})))}function u5(t,e,n){let r=t.Os.get(e)||ue.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}var zh=class{constructor(){this.activeTargetIds=S6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var mC=class{constructor(){this.Mo=new zh,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new zh,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var gC=class{Oo(e){}shutdown(){}};var pR="ConnectivityMonitor",jh=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){W(pR,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){W(pR,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var wh=null;function yC(){return wh===null?wh=(function(){return 268435456+Math.round(2147483648*Math.random())})():wh++,"0x"+wh.toString(16)}var aE="RestConnection",c5={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},vC=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Ph?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){let s=yC(),a=this.zo(e,n.toUriEncodedString());W(aE,`Sending RPC '${e}' ${s}:`,a,r);let l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,i,o);let{host:c}=new URL(a),h=rf(c);return this.Jo(e,a,l,r,h).then(p=>(W(aE,`Received RPC '${e}' ${s}: `,p),p),p=>{throw Qs(aE,`RPC '${e}' ${s} failed with error: `,p,"url: ",a,"request:",r),p})}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+fa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){let r=c5[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}};var _C=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var bt="WebChannelConnection",EC=class extends vC{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){let s=yC();return new Promise((a,l)=>{let c=new eE;c.setWithCredentials(!0),c.listenOnce(tE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case hu.NO_ERROR:let p=c.getResponseJson();W(bt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),a(p);break;case hu.TIMEOUT:W(bt,`RPC '${e}' ${s} timed out`),l(new K(V.DEADLINE_EXCEEDED,"Request time out"));break;case hu.HTTP_ERROR:let m=c.getStatus();if(W(bt,`RPC '${e}' ${s} failed with status:`,m,"response text:",c.getResponseText()),m>0){let v=c.getResponseJson();Array.isArray(v)&&(v=v[0]);let I=v?.error;if(I&&I.status&&I.message){let b=(function(N){let O=N.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(O)>=0?O:V.UNKNOWN})(I.status);l(new K(b,I.message))}else l(new K(V.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new K(V.UNAVAILABLE,"Connection failed."));break;default:ee(9055,{l_:e,streamId:s,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{W(bt,`RPC '${e}' ${s} completed.`)}});let h=JSON.stringify(i);W(bt,`RPC '${e}' ${s} sending request:`,i),c.send(n,"POST",h,r,15)})}T_(e,n,r){let i=yC(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=iE(),a=rE(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;let h=o.join("");W(bt,`Creating RPC '${e}' stream ${i}: ${h}`,l);let p=s.createWebChannel(h,l);this.I_(p);let m=!1,v=!1,I=new _C({Yo:A=>{v?W(bt,`Not sending because RPC '${e}' stream ${i} is closed:`,A):(m||(W(bt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),W(bt,`RPC '${e}' stream ${i} sending:`,A),p.send(A))},Zo:()=>p.close()}),b=(A,N,O)=>{A.listen(N,L=>{try{O(L)}catch(G){setTimeout(()=>{throw G},0)}})};return b(p,Hs.EventType.OPEN,()=>{v||(W(bt,`RPC '${e}' stream ${i} transport opened.`),I.o_())}),b(p,Hs.EventType.CLOSE,()=>{v||(v=!0,W(bt,`RPC '${e}' stream ${i} transport closed`),I.a_(),this.E_(p))}),b(p,Hs.EventType.ERROR,A=>{v||(v=!0,Qs(bt,`RPC '${e}' stream ${i} transport errored. Name:`,A.name,"Message:",A.message),I.a_(new K(V.UNAVAILABLE,"The operation could not be completed")))}),b(p,Hs.EventType.MESSAGE,A=>{if(!v){let N=A.data[0];Re(!!N,16349);let O=N,L=O?.error||O[0]?.error;if(L){W(bt,`RPC '${e}' stream ${i} received error:`,L);let G=L.status,Z=(function(C){let E=rt[C];if(E!==void 0)return mN(E)})(G),Y=L.message;Z===void 0&&(Z=V.INTERNAL,Y="Unknown error status: "+G+" with message "+L.message),v=!0,I.a_(new K(Z,Y)),p.close()}else W(bt,`RPC '${e}' stream ${i} received:`,N),I.u_(N)}}),b(a,nE.STAT_EVENT,A=>{A.stat===Ch.PROXY?W(bt,`RPC '${e}' stream ${i} detected buffering proxy`):A.stat===Ch.NOPROXY&&W(bt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{I.__()},0),I}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}};function lE(){return typeof document<"u"?document:null}function hp(t){return new HE(t,!0)}var Wh=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&W("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var mR="PersistentStream",Kh=class{constructor(e,n,r,i,o,s,a,l){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Wh(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(Fr(n.toString()),Fr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{let i=new K(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){let r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return W(mR,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(W(mR,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},CC=class extends Kh{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let n=$6(this.serializer,e),r=(function(o){if(!("targetChange"in o))return ue.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ue.min():s.readTime?cr(s.readTime):ue.min()})(e);return this.listener.H_(n,r)}Y_(e){let n={};n.database=zE(this.serializer),n.addTarget=(function(o,s){let a,l=s.target;if(a=NE(l)?{documents:z6(o,l)}:{query:j6(o,l).ft},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=gN(o,s.resumeToken);let c=$E(o,s.expectedCount);c!==null&&(a.expectedCount=c)}else if(s.snapshotVersion.compareTo(ue.min())>0){a.readTime=Hh(o,s.snapshotVersion.toTimestamp());let c=$E(o,s.expectedCount);c!==null&&(a.expectedCount=c)}return a})(this.serializer,e);let r=K6(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){let n={};n.database=zE(this.serializer),n.removeTarget=e,this.q_(n)}},IC=class extends Kh{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Re(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Re(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Re(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let n=q6(e.writeResults,e.commitTime),r=cr(e.commitTime);return this.listener.na(r,n)}ra(){let e={};e.database=zE(this.serializer),this.q_(e)}ea(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>G6(this.serializer,r))};this.q_(n)}};var TC=class{},wC=class extends TC{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new K(V.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,GE(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(V.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Ho(e,GE(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new K(V.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},DC=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fr(n),this.aa=!1):W("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var Fo="RemoteStore",SC=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{Lo(this)&&(W(Fo,"Restarting streams for network reachability change."),await(async function(l){let c=ae(l);c.Ea.add(4),await Ru(c),c.Ra.set("Unknown"),c.Ea.delete(4),await pp(c)})(this))})}),this.Ra=new DC(r,i)}};async function pp(t){if(Lo(t))for(let e of t.da)await e(!0)}async function Ru(t){for(let e of t.da)await e(!1)}function SN(t,e){let n=ae(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),sI(n)?oI(n):ma(n).O_()&&iI(n,e))}function rI(t,e){let n=ae(t),r=ma(n);n.Ia.delete(e),r.O_()&&AN(n,e),n.Ia.size===0&&(r.O_()?r.L_():Lo(n)&&n.Ra.set("Unknown"))}function iI(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ue.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ma(t).Y_(e)}function AN(t,e){t.Va.Ue(e),ma(t).Z_(e)}function oI(t){t.Va=new BE({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ma(t).start(),t.Ra.ua()}function sI(t){return Lo(t)&&!ma(t).x_()&&t.Ia.size>0}function Lo(t){return ae(t).Ea.size===0}function bN(t){t.Va=void 0}async function d5(t){t.Ra.set("Online")}async function f5(t){t.Ia.forEach((e,n)=>{iI(t,e)})}async function h5(t,e){bN(t),sI(t)?(t.Ra.ha(e),oI(t)):t.Ra.set("Unknown")}async function p5(t,e,n){if(t.Ra.set("Online"),e instanceof Uh&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let a of o.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.Ia.delete(a),i.Va.removeTarget(a))})(t,e)}catch(r){W(Fo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Jh(t,r)}else if(e instanceof Ws?t.Va.Ze(e):e instanceof Vh?t.Va.st(e):t.Va.tt(e),!n.isEqual(ue.min()))try{let r=await DN(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let a=o.Va.Tt(s);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){let h=o.Ia.get(c);h&&o.Ia.set(c,h.withResumeToken(l.resumeToken,s))}}),a.targetMismatches.forEach((l,c)=>{let h=o.Ia.get(l);if(!h)return;o.Ia.set(l,h.withResumeToken(Mt.EMPTY_BYTE_STRING,h.snapshotVersion)),AN(o,l);let p=new Du(h.target,l,c,h.sequenceNumber);iI(o,p)}),o.remoteSyncer.applyRemoteEvent(a)})(t,n)}catch(r){W(Fo,"Failed to raise snapshot:",r),await Jh(t,r)}}async function Jh(t,e,n){if(!pa(e))throw e;t.Ea.add(1),await Ru(t),t.Ra.set("Offline"),n||(n=()=>DN(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W(Fo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await pp(t)})}function MN(t,e){return e().catch(n=>Jh(t,n,e))}async function mp(t){let e=ae(t),n=Si(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jC;for(;m5(e);)try{let i=await a5(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,g5(e,i)}catch(i){await Jh(e,i)}RN(e)&&NN(e)}function m5(t){return Lo(t)&&t.Ta.length<10}function g5(t,e){t.Ta.push(e);let n=Si(t);n.O_()&&n.X_&&n.ea(e.mutations)}function RN(t){return Lo(t)&&!Si(t).x_()&&t.Ta.length>0}function NN(t){Si(t).start()}async function y5(t){Si(t).ra()}async function v5(t){let e=Si(t);for(let n of t.Ta)e.ea(n.mutations)}async function _5(t,e,n){let r=t.Ta.shift(),i=OE.from(r,e,n);await MN(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await mp(t)}async function E5(t,e){e&&Si(t).X_&&await(async function(r,i){if((function(s){return P6(s)&&s!==V.ABORTED})(i.code)){let o=r.Ta.shift();Si(r).B_(),await MN(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await mp(r)}})(t,e),RN(t)&&NN(t)}async function gR(t,e){let n=ae(t);n.asyncQueue.verifyOperationInProgress(),W(Fo,"RemoteStore received new credentials");let r=Lo(n);n.Ea.add(3),await Ru(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await pp(n)}async function C5(t,e){let n=ae(t);e?(n.Ea.delete(2),await pp(n)):e||(n.Ea.add(2),await Ru(n),n.Ra.set("Unknown"))}function ma(t){return t.ma||(t.ma=(function(n,r,i){let o=ae(n);return o.sa(),new CC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:d5.bind(null,t),t_:f5.bind(null,t),r_:h5.bind(null,t),H_:p5.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),sI(t)?oI(t):t.Ra.set("Unknown")):(await t.ma.stop(),bN(t))})),t.ma}function Si(t){return t.fa||(t.fa=(function(n,r,i){let o=ae(n);return o.sa(),new IC(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:y5.bind(null,t),r_:E5.bind(null,t),ta:v5.bind(null,t),na:_5.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await mp(t)):(await t.fa.stop(),t.Ta.length>0&&(W(Fo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}var AC=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,a=new t(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function aI(t,e){if(Fr("AsyncQueue",`${e}: ${t}`),pa(t))return new K(V.UNAVAILABLE,`${e}: ${t}`);throw t}var Qh=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=pu(),this.sortedSet=new Ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Yh=class{constructor(){this.ga=new Ke(X.comparator)}track(e){let n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ee(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){let e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}},ua=class t{constructor(e,n,r,i,o,s,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new t(e,n,Qh.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var bC=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},MC=class{constructor(){this.queries=yR(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let i=ae(n),o=i.queries;i.queries=yR(),o.forEach((s,a)=>{for(let l of a.Sa)l.onError(r)})})(this,new K(V.ABORTED,"Firestore shutting down"))}};function yR(){return new Vr(t=>rN(t),dp)}async function xN(t,e){let n=ae(t),r=3,i=e.query,o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new bC,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let a=aI(s,`Initialization of query '${Gs(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&lI(n)}async function PN(t,e){let n=ae(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function I5(t,e){let n=ae(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let a of s.Sa)a.Fa(i)&&(r=!0);s.wa=i}}r&&lI(n)}function T5(t,e,n){let r=ae(t),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(n);r.queries.delete(e)}function lI(t){t.Ca.forEach(e=>{e.next()})}var RC,vR;(vR=RC||(RC={})).Ma="default",vR.Cache="cache";var Zh=class{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ua(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;let r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ua.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==RC.Cache}};var Xh=class{constructor(e){this.key=e}},ep=class{constructor(e){this.key=e}},NC=class{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ve(),this.mutatedKeys=ve(),this.eu=iN(e),this.tu=new Qh(this.eu)}get nu(){return this.Ya}ru(e,n){let r=n?n.iu:new Yh,i=n?n.tu:this.tu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1,l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=fp(this.query,p)?p:null,I=!!m&&this.mutatedKeys.has(m.key),b=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),A=!1;m&&v?m.data.isEqual(v.data)?I!==b&&(r.track({type:3,doc:v}),A=!0):this.su(m,v)||(r.track({type:2,doc:v}),A=!0,(l&&this.eu(v,l)>0||c&&this.eu(v,c)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),A=!0):m&&!v&&(r.track({type:1,doc:m}),A=!0,(l||c)&&(a=!0)),A&&(v?(s=s.add(v),o=b?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{tu:s,iu:r,Cs:a,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((h,p)=>(function(v,I){let b=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee(20277,{Rt:A})}};return b(v)-b(I)})(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),i=i??!1;let a=n&&!i?this._u():[],l=this.Xa.size===0&&this.current&&!i?1:0,c=l!==this.Za;return this.Za=l,s.length!==0||c?{snapshot:new ua(this.query,e.tu,o,s,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Yh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=ve(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new ep(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Xh(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ve();let n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ua.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},uI="SyncEngine",xC=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},PC=class{constructor(e){this.key=e,this.hu=!1}},kC=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new Vr(a=>rN(a),dp),this.Iu=new Map,this.Eu=new Set,this.du=new Ke(X.comparator),this.Au=new Map,this.Ru=new Au,this.Vu={},this.mu=new Map,this.fu=Su.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function w5(t,e,n=!0){let r=UN(t),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await kN(r,e,n,!0),i}async function D5(t,e){let n=UN(t);await kN(n,e,!0,!1)}async function kN(t,e,n,r){let i=await l5(t.localStore,ur(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),a;return r&&(a=await S5(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&SN(t.remoteStore,i),a}async function S5(t,e,n,r,i){t.pu=(p,m,v)=>(async function(b,A,N,O){let L=A.view.ru(N);L.Cs&&(L=await hR(b.localStore,A.query,!1).then(({documents:w})=>A.view.ru(w,L)));let G=O&&O.targetChanges.get(A.targetId),Z=O&&O.targetMismatches.get(A.targetId)!=null,Y=A.view.applyChanges(L,b.isPrimaryClient,G,Z);return ER(b,A.targetId,Y.au),Y.snapshot})(t,p,m,v);let o=await hR(t.localStore,e,!0),s=new NC(e,o.Qs),a=s.ru(o.documents),l=wu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=s.applyChanges(a,t.isPrimaryClient,l);ER(t,n,c.au);let h=new xC(e,n,s);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function A5(t,e,n){let r=ae(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!dp(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await pC(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&rI(r.remoteStore,i.targetId),FC(r,i.targetId)}).catch(ha)):(FC(r,i.targetId),await pC(r.localStore,i.targetId,!0))}async function b5(t,e){let n=ae(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),rI(n.remoteStore,r.targetId))}async function M5(t,e,n){let r=O5(t);try{let i=await(function(s,a){let l=ae(s),c=st.now(),h=a.reduce((v,I)=>v.add(I.key),ve()),p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",v=>{let I=Ur(),b=ve();return l.Ns.getEntries(v,h).next(A=>{I=A,I.forEach((N,O)=>{O.isValidDocument()||(b=b.add(N))})}).next(()=>l.localDocuments.getOverlayedDocuments(v,I)).next(A=>{p=A;let N=[];for(let O of a){let L=x6(O,p.get(O.key).overlayedDocument);L!=null&&N.push(new Br(O.key,L,YR(L.value.mapValue),bo.exists(!0)))}return l.mutationQueue.addMutationBatch(v,c,N,a)}).next(A=>{m=A;let N=A.applyToLocalDocumentSet(p,b);return l.documentOverlayCache.saveOverlays(v,A.batchId,N)})}).then(()=>({batchId:m.batchId,changes:sN(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,a,l){let c=s.Vu[s.currentUser.toKey()];c||(c=new Ke(ye)),c=c.insert(a,l),s.Vu[s.currentUser.toKey()]=c})(r,i.batchId,n),await Nu(r,i.changes),await mp(r.remoteStore)}catch(i){let o=aI(i,"Failed to persist write");n.reject(o)}}async function FN(t,e){let n=ae(t);try{let r=await o5(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Au.get(o);s&&(Re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Re(s.hu,14607):i.removedDocuments.size>0&&(Re(s.hu,42227),s.hu=!1))}),await Nu(n,r,e)}catch(r){await ha(r)}}function _R(t,e,n){let r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Tu.forEach((o,s)=>{let a=s.view.va(e);a.snapshot&&i.push(a.snapshot)}),(function(s,a){let l=ae(s);l.onlineState=a;let c=!1;l.queries.forEach((h,p)=>{for(let m of p.Sa)m.va(a)&&(c=!0)}),c&&lI(l)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function R5(t,e,n){let r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new Ke(X.comparator);s=s.insert(o,Bn.newNoDocument(o,ue.min()));let a=ve().add(o),l=new Lh(ue.min(),new Map,new Ke(ye),s,a);await FN(r,l),r.du=r.du.remove(o),r.Au.delete(e),cI(r)}else await pC(r.localStore,e,!1).then(()=>FC(r,e,n)).catch(ha)}async function N5(t,e){let n=ae(t),r=e.batch.batchId;try{let i=await i5(n.localStore,e);LN(n,r,null),ON(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Nu(n,i)}catch(i){await ha(i)}}async function x5(t,e,n){let r=ae(t);try{let i=await(function(s,a){let l=ae(s);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(Re(p!==null,37113),h=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})})(r.localStore,e);LN(r,e,n),ON(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Nu(r,i)}catch(i){await ha(i)}}function ON(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function LN(t,e,n){let r=ae(t),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function FC(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||VN(t,r)})}function VN(t,e){t.Eu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(rI(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),cI(t))}function ER(t,e,n){for(let r of n)r instanceof Xh?(t.Ru.addReference(r.key,e),P5(t,r)):r instanceof ep?(W(uI,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||VN(t,r.key)):ee(19791,{wu:r})}function P5(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(W(uI,"New document in limbo: "+n),t.Eu.add(r),cI(t))}function cI(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Eu.values().next().value;t.Eu.delete(e);let n=new X(je.fromString(e)),r=t.fu.next();t.Au.set(r,new PC(n)),t.du=t.du.insert(n,r),SN(t.remoteStore,new Du(ur(XC(n.path)),r,"TargetPurposeLimboResolution",zC.ce))}}async function Nu(t,e,n){let r=ae(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((a,l)=>{s.push(r.pu(l,e,n).then(c=>{if((c||n)&&r.isPrimaryClient){let h=c?!c.fromCache:n?.targetChanges.get(l.targetId)?.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);let h=cC.As(l.targetId,c);o.push(h)}}))}),await Promise.all(s),r.Pu.H_(i),await(async function(l,c){let h=ae(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(c,m=>U.forEach(m.Es,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>U.forEach(m.ds,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!pa(p))throw p;W(nI,"Failed to update sequence numbers: "+p)}for(let p of c){let m=p.targetId;if(!p.fromCache){let v=h.Ms.get(m),I=v.snapshotVersion,b=v.withLastLimboFreeSnapshotVersion(I);h.Ms=h.Ms.insert(m,b)}}})(r.localStore,o))}async function k5(t,e){let n=ae(t);if(!n.currentUser.isEqual(e)){W(uI,"User change. New user:",e.toKey());let r=await wN(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach(a=>{a.forEach(l=>{l.reject(new K(V.CANCELLED,s))})}),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Nu(n,r.Ls)}}function F5(t,e){let n=ae(t),r=n.Au.get(e);if(r&&r.hu)return ve().add(r.key);{let i=ve(),o=n.Iu.get(e);if(!o)return i;for(let s of o){let a=n.Tu.get(s);i=i.unionWith(a.view.nu)}return i}}function UN(t){let e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=FN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=F5.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R5.bind(null,e),e.Pu.H_=I5.bind(null,e.eventManager),e.Pu.yu=T5.bind(null,e.eventManager),e}function O5(t){let e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N5.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=x5.bind(null,e),e}var BN=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=hp(n.databaseInfo.databaseId),this.sharedClientState=this.Du(n),this.persistence=this.Cu(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Fu(n,this.localStore),this.indexBackfillerScheduler=this.Mu(n,this.localStore)}Fu(n,r){return null}Mu(n,r){return null}vu(n){return r5(this.persistence,new fC,n.initialUser,this.serializer)}Cu(n){return new Gh(uC.mi,this.serializer)}Du(n){return new mC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),OC=class extends BN{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Re(this.persistence.referenceDelegate instanceof qh,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new QE(r,e.asyncQueue,n)}Cu(e){let n=this.cacheSizeBytes!==void 0?_n.withCacheSize(this.cacheSizeBytes):_n.DEFAULT;return new Gh(r=>qh.mi(r,n),this.serializer)}};var L5=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>_R(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=k5.bind(null,this.syncEngine),await C5(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new MC})()}createDatastore(n){let r=hp(n.databaseInfo.databaseId),i=(function(s){return new EC(s)})(n.databaseInfo);return(function(s,a,l,c){return new wC(s,a,l,c)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,a,l){return new SC(i,o,s,a,l)})(this.localStore,this.datastore,n.asyncQueue,r=>_R(this.syncEngine,r,0),(function(){return jh.v()?new jh:new gC})())}createSyncEngine(n,r){return(function(o,s,a,l,c,h,p){let m=new kC(o,s,a,l,c,h);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=ae(r);W(Fo,"RemoteStore shutting down."),i.Ea.add(5),await Ru(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return t.provider={build:()=>new t},t})();var tp=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Fr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Ai="FirestoreClient",LC=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=mt.UNAUTHENTICATED,this.clientId=_u.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{W(Ai,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(W(Ai,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=aI(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function uE(t,e){t.asyncQueue.verifyOperationInProgress(),W(Ai,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await wN(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function CR(t,e){t.asyncQueue.verifyOperationInProgress();let n=await V5(t);W(Ai,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>gR(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>gR(e.remoteStore,i)),t._onlineComponents=e}async function V5(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W(Ai,"Using user provided OfflineComponentProvider");try{await uE(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===V.FAILED_PRECONDITION||i.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Qs("Error using user provided cache. Falling back to memory cache: "+n),await uE(t,new BN)}}else W(Ai,"Using default OfflineComponentProvider"),await uE(t,new OC(void 0));return t._offlineComponents}async function HN(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W(Ai,"Using user provided OnlineComponentProvider"),await CR(t,t._uninitializedComponentsProvider._online)):(W(Ai,"Using default OnlineComponentProvider"),await CR(t,new L5))),t._onlineComponents}function U5(t){return HN(t).then(e=>e.syncEngine)}async function $N(t){let e=await HN(t),n=e.eventManager;return n.onListen=w5.bind(null,e.syncEngine),n.onUnlisten=A5.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=D5.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=b5.bind(null,e.syncEngine),n}function B5(t,e,n={}){let r=new Un;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,l,c){let h=new tp({next:m=>{h.Nu(),s.enqueueAndForget(()=>PN(o,p));let v=m.docs.has(a);!v&&m.fromCache?c.reject(new K(V.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&l&&l.source==="server"?c.reject(new K(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new Zh(XC(a.path),h,{includeMetadataChanges:!0,qa:!0});return xN(o,p)})(await $N(t),t.asyncQueue,e,n,r)),r.promise}function H5(t,e,n={}){let r=new Un;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,a,l,c){let h=new tp({next:m=>{h.Nu(),s.enqueueAndForget(()=>PN(o,p)),m.fromCache&&l.source==="server"?c.reject(new K(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new Zh(a,h,{includeMetadataChanges:!0,qa:!0});return xN(o,p)})(await $N(t),t.asyncQueue,e,n,r)),r.promise}function GN(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var IR=new Map;var qN="firestore.googleapis.com",TR=!0,np=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new K(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qN,this.ssl=TR}else this.host=e.host,this.ssl=e.ssl??TR;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<e5)throw new K(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Jq("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=GN(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new K(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ca=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new np({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new np(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new cE;switch(r.type){case"firstParty":return new pE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=IR.get(n);r&&(W("ComponentProvider","Removing Datastore"),IR.delete(n),r.terminate())})(this),Promise.resolve()}};function $5(t,e,n,r={}){t=Zs(t,ca);let i=rf(e),o=t._getSettings(),s=he(H({},o),{emulatorOptions:t._getEmulatorOptions()}),a=`${e}:${n}`;i&&(Q0(`https://${a}`),Z0("Firestore",!0)),o.host!==qN&&o.host!==a&&Qs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l=he(H({},o),{host:a,ssl:i,emulatorOptions:r});if(!ys(l,s)&&(t._setSettings(l),r.mockUserToken)){let c,h;if(typeof r.mockUserToken=="string")c=r.mockUserToken,h=mt.MOCK_USER;else{c=Y0(r.mockUserToken,t._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new K(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new mt(p)}t._authCredentials=new dE(new bh(c,h))}}var rp=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},$t=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ci(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Mu(n,t._jsonSchema))return new t(e,r||null,new X(je.fromString(n.referencePath)))}};$t._jsonSchemaVersion="firestore/documentReference/1.0",$t._jsonSchema={type:ot("string",$t._jsonSchemaVersion),referencePath:ot("string")};var Ci=class t extends rp{constructor(e,n,r){super(e,n,XC(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new $t(this.firestore,null,new X(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function zN(t,e,...n){if(t=vs(t),AR("collection","path",e),t instanceof ca){let r=je.fromString(e,...n);return GM(r),new Ci(t,null,r)}{if(!(t instanceof $t||t instanceof Ci))throw new K(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(je.fromString(e,...n));return GM(r),new Ci(t.firestore,null,r)}}function G5(t,e,...n){if(t=vs(t),arguments.length===1&&(e=_u.newId()),AR("doc","path",e),t instanceof ca){let r=je.fromString(e,...n);return $M(r),new $t(t,null,new X(r))}{if(!(t instanceof $t||t instanceof Ci))throw new K(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(je.fromString(e,...n));return $M(r),new $t(t.firestore,t instanceof Ci?t.converter:null,new X(r))}}var wR="AsyncQueue",ip=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wh(this,"async_queue_retry"),this._c=()=>{let r=lE();r&&W(wR,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let n=lE();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=lE();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let n=new Un;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!pa(e))throw e;W(wR,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Fr("INTERNAL UNHANDLED ERROR: ",DR(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let i=AC.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&ee(47125,{Pc:DR(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function DR(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var da=class extends ca{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new ip,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ip(e),this._firestoreClient=void 0,await e}}};function jN(t,e){let n=typeof t=="object"?t:yA(),r=typeof t=="string"?t:e||Ph,i=pA(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=J0("firestore");o&&$5(i,...o)}return i}function dI(t){if(t._terminated)throw new K(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||q5(t),t._firestoreClient}function q5(t){let e=t._freezeSettings(),n=(function(i,o,s,a){return new _E(i,o,s,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,GN(a.experimentalLongPollingOptions),a.useFetchStreams,a.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new LC(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(t._componentsProvider))}var Ii=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Mt.fromBase64String(e))}catch(n){throw new K(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Mt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Mu(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Ii._jsonSchemaVersion="firestore/bytes/1.0",Ii._jsonSchema={type:ot("string",Ii._jsonSchemaVersion),bytes:ot("string")};var bu=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var op=class{constructor(e){this._methodName=e}};var Ti=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ye(this._lat,e._lat)||ye(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Mu(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Ti._jsonSchemaVersion="firestore/geoPoint/1.0",Ti._jsonSchema={type:ot("string",Ti._jsonSchemaVersion),latitude:ot("number"),longitude:ot("number")};var wi=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Mu(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new K(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};wi._jsonSchemaVersion="firestore/vectorValue/1.0",wi._jsonSchema={type:ot("string",wi._jsonSchemaVersion),vectorValues:ot("object")};var z5=/^__.*__$/,VC=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Br(e,this.data,this.fieldMask,n,this.fieldTransforms):new ko(e,this.data,n,this.fieldTransforms)}};function WN(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee(40011,{Ac:t})}}var UC=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new t(H(H({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return sp(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(WN(this.Ac)&&z5.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},BC=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||hp(e)}Cc(e,n,r,i=!1){return new UC({Ac:e,methodName:n,Dc:r,path:nn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function j5(t){let e=t._freezeSettings(),n=hp(t._databaseId);return new BC(t._databaseId,!!e.ignoreUndefinedProperties,n)}function W5(t,e,n,r,i,o={}){let s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);YN("Data must be an object, but it was:",s,r);let a=JN(r,s),l,c;if(o.merge)l=new ar(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=K5(e,p,n);if(!s.contains(m))throw new K(V.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Q5(h,m)||h.push(m)}l=new ar(h),c=s.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=s.fieldTransforms;return new VC(new Vn(a),l,c)}function KN(t,e){if(QN(t=vs(t)))return YN("Unsupported field value:",e,t),JN(t,e);if(t instanceof op)return(function(r,i){if(!WN(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let a of r){let l=KN(a,i.wc(s));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=vs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return A6(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=st.fromDate(r);return{timestampValue:Hh(i.serializer,o)}}if(r instanceof st){let o=new st(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hh(i.serializer,o)}}if(r instanceof Ti)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ii)return{bytesValue:gN(i.serializer,r._byteString)};if(r instanceof $t){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:tI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof wi)return(function(s,a){return{mapValue:{fields:{[KC]:{stringValue:JC},[Xs]:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return eI(a.serializer,c)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${qC(r)}`)})(t,e)}function JN(t,e){let n={};return GR(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Oo(t,(r,i)=>{let o=KN(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function QN(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof st||t instanceof Ti||t instanceof Ii||t instanceof $t||t instanceof op||t instanceof wi)}function YN(t,e,n){if(!QN(n)||!bR(n)){let r=qC(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function K5(t,e,n){if((e=vs(e))instanceof bu)return e._internalPath;if(typeof e=="string")return ZN(t,e);throw sp("Field path arguments must be of type string or ",t,!1,void 0,n)}var J5=new RegExp("[~\\*/\\[\\]]");function ZN(t,e,n){if(e.search(J5)>=0)throw sp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bu(...e.split("."))._internalPath}catch{throw sp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function sp(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=` in field ${r}`),s&&(l+=` in document ${i}`),l+=")"),new K(V.INVALID_ARGUMENT,a+t+l)}function Q5(t,e){return t.some(n=>n.isEqual(e))}var ap=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new HC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(XN("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},HC=class extends ap{data(){return super.data()}};function XN(t,e){return typeof e=="string"?ZN(t,e):e instanceof bu?e._internalPath:e._delegate._internalPath}function Y5(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new K(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var $C=class{convertValue(e,n="none"){switch(Di(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Lr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Oo(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){let n=e.fields?.[Xs].arrayValue?.values?.map(r=>Ge(r.doubleValue));return new wi(n)}convertGeoPoint(e){return new Ti(Ge(e.latitude),Ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=cp(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Iu(e));default:return null}}convertTimestamp(e){let n=Or(e);return new st(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=je.fromString(e);Re(IN(r),9688,{name:e});let i=new kh(r.get(1),r.get(3)),o=new X(r.popFirst(5));return i.isEqual(n)||Fr(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function Z5(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Ao=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Mo=class t extends ap{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Ks(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(XN("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new K(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};Mo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Mo._jsonSchema={type:ot("string",Mo._jsonSchemaVersion),bundleSource:ot("string","DocumentSnapshot"),bundleName:ot("string"),bundle:ot("string")};var Ks=class extends Mo{data(e={}){return super.data(e)}},Js=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ao(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ks(this._firestore,this._userDataWriter,r.key,r,new Ao(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new K(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let l=new Ks(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ao(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let l=new Ks(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ao(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),c=-1,h=-1;return a.type!==0&&(c=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:X5(a.type),doc:l,oldIndex:c,newIndex:h}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new K(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_u.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function X5(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ee(61501,{type:t})}}function ex(t){t=Zs(t,$t);let e=Zs(t.firestore,da);return B5(dI(e),t._key).then(n=>t9(e,t,n))}Js._jsonSchemaVersion="firestore/querySnapshot/1.0",Js._jsonSchema={type:ot("string",Js._jsonSchemaVersion),bundleSource:ot("string","QuerySnapshot"),bundleName:ot("string"),bundle:ot("string")};var lp=class extends $C{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ii(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new $t(this.firestore,null,n)}};function tx(t){t=Zs(t,rp);let e=Zs(t.firestore,da),n=dI(e),r=new lp(e);return Y5(t._query),H5(n,t._query).then(i=>new Js(e,r,t,i))}function nx(t,e){let n=Zs(t.firestore,da),r=G5(t),i=Z5(t.converter,e);return e9(n,[W5(j5(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,bo.exists(!1))]).then(()=>r)}function e9(t,e){return(function(r,i){let o=new Un;return r.asyncQueue.enqueueAndForget(async()=>M5(await U5(r),i,o)),o.promise})(dI(t),e)}function t9(t,e,n){let r=n.docs.get(e._key),i=new lp(t);return new Mo(t,i,e._key,r,new Ao(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){fa=i})(gA),Ul(new Ar("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new da(new fE(r.getProvider("auth-internal")),new mE(s,r.getProvider("app-check-internal")),(function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kh(c.options.projectId,h)})(s,i),s);return o=H({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),hi(UM,BM,e),hi(UM,BM,"esm2020")})();var ga=class t{paletteRepository=new hI;getColorPalettes(){return this.paletteRepository.findAll()}saveColorPalette(e){return this.paletteRepository.create(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"})};function bi(t,e=24){return atob(t).split("").map(n=>String.fromCharCode(n.charCodeAt(0)^e)).join("")}var fI=class{db=jN();get collectionRef(){return zN(this.db,this.collectionName)}findAll(){return Pe(tx(this.collectionRef)).pipe(Xe(e=>$a(e.docs.map(n=>this.build(n.ref)))))}create(e){let n=this.debuild(e);return Pe(nx(this.collectionRef,n)).pipe(Xe(r=>this.build(r)))}},hI=class extends fI{collectionName="palettes";build(e){return Pe(ex(e).then(n=>{if(!n.exists())return new Ln;let r=n.data();if(!r)return new Ln;let i=n.id,o=this.toColor(r.baseColor),s=r.colors?.map(h=>this.toColor(h)),a=this.toColorScheme(r.scheme),l=this.toConcept(r.concept),c=r.interpretation;return new Ln(i,o,s,a,l,c)}))}debuild(e){return{baseColor:this.fromColor(e.baseColor),colors:e.colors.map(n=>this.fromColor(n)),scheme:this.fromColorScheme(e.scheme),concept:this.fromConcept(e.concept),interpretation:e.interpretation}}toColor(e){return new Wt(e?.name,e?.hex,e?.r,e?.g,e?.b)}fromColor(e){return{name:e.name,hex:e.hex,r:e.r,g:e.g,b:e.b}}toColorScheme(e){return new sr(e?.type,e?.tones)}fromColorScheme(e){return{type:e.type,tones:e.tones}}toConcept(e){return new Ei(e?.context,e?.suggestion)}fromConcept(e){return{context:e.context,suggestion:e.suggestion}}};var n9=(t,e)=>e.hex;function r9(t,e){if(t&1&&(P(0,"div",70)(1,"div",88),ge(2,"div",89),P(3,"div",90)(4,"div",91),B(5),F(),P(6,"div",92),B(7),F()()()()),t&2){let n=e.$implicit;z(2),tr("background",n.hex),z(3),Ze(n.hex),z(2),Ze(n.name)}}function i9(t,e){if(t&1&&(P(0,"div",75)(1,"button",93),ge(2,"i",94),P(3,"span",95),B(4,"Explorar biblioteca"),F()(),P(5,"button",96),ge(6,"i",97),P(7,"span"),B(8,"Reiniciar composici\xF3n"),F()()()),t&2){let n=Ct();z(),Oe("disabled",n.loading),De("disabled",n.loading),z(4),Oe("disabled",n.loading),De("disabled",n.loading)}}var gp=class t{geminiServiceHttp=k(fh);geminiServiceMock=k(hh);text2ColorServiceHttp=k(ph);text2ColorServiceMock=k(mh);theColorAPIServiceHttp=k(gh);theColorAPIServiceMock=k(yh);firebaseService=k(ga);cdr=k(gn);disableMock=!0;conceptStep=this.initConceptStep();baseColorStep=this.initBaseColorStep();schemeStep=this.initSchemeStep();resultStep=this.initResultStep();loading=!1;loadingPrompt=!1;loadingColorBase=!1;loadingEsquema=!1;loadingPaleta=!1;onClickBtnPrompt(){this.loading=!0,this.loadingPrompt=!0,this.conceptStep.error=null,this.getGeminiService().getSuggestionPrompt(this.conceptStep.data.context).pipe(this.onFinalize(e=>this.loadingPrompt=e)).subscribe({next:e=>{this.conceptStep.data.suggestion=e},error:e=>this.conceptStep.error=e})}onClickBtnColorBase(){this.loading=!0,this.loadingColorBase=!0,this.conceptStep.error=null,this.getText2ColorService().text2Color(this.conceptStep.data).pipe(this.onFinalize(e=>this.loadingColorBase=e)).subscribe({next:e=>{this.baseColorStep.data=e,this.setStep(this.baseColorStep)},error:e=>this.conceptStep.error=e})}onClickBtnDefinirEsquema(){this.loading=!0,this.loadingEsquema=!0,this.baseColorStep.error=null,re("").pipe(wn(1e3)).pipe(sn(1)).pipe(this.onFinalize(e=>this.loadingEsquema=e)).subscribe({next:e=>{this.setStep(this.schemeStep)},error:e=>this.baseColorStep.error=e})}onClickBtnGenerarPaleta(){this.loading=!0,this.loadingPaleta=!0,this.schemeStep.error=null,this.getTheColorAPIService().getColorPalette(this.baseColorStep.data,this.schemeStep.data,this.conceptStep.data).pipe(Pt(e=>(this.resultStep.data=e,this.getGeminiService().getInterpretation(e).pipe(ce(n=>(this.resultStep.data.interpretation=n,this.resultStep.data))))),Pt(e=>this.firebaseService.saveColorPalette(e)),this.onFinalize(e=>this.loadingPaleta=e)).subscribe({next:e=>{this.resultStep.data=e,this.setStep(this.resultStep)},error:e=>this.schemeStep.error=e})}onFinalize(e){return Gn(()=>{e(!1),this.loading=!1,this.cdr.detectChanges()})}syncColorFromHEX(){this.baseColorStep.data?.syncColorFromHEX()}syncColorFromRGB(){this.baseColorStep.data?.syncColorFromRGB()}restart(){this.conceptStep=this.initConceptStep(),this.baseColorStep=this.initBaseColorStep(),this.schemeStep=this.initSchemeStep(),this.resultStep=this.initResultStep(),this.loading=!1}setStep(e){let n=[this.conceptStep,this.baseColorStep,this.schemeStep,this.resultStep],r=n.indexOf(e);for(let i=0;i<n.length;i++){let o=n[i];o&&(i<r-1?o.status="COMPLETED":i===r-1?o.status="EDITABLE":i===r?(o.status="ENABLED",o.initiated=!0):o.status="DISABLED")}}hide(e){return this.initiated(e)}initiated(e){return e?.initiated!==!0}initConceptStep(){return new wo(new Ei,"ENABLED",!0)}initBaseColorStep(){return new wo(new Wt,"DISABLED",!1)}initSchemeStep(){return new wo(new sr,"DISABLED",!1)}initResultStep(){return new wo(new Ln,"DISABLED",!1)}getGeminiService(){return this.disableMock?this.geminiServiceHttp:this.geminiServiceMock}getText2ColorService(){return this.disableMock?this.text2ColorServiceHttp:this.text2ColorServiceMock}getTheColorAPIService(){return this.disableMock?this.theColorAPIServiceHttp:this.theColorAPIServiceMock}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=xe({type:t,selectors:[["app-compose"]],decls:173,vars:95,consts:[[1,"row","gx-5","justify-content-center"],[1,"col-lg-11","col-xl-9","col-xxl-8"],[1,"text-center"],[1,"display-5","fw-bolder","mb-0"],[1,"text-gradient","d-inline"],[1,"lead","fw-light","mt-3"],[1,"col-lg-10","col-xl-10"],[1,"mb-4","pb-4"],[1,"d-flex","justify-content-center","align-items-center","gap-3","mt-3"],[1,"fw-light","small","mb-0"],[1,"form-check","form-switch"],["id","disableMock","type","checkbox",1,"form-check-input",3,"ngModelChange","ngModel","disabled"],["for","disableMock",1,"form-check-label"],[1,"card","border-primary","bg-primary-soft","mt-2"],[1,"card-body","py-2","text-center","small"],[1,"text-primary","mb-2"],[1,"bi","bi-info-circle","me-2","text-primary"],[1,"mb-0"],[1,"card","border-dark","fade-in","mb-4"],[3,"editStep","step","loading"],[1,"card-body"],[1,"card-title","fw-bold"],[1,"card-subtitle","mb-3","text-body-secondary"],[1,"mb-3"],["for","promptInput",1,"form-label"],["type","text","id","promptInput","placeholder","Ej: nostalgia urbana, minimalismo c\xE1lido...",1,"form-control",3,"ngModelChange","ngModel","disabled","readonly"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],["for","aiPrompt",1,"form-label","mb-0"],["label","Generar prompt","btnClass","btn btn-outline-primary btn-sm ms-3","iconClass","bi bi-stars","iconPosition","end",3,"click","loading","disabled"],["id","aiPrompt","rows","4","placeholder","Sugerencia generada por la IA...",1,"form-control",3,"ngModelChange","ngModel","disabled","readonly"],["label","Obtener color base","btnClass","btn btn-primary","iconClass","bi bi-stars","iconPosition","end",3,"click","loading","disabled"],[3,"error","alertClass"],[1,"card-subtitle","mb-4","text-body-secondary"],[1,"row","mb-3"],[1,"col-md-4","text-center"],["id","colorPreview",1,"rounded","mb-2","border",2,"height","157px"],[1,"text-muted"],[1,"col-md-8"],[1,"row","mb-1"],["for","hexOutput",1,"form-label"],["type","text","id","hexOutput","pattern","^#([A-Fa-f0-9]{6})$",1,"form-control",3,"ngModelChange","ngModel","disabled","readonly"],[1,"form-label"],[1,"d-flex","gap-2"],["type","number","min","0","max","255","placeholder","R",1,"form-control",3,"ngModelChange","ngModel","disabled","readonly"],["type","number","min","0","max","255","placeholder","G",1,"form-control",3,"ngModelChange","ngModel","disabled","readonly"],["type","number","min","0","max","255","placeholder","B",1,"form-control",3,"ngModelChange","ngModel","disabled","readonly"],[1,"col-md-4"],["for","colorPicker",1,"form-label"],["type","color","id","colorPicker","value","#FFFFFF","title","Selecciona un color",1,"form-control","form-control-color",3,"ngModelChange","ngModel","disabled","readonly"],[1,"row"],[1,"col-md-12"],["label","Definir esquema de color","btnClass","btn btn-gray","iconClass","bi bi-gear-fill","iconPosition","start",3,"click","loading","disabled"],[1,"card-subtitle","mb-1","text-body-secondary"],[1,"col-md-6","mt-3"],["for","schemeSelect",1,"form-label"],["id","schemeSelect",1,"form-select",3,"ngModelChange","ngModel","disabled"],["value","","selected","","disabled",""],["value","monochrome"],["value","monochrome-dark"],["value","monochrome-light"],["value","analogic"],["value","complement"],["value","analogic-complement"],["value","triad"],["value","tetrad"],["for","numColors",1,"form-label"],["type","range","id","numColors","min","1","max","10","step","1","value","5",1,"form-range",3,"ngModelChange","ngModel","disabled","readonly"],[1,"d-flex","justify-content-between"],["label","Generar paleta final","btnClass","btn btn-success mt-3","iconClass","bi bi-stars","iconPosition","end",3,"click","loading","disabled"],[1,"row","row-cols-2","row-cols-md-5","g-3","mb-4"],[1,"col"],[1,"mt-4"],["for","aiInterpretation",1,"form-label"],["id","aiInterpretation","rows","6","placeholder","An\xE1lisis generado por IA...","disabled","","readonly","",1,"form-control"],["role","alert",1,"alert","alert-success","mt-3","mb-0","fade","show"],[1,"text-end"],["tabindex","-1","id","modalReinicio",1,"modal"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-light"],[1,"bi","bi-x-lg","me-2"],["type","button","data-bs-dismiss","modal",1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash","me-2"],[1,"bg-light","rounded-3","text-center"],[1,"rounded-top",2,"height","100px"],[1,"p-2"],[1,"small","fw-bolder"],[1,"small","text-muted"],["routerLink","/library",1,"btn","btn-outline-dark","mb-2",3,"disabled"],[1,"bi","bi-journals","me-2"],[1,"px-2"],["data-bs-toggle","modal","data-bs-target","#modalReinicio",1,"btn","btn-outline-danger","mb-2","ms-3",3,"disabled"],[1,"bi","bi-arrow-clockwise","me-2"]],template:function(n,r){n&1&&(P(0,"section",0)(1,"article",1)(2,"div",2)(3,"h1",3)(4,"span",4),B(5,"Crear paleta de colores"),F()(),P(6,"p",5),B(7,"Sigue los pasos del asistente para generar una gama crom\xE1tica a trav\xE9s de la inteligencia artificial."),F()(),P(8,"div",0)(9,"div",6)(10,"div",7)(11,"div",8)(12,"p",9),B(13,"APIs externas"),F(),P(14,"div",10)(15,"input",11),Xt("ngModelChange",function(o){return hn(r.disableMock,o)||(r.disableMock=o),o}),F(),P(16,"label",12),B(17),F()()(),P(18,"div",13)(19,"div",14)(20,"p",15),ge(21,"i",16),P(22,"span"),B(23,"\xBFPor qu\xE9 desactivar APIs?"),F()(),P(24,"p",17),B(25,"Al desactivar las APIs externas se utilizar\xE1n "),P(26,"strong"),B(27,"datos simulados"),F(),B(28,", evitando as\xED el "),P(29,"strong"),B(30,"consumo de recursos"),F(),B(31,"."),F()()()(),P(32,"div",18)(33,"app-step-overlay",19),Fe("editStep",function(o){return r.setStep(o)}),F(),P(34,"div",20)(35,"h5",21),B(36,"Paso 1 \u2014 Concepto creativo"),F(),P(37,"h6",22),B(38,"Define los par\xE1metros para la elecci\xF3n del color"),F(),P(39,"div",23)(40,"label",24),B(41,"Describe un contexto, emoci\xF3n o estilo visual"),F(),P(42,"input",25),Xt("ngModelChange",function(o){return hn(r.conceptStep.data.context,o)||(r.conceptStep.data.context=o),o}),F()(),P(43,"div",23)(44,"div",26)(45,"label",27),B(46," (Opcional) Sugerencia de la IA "),F(),P(47,"btn-spinner",28),Fe("click",function(){return r.onClickBtnPrompt()}),F()(),P(48,"textarea",29),Xt("ngModelChange",function(o){return hn(r.conceptStep.data.suggestion,o)||(r.conceptStep.data.suggestion=o),o}),F()(),P(49,"btn-spinner",30),Fe("click",function(){return r.onClickBtnColorBase()}),F(),ge(50,"app-error-alert",31),F()(),P(51,"div",18)(52,"app-step-overlay",19),Fe("editStep",function(o){return r.setStep(o)}),F(),P(53,"div",20)(54,"h5",21),B(55,"Paso 2 \u2014 Color base"),F(),P(56,"h6",32),B(57,"Genera un color base a partir del concepto creativo"),F(),P(58,"div",33)(59,"div",34),ge(60,"div",35),P(61,"small",36),B(62,"Previsualizaci\xF3n"),F()(),P(63,"div",37)(64,"div",38)(65,"div",37)(66,"div",23)(67,"label",39),B(68,"C\xF3digo hexadecimal"),F(),P(69,"input",40),Xt("ngModelChange",function(o){return hn(r.baseColorStep.data.hex,o)||(r.baseColorStep.data.hex=o),o}),Fe("ngModelChange",function(){return r.syncColorFromHEX()}),F()(),P(70,"div",23)(71,"label",41),B(72,"C\xF3digo RGB"),F(),P(73,"div",42)(74,"input",43),Xt("ngModelChange",function(o){return hn(r.baseColorStep.data.r,o)||(r.baseColorStep.data.r=o),o}),Fe("ngModelChange",function(){return r.syncColorFromRGB()}),F(),P(75,"input",44),Xt("ngModelChange",function(o){return hn(r.baseColorStep.data.g,o)||(r.baseColorStep.data.g=o),o}),Fe("ngModelChange",function(){return r.syncColorFromRGB()}),F(),P(76,"input",45),Xt("ngModelChange",function(o){return hn(r.baseColorStep.data.b,o)||(r.baseColorStep.data.b=o),o}),Fe("ngModelChange",function(){return r.syncColorFromRGB()}),F()()()(),P(77,"div",46)(78,"div")(79,"label",47),B(80,"Ajuste manual"),F(),P(81,"input",48),Xt("ngModelChange",function(o){return hn(r.baseColorStep.data.hex,o)||(r.baseColorStep.data.hex=o),o}),Fe("ngModelChange",function(){return r.syncColorFromHEX()}),F()()()()()(),P(82,"div",49)(83,"div",50)(84,"btn-spinner",51),Fe("click",function(){return r.onClickBtnDefinirEsquema()}),F(),ge(85,"app-error-alert",31),F()()()(),P(86,"div",18)(87,"app-step-overlay",19),Fe("editStep",function(o){return r.setStep(o)}),F(),P(88,"div",20)(89,"h5",21),B(90,"Paso 3 \u2014 Construcci\xF3n crom\xE1tica"),F(),P(91,"h6",52),B(92,"Selecciona los par\xE1metros de creaci\xF3n de la paleta de color"),F(),P(93,"div",49)(94,"div",53)(95,"label",54),B(96," Tipo de esquema crom\xE1tico "),F(),P(97,"select",55),Xt("ngModelChange",function(o){return hn(r.schemeStep.data.type,o)||(r.schemeStep.data.type=o),o}),P(98,"option",56),B(99,"Selecciona un esquema..."),F(),P(100,"option",57),B(101,"Monocrom\xE1tico"),F(),P(102,"option",58),B(103,"Monocrom\xE1tico oscuro"),F(),P(104,"option",59),B(105,"Monocrom\xE1tico claro"),F(),P(106,"option",60),B(107,"An\xE1logo"),F(),P(108,"option",61),B(109,"Complementario"),F(),P(110,"option",62),B(111,"An\xE1logo complementario"),F(),P(112,"option",63),B(113,"Triada"),F(),P(114,"option",64),B(115,"Cu\xE1druple"),F()()(),P(116,"div",53)(117,"label",65),B(118,"N\xFAmero de tonalidades"),F(),P(119,"input",66),Xt("ngModelChange",function(o){return hn(r.schemeStep.data.tones,o)||(r.schemeStep.data.tones=o),o}),F(),P(120,"div",67)(121,"span"),B(122,"1"),F(),P(123,"span"),B(124,"5"),F(),P(125,"span"),B(126,"10"),F()()()(),P(127,"btn-spinner",68),Fe("click",function(){return r.onClickBtnGenerarPaleta()}),F(),ge(128,"app-error-alert",31),F()(),P(129,"div",18)(130,"app-step-overlay",19),Fe("editStep",function(o){return r.setStep(o)}),F(),P(131,"div",20)(132,"h5",21),B(133,"Paso 4 \u2014 Paleta resultante"),F(),P(134,"h6",32),B(135,"Visualiza la paleta crom\xE1tica generada"),F(),P(136,"div",69),ai(137,r9,8,4,"div",70,n9),F(),P(139,"div",71)(140,"label",72),B(141," Lectura interpretativa "),F(),P(142,"textarea",73),B(143),F()(),P(144,"div",74),B(145," La paleta se ha "),P(146,"strong"),B(147,"generado"),F(),B(148," y ha sido "),P(149,"strong"),B(150,"guardada en la biblioteca"),F(),B(151," correctamente. "),F(),ge(152,"app-error-alert",31),F()(),Dt(153,i9,9,6,"div",75),P(154,"div",76)(155,"div",77)(156,"div",78)(157,"div",79)(158,"h5",80),B(159,"Reiniciar composici\xF3n"),F(),ge(160,"button",81),F(),P(161,"div",82)(162,"p",17),B(163,"\xBFEst\xE1 seguro de que desea comenzar una nueva composici\xF3n?"),F()(),P(164,"div",83)(165,"button",84),ge(166,"i",85),P(167,"span"),B(168,"Cerrar"),F()(),P(169,"button",86),Fe("click",function(){return r.restart()}),ge(170,"i",87),P(171,"span"),B(172,"Reiniciar"),F()()()()()()()()()()),n&2&&(z(15),Oe("disabled",r.loading),Zt("ngModel",r.disableMock),De("disabled",r.loading),z(2),Ze(r.disableMock?"Activadas":"Desactivadas"),z(15),Oe("show",!r.hide(r.conceptStep))("hidden",r.hide(r.conceptStep)),z(),De("step",r.conceptStep)("loading",r.loading),z(9),Oe("disabled",r.loading),Zt("ngModel",r.conceptStep.data.context),De("disabled",r.loading)("readonly",r.loading),z(5),De("loading",r.loadingPrompt)("disabled",r.loading),z(),Oe("disabled",r.loading),Zt("ngModel",r.conceptStep.data.suggestion),De("disabled",r.loading)("readonly",r.loading),z(),De("loading",r.loadingColorBase)("disabled",r.loading),z(),De("error",r.conceptStep.error)("alertClass","mb-0 mt-3"),z(),Oe("show",!r.hide(r.baseColorStep))("hidden",r.hide(r.baseColorStep)),z(),De("step",r.baseColorStep)("loading",r.loading),z(8),tr("background",r.baseColorStep.data.hex),z(9),Oe("disabled",r.loading),Zt("ngModel",r.baseColorStep.data.hex),De("disabled",r.loading)("readonly",r.loading),z(5),Oe("disabled",r.loading),Zt("ngModel",r.baseColorStep.data.r),De("disabled",r.loading)("readonly",r.loading),z(),Oe("disabled",r.loading),Zt("ngModel",r.baseColorStep.data.g),De("disabled",r.loading)("readonly",r.loading),z(),Oe("disabled",r.loading),Zt("ngModel",r.baseColorStep.data.b),De("disabled",r.loading)("readonly",r.loading),z(5),Oe("disabled",r.loading),Zt("ngModel",r.baseColorStep.data.hex),De("disabled",r.loading)("readonly",r.loading),z(3),De("loading",r.loadingEsquema)("disabled",r.loading),z(),De("error",r.baseColorStep.error)("alertClass","mb-0 mt-3"),z(),Oe("show",!r.hide(r.schemeStep))("hidden",r.hide(r.schemeStep)),z(),De("step",r.schemeStep)("loading",r.loading),z(10),Oe("disabled",r.loading),Zt("ngModel",r.schemeStep.data.type),De("disabled",r.loading),z(22),Oe("disabled",r.loading),Zt("ngModel",r.schemeStep.data.tones),De("disabled",r.loading)("readonly",r.loading),z(8),De("loading",r.loadingPaleta)("disabled",r.loading),z(),De("error",r.schemeStep.error)("alertClass","mb-0 mt-3"),z(),Oe("show",!r.hide(r.resultStep))("hidden",r.hide(r.resultStep)),z(),De("step",r.resultStep)("loading",r.loading),z(7),li(r.resultStep.data.colors),z(6),Ze(r.resultStep.data.interpretation),z(),Oe("d-none",!r.resultStep.isEnabled()),z(8),De("error",r.resultStep.error)("alertClass","mb-0 mt-3"),z(),St(r.initiated(r.resultStep)?-1:153))},dependencies:[yi,Hb,Ob,Vb,Hf,Yv,Zv,Kv,zf,Pb,n_,t_,e_,Qv,$b,vh,_h,Bs],styles:[".hidden[_ngcontent-%COMP%]{display:none!important}.fade-in[_ngcontent-%COMP%]{opacity:0;will-change:opacity,transform}.fade-in.show[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeInOpacity 1s ease forwards}@keyframes _ngcontent-%COMP%_fadeInOpacity{0%{opacity:0}to{opacity:1}}"]})};var yp=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=xe({type:t,selectors:[["app-result"]],decls:2,vars:0,template:function(n,r){n&1&&(Ue(0,"p"),B(1,"result works!"),Be())},encapsulation:2})};var vp=class t{size="MD";sizeMap={SM:{height:"40px",width:"40px",fontSize:"1rem"},MD:{height:"60px",width:"60px",fontSize:"1.5rem"},LG:{height:"80px",width:"80px",fontSize:"2rem"}};get config(){return this.sizeMap[this.size]}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=xe({type:t,selectors:[["app-spinner"]],inputs:{size:"size"},decls:4,vars:6,consts:[[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(n,r){n&1&&(Ue(0,"div",0)(1,"div",1)(2,"span",2),B(3,"Cargando..."),Be()()()),n&2&&(z(),tr("height",r.config.height)("width",r.config.width)("font-size",r.config.fontSize))},encapsulation:2})},pI=(r=>(r.SM="SM",r.MD="MD",r.LG="LG",r))(pI||{});var o9=(t,e)=>e.id,s9=(t,e)=>e.hex;function a9(t,e){if(t&1&&ge(0,"app-spinner",6),t&2){let n=Ct();De("size",n.SpinnerSize.LG)}}function l9(t,e){if(t&1&&(P(0,"div",17),ge(1,"i",21),P(2,"span"),B(3),F()()),t&2){let n=Ct().$implicit;z(3),Ze(n.concept.suggestion)}}function u9(t,e){if(t&1&&(P(0,"div",20)(1,"div",22),ge(2,"div",23),P(3,"div",24)(4,"div",25),B(5),F(),P(6,"div",26),B(7),F()()()()),t&2){let n=e.$implicit;z(2),tr("background",n.hex),z(3),Ze(n.hex),z(2),Ze(n.name)}}function c9(t,e){if(t&1&&(P(0,"div",8)(1,"div",9)(2,"div",10)(3,"div",11)(4,"div",12)(5,"div",13),B(6),F(),P(7,"div",14),B(8,"Color base"),F(),P(9,"div",15),B(10),F(),P(11,"div",14),B(12,"Esquema crom\xE1tico"),F()()(),P(13,"div",16)(14,"div",13),B(15),F(),Dt(16,l9,4,1,"div",17),P(17,"div",18),B(18),F()()(),P(19,"div",19),ai(20,u9,8,4,"div",20,s9),F()()()),t&2){let n=e.$implicit;z(5),tr("color",n.baseColor.hex),z(),Ze(n.baseColor.hex),z(4),Ze(n.scheme.type),z(5),Ze(n.concept.context),z(),St(n.concept.suggestion?16:-1),z(2),Ze(n.interpretation),z(2),li(n.colors)}}function d9(t,e){if(t&1&&(ai(0,c9,22,7,"div",8,o9),Hd(2,"async")),t&2){let n=Ct();li($d(2,0,n.colorPalettes))}}var _p=class t{SpinnerSize=pI;cdr=k(gn);firebaseService=k(ga);colorPalettes;loadError;constructor(){this.colorPalettes=this.firebaseService.getColorPalettes(),this.colorPalettes.pipe(Gn(()=>this.cdr.detectChanges())).subscribe({error:e=>this.loadError=e})}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=xe({type:t,selectors:[["app-library"]],decls:13,vars:5,consts:[[1,"row","gx-5","justify-content-center"],[1,"col-lg-11","col-xl-9","col-xxl-8"],[1,"text-center","mb-5"],[1,"display-5","fw-bolder","mb-0"],[1,"text-gradient","d-inline"],[1,"lead","fw-light","mt-3"],[3,"size"],[3,"error","alertClass"],[1,"card","shadow","border-0","rounded-4","mb-5"],[1,"card-body","p-5"],[1,"row","mb-3","align-items-center","gx-5"],[1,"col-lg-4","text-center","text-lg-start","mb-4","mb-lg-0"],[1,"bg-light","p-4","rounded-4"],[1,"fw-bolder"],[1,"small","fst-italic","text-muted"],[1,"small","fw-bolder","mt-2"],[1,"col-lg-8"],[1,"small","text-muted","fst-italic"],[1,"mt-2"],[1,"row","align-items-center"],[1,"col","mt-3"],[1,"bi","bi-stars","me-1"],[1,"bg-light","rounded-3","text-center"],[1,"rounded-top",2,"height","100px"],[1,"p-2"],[1,"small","fw-bolder"],[1,"small","text-muted"]],template:function(n,r){n&1&&(P(0,"section",0)(1,"article",1)(2,"div",2)(3,"h1",3)(4,"span",4),B(5,"Biblioteca de paletas"),F()(),P(6,"p",5),B(7,"Explora las paletas creadas por ti u otros usuarios. Visualiza cada combinaci\xF3n de colores y ad\xE1ptalas a tus preferencias para tus proyectos creativos."),F()(),P(8,"div"),Dt(9,a9,1,1,"app-spinner",6),Hd(10,"async"),wl(11,d9,3,2),ge(12,"app-error-alert",7),F()()()),n&2&&(z(9),St($d(10,3,r.colorPalettes)?11:9),z(3),De("error",r.loadError)("alertClass","mb-0 mt-4"))},dependencies:[Bs,vp,By],encapsulation:2})};var rx=[{path:"",component:Of,title:"CreativIA \xB7 Inicio"},{path:"componer",component:gp,title:"CreativIA \xB7 Componer"},{path:"resultado/:id",component:yp,title:"CreativIA \xB7 Resultado"},{path:"library",component:_p,title:"CreativIA \xB7 Biblioteca"},{path:"**",redirectTo:""}];var ix={providers:[Dg(),Xy(),Hv(rx)]};var Ep=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=xe({type:t,selectors:[["app-header"]],decls:18,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-white","py-1"],[1,"container","px-4"],["routerLink","/",1,"navbar-brand"],["height","50","src","assets/images/logo-header.png","alt","CreativIA",1,"me-2"],[1,"fw-bolder","text-primary"],[1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","mb-2","mb-lg-0","small","fw-bolder"],[1,"nav-item"],["routerLink","/",1,"nav-link"],["routerLink","/componer",1,"nav-link"],["routerLink","/library",1,"nav-link"]],template:function(n,r){n&1&&(P(0,"header")(1,"nav",0)(2,"div",1)(3,"a",2),ge(4,"img",3),P(5,"span",4),B(6,"CreativIA"),F()(),P(7,"div",5)(8,"ul",6)(9,"li",7)(10,"a",8),B(11,"Inicio"),F()(),P(12,"li",7)(13,"a",9),B(14,"Componer"),F()(),P(15,"li",7)(16,"a",10),B(17,"Biblioteca"),F()()()()()()())},dependencies:[yi],encapsulation:2})};var Cp=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=xe({type:t,selectors:[["app-footer"]],decls:18,vars:0,consts:[[1,"bg-white","py-5"],[1,"container","px-5"],[1,"row","gx-5","justify-content-center"],[1,"col-xxl-8"],[1,"text-center","my-2"],[1,"display-5","fw-bolder"],[1,"text-gradient","d-inline"],[1,"lead","fw-light","mb-4"],[1,"text-muted"],[1,"d-flex","justify-content-center","fs-2","gap-4"],["target","_blank","href","https://github.com/alvaro-ortiz-fernandez/CreativIA",1,"text-gradient"],[1,"bi","bi-github"],[1,"col-auto"],[1,"small","text-muted","m-0"]],template:function(n,r){n&1&&(Ue(0,"footer",0)(1,"section",1)(2,"article",2)(3,"div",3)(4,"div",4)(5,"h2",5)(6,"span",6),B(7,"CreativIA"),Be()(),Ue(8,"p",7),B(9,"Generador y analizador de paletas crom\xE1ticas guiado por inteligencia artificial"),Be(),Ue(10,"p",8),B(11,"CreativIA traduce ideas y sensaciones en paletas visuales mediante inteligencia artificial, permitiendo convertir conceptos abstractos en decisiones de dise\xF1o."),Be(),Ue(12,"div",9)(13,"a",10),jt(14,"i",11),Be()(),Ue(15,"div",12)(16,"div",13),B(17,"\xA9 CreativIA GPL-3.0"),Be()()()()()()())},encapsulation:2})};var Ip=class t{title=Yt("CreativIA",{});static \u0275fac=function(n){return new(n||t)};static \u0275cmp=xe({type:t,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"d-flex","flex-column","min-vh-100","bg-light"],[1,"flex-grow-1","container","px-4","py-5"]],template:function(n,r){n&1&&(P(0,"div",0),ge(1,"app-header"),P(2,"main",1),ge(3,"router-outlet"),F(),ge(4,"app-footer"),F())},dependencies:[tu,Ep,Cp],encapsulation:2})};Ky(Ip,ix).catch(t=>console.error(t));vv({apiKey:bi("WVFieUthWWBKT3BAISxVV1Rafm9ALSohKWpffElPV0E1TCtddHZv"),authDomain:bi("e2p9eWxxbnF5NX0tLC4gNn5xan16eWt9eWhoNnt3dQ=="),projectId:bi("e2p9eWxxbnF5NX0tLC4g"),storageBucket:bi("e2p9eWxxbnF5NX0tLC4gNn5xan16eWt9a2x3anl/fTZ5aGg="),messagingSenderId:bi("LiopISspIC8tLCwu"),appId:bi("KSIuKikhKykgLy0sLC4ib316Iip+KHkqfX0oLCEteyF6KiF6KS4rLS8="),measurementId:bi("XzUoLClVK19dLkFO")});
